(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function NS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rm={exports:{}},eu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE;function u1(){if(KE)return eu;KE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:s,key:c,ref:a!==void 0?a:null,props:l}}return eu.Fragment=e,eu.jsx=t,eu.jsxs=t,eu}var QE;function c1(){return QE||(QE=1,rm.exports=u1()),rm.exports}var fe=c1(),im={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WE;function f1(){if(WE)return De;WE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function v(V){return V===null||typeof V!="object"?null:(V=E&&V[E]||V["@@iterator"],typeof V=="function"?V:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,L={};function x(V,ee,ce){this.props=V,this.context=ee,this.refs=L,this.updater=ce||A}x.prototype.isReactComponent={},x.prototype.setState=function(V,ee){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ee,"setState")},x.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function $(){}$.prototype=x.prototype;function Y(V,ee,ce){this.props=V,this.context=ee,this.refs=L,this.updater=ce||A}var te=Y.prototype=new $;te.constructor=Y,O(te,x.prototype),te.isPureReactComponent=!0;var ae=Array.isArray,re={H:null,A:null,T:null,S:null,V:null},ie=Object.prototype.hasOwnProperty;function C(V,ee,ce,se,_e,Ce){return ce=Ce.ref,{$$typeof:n,type:V,key:ee,ref:ce!==void 0?ce:null,props:Ce}}function I(V,ee){return C(V.type,ee,void 0,void 0,void 0,V.props)}function R(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function M(V){var ee={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ce){return ee[ce]})}var P=/\/+/g;function U(V,ee){return typeof V=="object"&&V!==null&&V.key!=null?M(""+V.key):ee.toString(36)}function D(){}function ut(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(D,D):(V.status="pending",V.then(function(ee){V.status==="pending"&&(V.status="fulfilled",V.value=ee)},function(ee){V.status==="pending"&&(V.status="rejected",V.reason=ee)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function He(V,ee,ce,se,_e){var Ce=typeof V;(Ce==="undefined"||Ce==="boolean")&&(V=null);var be=!1;if(V===null)be=!0;else switch(Ce){case"bigint":case"string":case"number":be=!0;break;case"object":switch(V.$$typeof){case n:case e:be=!0;break;case _:return be=V._init,He(be(V._payload),ee,ce,se,_e)}}if(be)return _e=_e(V),be=se===""?"."+U(V,0):se,ae(_e)?(ce="",be!=null&&(ce=be.replace(P,"$&/")+"/"),He(_e,ee,ce,"",function(un){return un})):_e!=null&&(R(_e)&&(_e=I(_e,ce+(_e.key==null||V&&V.key===_e.key?"":(""+_e.key).replace(P,"$&/")+"/")+be)),ee.push(_e)),1;be=0;var gt=se===""?".":se+":";if(ae(V))for(var Ze=0;Ze<V.length;Ze++)se=V[Ze],Ce=gt+U(se,Ze),be+=He(se,ee,ce,Ce,_e);else if(Ze=v(V),typeof Ze=="function")for(V=Ze.call(V),Ze=0;!(se=V.next()).done;)se=se.value,Ce=gt+U(se,Ze++),be+=He(se,ee,ce,Ce,_e);else if(Ce==="object"){if(typeof V.then=="function")return He(ut(V),ee,ce,se,_e);throw ee=String(V),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return be}function K(V,ee,ce){if(V==null)return V;var se=[],_e=0;return He(V,se,"","",function(Ce){return ee.call(ce,Ce,_e++)}),se}function ue(V){if(V._status===-1){var ee=V._result;ee=ee(),ee.then(function(ce){(V._status===0||V._status===-1)&&(V._status=1,V._result=ce)},function(ce){(V._status===0||V._status===-1)&&(V._status=2,V._result=ce)}),V._status===-1&&(V._status=0,V._result=ee)}if(V._status===1)return V._result.default;throw V._result}var me=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function ke(){}return De.Children={map:K,forEach:function(V,ee,ce){K(V,function(){ee.apply(this,arguments)},ce)},count:function(V){var ee=0;return K(V,function(){ee++}),ee},toArray:function(V){return K(V,function(ee){return ee})||[]},only:function(V){if(!R(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},De.Component=x,De.Fragment=t,De.Profiler=a,De.PureComponent=Y,De.StrictMode=s,De.Suspense=p,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=re,De.__COMPILER_RUNTIME={__proto__:null,c:function(V){return re.H.useMemoCache(V)}},De.cache=function(V){return function(){return V.apply(null,arguments)}},De.cloneElement=function(V,ee,ce){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var se=O({},V.props),_e=V.key,Ce=void 0;if(ee!=null)for(be in ee.ref!==void 0&&(Ce=void 0),ee.key!==void 0&&(_e=""+ee.key),ee)!ie.call(ee,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&ee.ref===void 0||(se[be]=ee[be]);var be=arguments.length-2;if(be===1)se.children=ce;else if(1<be){for(var gt=Array(be),Ze=0;Ze<be;Ze++)gt[Ze]=arguments[Ze+2];se.children=gt}return C(V.type,_e,void 0,void 0,Ce,se)},De.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},De.createElement=function(V,ee,ce){var se,_e={},Ce=null;if(ee!=null)for(se in ee.key!==void 0&&(Ce=""+ee.key),ee)ie.call(ee,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(_e[se]=ee[se]);var be=arguments.length-2;if(be===1)_e.children=ce;else if(1<be){for(var gt=Array(be),Ze=0;Ze<be;Ze++)gt[Ze]=arguments[Ze+2];_e.children=gt}if(V&&V.defaultProps)for(se in be=V.defaultProps,be)_e[se]===void 0&&(_e[se]=be[se]);return C(V,Ce,void 0,void 0,null,_e)},De.createRef=function(){return{current:null}},De.forwardRef=function(V){return{$$typeof:d,render:V}},De.isValidElement=R,De.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:ue}},De.memo=function(V,ee){return{$$typeof:g,type:V,compare:ee===void 0?null:ee}},De.startTransition=function(V){var ee=re.T,ce={};re.T=ce;try{var se=V(),_e=re.S;_e!==null&&_e(ce,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(ke,me)}catch(Ce){me(Ce)}finally{re.T=ee}},De.unstable_useCacheRefresh=function(){return re.H.useCacheRefresh()},De.use=function(V){return re.H.use(V)},De.useActionState=function(V,ee,ce){return re.H.useActionState(V,ee,ce)},De.useCallback=function(V,ee){return re.H.useCallback(V,ee)},De.useContext=function(V){return re.H.useContext(V)},De.useDebugValue=function(){},De.useDeferredValue=function(V,ee){return re.H.useDeferredValue(V,ee)},De.useEffect=function(V,ee,ce){var se=re.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(V,ee)},De.useId=function(){return re.H.useId()},De.useImperativeHandle=function(V,ee,ce){return re.H.useImperativeHandle(V,ee,ce)},De.useInsertionEffect=function(V,ee){return re.H.useInsertionEffect(V,ee)},De.useLayoutEffect=function(V,ee){return re.H.useLayoutEffect(V,ee)},De.useMemo=function(V,ee){return re.H.useMemo(V,ee)},De.useOptimistic=function(V,ee){return re.H.useOptimistic(V,ee)},De.useReducer=function(V,ee,ce){return re.H.useReducer(V,ee,ce)},De.useRef=function(V){return re.H.useRef(V)},De.useState=function(V){return re.H.useState(V)},De.useSyncExternalStore=function(V,ee,ce){return re.H.useSyncExternalStore(V,ee,ce)},De.useTransition=function(){return re.H.useTransition()},De.version="19.1.0",De}var XE;function bh(){return XE||(XE=1,im.exports=f1()),im.exports}var ne=bh();const bt=NS(ne);var sm={exports:{}},tu={},am={exports:{}},om={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZE;function h1(){return ZE||(ZE=1,function(n){function e(K,ue){var me=K.length;K.push(ue);e:for(;0<me;){var ke=me-1>>>1,V=K[ke];if(0<a(V,ue))K[ke]=ue,K[me]=V,me=ke;else break e}}function t(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var ue=K[0],me=K.pop();if(me!==ue){K[0]=me;e:for(var ke=0,V=K.length,ee=V>>>1;ke<ee;){var ce=2*(ke+1)-1,se=K[ce],_e=ce+1,Ce=K[_e];if(0>a(se,me))_e<V&&0>a(Ce,se)?(K[ke]=Ce,K[_e]=me,ke=_e):(K[ke]=se,K[ce]=me,ke=ce);else if(_e<V&&0>a(Ce,me))K[ke]=Ce,K[_e]=me,ke=_e;else break e}}return ue}function a(K,ue){var me=K.sortIndex-ue.sortIndex;return me!==0?me:K.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],g=[],_=1,E=null,v=3,A=!1,O=!1,L=!1,x=!1,$=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function ae(K){for(var ue=t(g);ue!==null;){if(ue.callback===null)s(g);else if(ue.startTime<=K)s(g),ue.sortIndex=ue.expirationTime,e(p,ue);else break;ue=t(g)}}function re(K){if(L=!1,ae(K),!O)if(t(p)!==null)O=!0,ie||(ie=!0,U());else{var ue=t(g);ue!==null&&He(re,ue.startTime-K)}}var ie=!1,C=-1,I=5,R=-1;function M(){return x?!0:!(n.unstable_now()-R<I)}function P(){if(x=!1,ie){var K=n.unstable_now();R=K;var ue=!0;try{e:{O=!1,L&&(L=!1,Y(C),C=-1),A=!0;var me=v;try{t:{for(ae(K),E=t(p);E!==null&&!(E.expirationTime>K&&M());){var ke=E.callback;if(typeof ke=="function"){E.callback=null,v=E.priorityLevel;var V=ke(E.expirationTime<=K);if(K=n.unstable_now(),typeof V=="function"){E.callback=V,ae(K),ue=!0;break t}E===t(p)&&s(p),ae(K)}else s(p);E=t(p)}if(E!==null)ue=!0;else{var ee=t(g);ee!==null&&He(re,ee.startTime-K),ue=!1}}break e}finally{E=null,v=me,A=!1}ue=void 0}}finally{ue?U():ie=!1}}}var U;if(typeof te=="function")U=function(){te(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,ut=D.port2;D.port1.onmessage=P,U=function(){ut.postMessage(null)}}else U=function(){$(P,0)};function He(K,ue){C=$(function(){K(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(K){switch(v){case 1:case 2:case 3:var ue=3;break;default:ue=v}var me=v;v=ue;try{return K()}finally{v=me}},n.unstable_requestPaint=function(){x=!0},n.unstable_runWithPriority=function(K,ue){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var me=v;v=K;try{return ue()}finally{v=me}},n.unstable_scheduleCallback=function(K,ue,me){var ke=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?ke+me:ke):me=ke,K){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=me+V,K={id:_++,callback:ue,priorityLevel:K,startTime:me,expirationTime:V,sortIndex:-1},me>ke?(K.sortIndex=me,e(g,K),t(p)===null&&K===t(g)&&(L?(Y(C),C=-1):L=!0,He(re,me-ke))):(K.sortIndex=V,e(p,K),O||A||(O=!0,ie||(ie=!0,U()))),K},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(K){var ue=v;return function(){var me=v;v=ue;try{return K.apply(this,arguments)}finally{v=me}}}}(om)),om}var JE;function d1(){return JE||(JE=1,am.exports=h1()),am.exports}var lm={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function p1(){if(eb)return rn;eb=1;var n=bh();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:p,containerInfo:g,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,rn.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,_)},rn.flushSync=function(p){var g=c.T,_=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=g,s.p=_,s.d.f()}},rn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},rn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},rn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,E=d(_,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,A=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:v,fetchPriority:A}):_==="script"&&s.d.X(p,{crossOrigin:E,integrity:v,fetchPriority:A,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},rn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},rn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,E=d(_,g.crossOrigin);s.d.L(p,_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},rn.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=d(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},rn.requestFormReset=function(p){s.d.r(p)},rn.unstable_batchedUpdates=function(p,g){return p(g)},rn.useFormState=function(p,g,_){return c.H.useFormState(p,g,_)},rn.useFormStatus=function(){return c.H.useHostTransitionStatus()},rn.version="19.1.0",rn}var tb;function xS(){if(tb)return lm.exports;tb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),lm.exports=p1(),lm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb;function m1(){if(nb)return tu;nb=1;var n=d1(),e=bh(),t=xS();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(s(188))}function p(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(s(188));return i!==r?null:r}for(var o=r,u=i;;){var h=o.return;if(h===null)break;var m=h.alternate;if(m===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===o)return d(h),r;if(m===u)return d(h),i;m=m.sibling}throw Error(s(188))}if(o.return!==u.return)o=h,u=m;else{for(var T=!1,S=h.child;S;){if(S===o){T=!0,o=h,u=m;break}if(S===u){T=!0,u=h,o=m;break}S=S.sibling}if(!T){for(S=m.child;S;){if(S===o){T=!0,o=m,u=h;break}if(S===u){T=!0,u=m,o=h;break}S=S.sibling}if(!T)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?r:i}function g(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=g(r),i!==null)return i;r=r.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),Y=Symbol.for("react.consumer"),te=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function U(r){return r===null||typeof r!="object"?null:(r=P&&r[P]||r["@@iterator"],typeof r=="function"?r:null)}var D=Symbol.for("react.client.reference");function ut(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===D?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case O:return"Fragment";case x:return"Profiler";case L:return"StrictMode";case re:return"Suspense";case ie:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case A:return"Portal";case te:return(r.displayName||"Context")+".Provider";case Y:return(r._context.displayName||"Context")+".Consumer";case ae:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case C:return i=r.displayName||null,i!==null?i:ut(r.type)||"Memo";case I:i=r._payload,r=r._init;try{return ut(r(i))}catch{}}return null}var He=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},ke=[],V=-1;function ee(r){return{current:r}}function ce(r){0>V||(r.current=ke[V],ke[V]=null,V--)}function se(r,i){V++,ke[V]=r.current,r.current=i}var _e=ee(null),Ce=ee(null),be=ee(null),gt=ee(null);function Ze(r,i){switch(se(be,i),se(Ce,r),se(_e,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?TE(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=TE(i),r=SE(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ce(_e),se(_e,r)}function un(){ce(_e),ce(Ce),ce(be)}function Un(r){r.memoizedState!==null&&se(gt,r);var i=_e.current,o=SE(i,r.type);i!==o&&(se(Ce,r),se(_e,o))}function yr(r){Ce.current===r&&(ce(_e),ce(Ce)),gt.current===r&&(ce(gt),Ql._currentValue=me)}var Tt=Object.prototype.hasOwnProperty,Sn=n.unstable_scheduleCallback,Ss=n.unstable_cancelCallback,$o=n.unstable_shouldYield,Ju=n.unstable_requestPaint,Bn=n.unstable_now,rd=n.unstable_getCurrentPriorityLevel,Yo=n.unstable_ImmediatePriority,Ta=n.unstable_UserBlockingPriority,As=n.unstable_NormalPriority,id=n.unstable_LowPriority,Sa=n.unstable_IdlePriority,Ko=n.log,ec=n.unstable_setDisableYieldValue,ht=null,Qe=null;function An(r){if(typeof Ko=="function"&&ec(r),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(ht,r)}catch{}}var tn=Math.clz32?Math.clz32:ws,tc=Math.log,sd=Math.LN2;function ws(r){return r>>>=0,r===0?32:31-(tc(r)/sd|0)|0}var Is=256,Rs=4194304;function sr(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Aa(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var h=0,m=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var S=u&134217727;return S!==0?(u=S&~m,u!==0?h=sr(u):(T&=S,T!==0?h=sr(T):o||(o=S&~r,o!==0&&(h=sr(o))))):(S=u&~m,S!==0?h=sr(S):T!==0?h=sr(T):o||(o=u&~r,o!==0&&(h=sr(o)))),h===0?0:i!==0&&i!==h&&(i&m)===0&&(m=h&-h,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:h}function Cs(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Qo(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wo(){var r=Is;return Is<<=1,(Is&4194048)===0&&(Is=256),r}function Xo(){var r=Rs;return Rs<<=1,(Rs&62914560)===0&&(Rs=4194304),r}function Gr(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function $r(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Zo(r,i,o,u,h,m){var T=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var S=r.entanglements,N=r.expirationTimes,F=r.hiddenUpdates;for(o=T&~o;0<o;){var Q=31-tn(o),Z=1<<Q;S[Q]=0,N[Q]=-1;var H=F[Q];if(H!==null)for(F[Q]=null,Q=0;Q<H.length;Q++){var j=H[Q];j!==null&&(j.lane&=-536870913)}o&=~Z}u!==0&&_r(r,u,0),m!==0&&h===0&&r.tag!==0&&(r.suspendedLanes|=m&~(T&~i))}function _r(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-tn(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function Jo(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-tn(o),h=1<<u;h&i|r[u]&i&&(r[u]|=i),o&=~h}}function Ai(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function wa(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function wi(){var r=ue.p;return r!==0?r:(r=window.event,r===void 0?32:FE(r.type))}function nc(r,i){var o=ue.p;try{return ue.p=r,i()}finally{ue.p=o}}var ot=Math.random().toString(36).slice(2),Nt="__reactFiber$"+ot,St="__reactProps$"+ot,zn="__reactContainer$"+ot,el="__reactEvents$"+ot,ad="__reactListeners$"+ot,Ii="__reactHandles$"+ot,rc="__reactResources$"+ot,Ds="__reactMarker$"+ot;function Ri(r){delete r[Nt],delete r[St],delete r[el],delete r[ad],delete r[Ii]}function Yr(r){var i=r[Nt];if(i)return i;for(var o=r.parentNode;o;){if(i=o[zn]||o[Nt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=RE(r);r!==null;){if(o=r[Nt])return o;r=RE(r)}return i}r=o,o=r.parentNode}return null}function vr(r){if(r=r[Nt]||r[zn]){var i=r.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return r}return null}function Er(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function cn(r){var i=r[rc];return i||(i=r[rc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function yt(r){r[Ds]=!0}var tl=new Set,Ia={};function ar(r,i){Kr(r,i),Kr(r+"Capture",i)}function Kr(r,i){for(Ia[r]=i,r=0;r<i.length;r++)tl.add(i[r])}var ic=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sc={},Os={};function ac(r){return Tt.call(Os,r)?!0:Tt.call(sc,r)?!1:ic.test(r)?Os[r]=!0:(sc[r]=!0,!1)}function Ci(r,i,o){if(ac(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function br(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function Gt(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}var Ns,oc;function Qr(r){if(Ns===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Ns=i&&i[1]||"",oc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ns+r+oc}var Ra=!1;function Ca(r,i){if(!r||Ra)return"";Ra=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(j){var H=j}Reflect.construct(r,[],Z)}else{try{Z.call()}catch(j){H=j}r.call(Z.prototype)}}else{try{throw Error()}catch(j){H=j}(Z=r())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(j){if(j&&H&&typeof j.stack=="string")return[j.stack,H.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),T=m[0],S=m[1];if(T&&S){var N=T.split(`
`),F=S.split(`
`);for(h=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(u===N.length||h===F.length)for(u=N.length-1,h=F.length-1;1<=u&&0<=h&&N[u]!==F[h];)h--;for(;1<=u&&0<=h;u--,h--)if(N[u]!==F[h]){if(u!==1||h!==1)do if(u--,h--,0>h||N[u]!==F[h]){var Q=`
`+N[u].replace(" at new "," at ");return r.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",r.displayName)),Q}while(1<=u&&0<=h);break}}}finally{Ra=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Qr(o):""}function nl(r){switch(r.tag){case 26:case 27:case 5:return Qr(r.type);case 16:return Qr("Lazy");case 13:return Qr("Suspense");case 19:return Qr("SuspenseList");case 0:case 15:return Ca(r.type,!1);case 11:return Ca(r.type.render,!1);case 1:return Ca(r.type,!0);case 31:return Qr("Activity");default:return""}}function Da(r){try{var i="";do i+=nl(r),r=r.return;while(r);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function fn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function rl(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function od(r){var i=rl(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),u=""+r[i];if(!r.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,m=o.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return h.call(this)},set:function(T){u=""+T,m.call(this,T)}}),Object.defineProperty(r,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Oa(r){r._valueTracker||(r._valueTracker=od(r))}function il(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=rl(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function xs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ld=/[\n"\\]/g;function At(r){return r.replace(ld,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function wn(r,i,o,u,h,m,T,S){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),i!=null?T==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+fn(i)):r.value!==""+fn(i)&&(r.value=""+fn(i)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),i!=null?Di(r,T,fn(i)):o!=null?Di(r,T,fn(o)):u!=null&&r.removeAttribute("value"),h==null&&m!=null&&(r.defaultChecked=!!m),h!=null&&(r.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.name=""+fn(S):r.removeAttribute("name")}function Ms(r,i,o,u,h,m,T,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;o=o!=null?""+fn(o):"",i=i!=null?""+fn(i):o,S||i===r.value||(r.value=i),r.defaultValue=i}u=u??h,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=S?r.checked:!!u,r.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T)}function Di(r,i,o){i==="number"&&xs(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Wr(r,i,o,u){if(r=r.options,i){i={};for(var h=0;h<o.length;h++)i["$"+o[h]]=!0;for(o=0;o<r.length;o++)h=i.hasOwnProperty("$"+r[o].value),r[o].selected!==h&&(r[o].selected=h),h&&u&&(r[o].defaultSelected=!0)}else{for(o=""+fn(o),i=null,h=0;h<r.length;h++){if(r[h].value===o){r[h].selected=!0,u&&(r[h].defaultSelected=!0);return}i!==null||r[h].disabled||(i=r[h])}i!==null&&(i.selected=!0)}}function Je(r,i,o){if(i!=null&&(i=""+fn(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+fn(o):""}function Ps(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(s(92));if(He(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=fn(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function qn(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var Vs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lc(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||Vs.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function sl(r,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var h in i)u=i[h],i.hasOwnProperty(h)&&o[h]!==u&&lc(r,h,u)}else for(var m in i)i.hasOwnProperty(m)&&lc(r,m,i[m])}function al(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ud=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(r){return cd.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Xr=null;function Fn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Zr=null,Jr=null;function ol(r){var i=vr(r);if(i&&(r=i.stateNode)){var o=r[St]||null;e:switch(r=i.stateNode,i.type){case"input":if(wn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+At(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var h=u[St]||null;if(!h)throw Error(s(90));wn(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&il(u)}break e;case"textarea":Je(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Wr(r,!!o.multiple,i,!1)}}}var Tr=!1;function uc(r,i,o){if(Tr)return r(i,o);Tr=!0;try{var u=r(i);return u}finally{if(Tr=!1,(Zr!==null||Jr!==null)&&(nf(),Zr&&(i=Zr,r=Jr,Jr=Zr=null,ol(i),r)))for(i=0;i<r.length;i++)ol(r[i])}}function Ls(r,i){var o=r.stateNode;if(o===null)return null;var u=o[St]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hn=!1;if(or)try{var ks={};Object.defineProperty(ks,"passive",{get:function(){Hn=!0}}),window.addEventListener("test",ks,ks),window.removeEventListener("test",ks,ks)}catch{Hn=!1}var Sr=null,Oi=null,ei=null;function ll(){if(ei)return ei;var r,i=Oi,o=i.length,u,h="value"in Sr?Sr.value:Sr.textContent,m=h.length;for(r=0;r<o&&i[r]===h[r];r++);var T=o-r;for(u=1;u<=T&&i[o-u]===h[m-u];u++);return ei=h.slice(r,1<u?1-u:void 0)}function Ar(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function wr(){return!0}function ul(){return!1}function kt(r){function i(o,u,h,m,T){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=m,this.target=T,this.currentTarget=null;for(var S in r)r.hasOwnProperty(S)&&(o=r[S],this[S]=o?o(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?wr:ul,this.isPropagationStopped=ul,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=wr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=wr)},persist:function(){},isPersistent:wr}),i}var $e={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xa=kt($e),Us=_({},$e,{view:0,detail:0}),cc=kt(Us),Ma,Pa,Ir,Bs=_({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fs,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ir&&(Ir&&r.type==="mousemove"?(Ma=r.screenX-Ir.screenX,Pa=r.screenY-Ir.screenY):Pa=Ma=0,Ir=r),Ma)},movementY:function(r){return"movementY"in r?r.movementY:Pa}}),jn=kt(Bs),fc=_({},Bs,{dataTransfer:0}),fd=kt(fc),zs=_({},Us,{relatedTarget:0}),Va=kt(zs),cl=_({},$e,{animationName:0,elapsedTime:0,pseudoElement:0}),La=kt(cl),hc=_({},$e,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),ka=kt(hc),hd=_({},$e,{data:0}),fl=kt(hd),qs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hl(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=pc[r])?!!i[r]:!1}function Fs(){return hl}var mc=_({},Us,{key:function(r){if(r.key){var i=qs[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Ar(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?dc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fs,charCode:function(r){return r.type==="keypress"?Ar(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ar(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ua=kt(mc),gc=_({},Bs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dl=kt(gc),ti=_({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fs}),yc=kt(ti),_c=_({},$e,{propertyName:0,elapsedTime:0,pseudoElement:0}),vc=kt(_c),Ec=_({},Bs,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ba=kt(Ec),hn=_({},$e,{newState:0,oldState:0}),bc=kt(hn),Tc=[9,13,27,32],Rr=or&&"CompositionEvent"in window,f=null;or&&"documentMode"in document&&(f=document.documentMode);var y=or&&"TextEvent"in window&&!f,b=or&&(!Rr||f&&8<f&&11>=f),w=" ",z=!1;function G(r,i){switch(r){case"keyup":return Tc.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oe(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ue=!1;function xt(r,i){switch(r){case"compositionend":return oe(i);case"keypress":return i.which!==32?null:(z=!0,w);case"textInput":return r=i.data,r===w&&z?null:r;default:return null}}function Be(r,i){if(Ue)return r==="compositionend"||!Rr&&G(r,i)?(r=ll(),ei=Oi=Sr=null,Ue=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return b&&i.locale!=="ko"?null:i.data;default:return null}}var Ut={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mt(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!Ut[r.type]:i==="textarea"}function ni(r,i,o,u){Zr?Jr?Jr.push(u):Jr=[u]:Zr=u,i=uf(i,"onChange"),0<i.length&&(o=new xa("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var $t=null,Cr=null;function pl(r){yE(r,0)}function Sc(r){var i=Er(r);if(il(i))return r}function Uy(r,i){if(r==="change")return i}var By=!1;if(or){var dd;if(or){var pd="oninput"in document;if(!pd){var zy=document.createElement("div");zy.setAttribute("oninput","return;"),pd=typeof zy.oninput=="function"}dd=pd}else dd=!1;By=dd&&(!document.documentMode||9<document.documentMode)}function qy(){$t&&($t.detachEvent("onpropertychange",Fy),Cr=$t=null)}function Fy(r){if(r.propertyName==="value"&&Sc(Cr)){var i=[];ni(i,Cr,r,Fn(r)),uc(pl,i)}}function BI(r,i,o){r==="focusin"?(qy(),$t=i,Cr=o,$t.attachEvent("onpropertychange",Fy)):r==="focusout"&&qy()}function zI(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Sc(Cr)}function qI(r,i){if(r==="click")return Sc(i)}function FI(r,i){if(r==="input"||r==="change")return Sc(i)}function HI(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var In=typeof Object.is=="function"?Object.is:HI;function ml(r,i){if(In(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!Tt.call(i,h)||!In(r[h],i[h]))return!1}return!0}function Hy(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function jy(r,i){var o=Hy(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Hy(o)}}function Gy(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Gy(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function $y(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=xs(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=xs(r.document)}return i}function md(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var jI=or&&"documentMode"in document&&11>=document.documentMode,za=null,gd=null,gl=null,yd=!1;function Yy(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;yd||za==null||za!==xs(u)||(u=za,"selectionStart"in u&&md(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),gl&&ml(gl,u)||(gl=u,u=uf(gd,"onSelect"),0<u.length&&(i=new xa("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=za)))}function Hs(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var qa={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionrun:Hs("Transition","TransitionRun"),transitionstart:Hs("Transition","TransitionStart"),transitioncancel:Hs("Transition","TransitionCancel"),transitionend:Hs("Transition","TransitionEnd")},_d={},Ky={};or&&(Ky=document.createElement("div").style,"AnimationEvent"in window||(delete qa.animationend.animation,delete qa.animationiteration.animation,delete qa.animationstart.animation),"TransitionEvent"in window||delete qa.transitionend.transition);function js(r){if(_d[r])return _d[r];if(!qa[r])return r;var i=qa[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in Ky)return _d[r]=i[o];return r}var Qy=js("animationend"),Wy=js("animationiteration"),Xy=js("animationstart"),GI=js("transitionrun"),$I=js("transitionstart"),YI=js("transitioncancel"),Zy=js("transitionend"),Jy=new Map,vd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vd.push("scrollEnd");function lr(r,i){Jy.set(r,i),ar(i,[r])}var e_=new WeakMap;function Gn(r,i){if(typeof r=="object"&&r!==null){var o=e_.get(r);return o!==void 0?o:(i={value:r,source:i,stack:Da(i)},e_.set(r,i),i)}return{value:r,source:i,stack:Da(i)}}var $n=[],Fa=0,Ed=0;function Ac(){for(var r=Fa,i=Ed=Fa=0;i<r;){var o=$n[i];$n[i++]=null;var u=$n[i];$n[i++]=null;var h=$n[i];$n[i++]=null;var m=$n[i];if($n[i++]=null,u!==null&&h!==null){var T=u.pending;T===null?h.next=h:(h.next=T.next,T.next=h),u.pending=h}m!==0&&t_(o,h,m)}}function wc(r,i,o,u){$n[Fa++]=r,$n[Fa++]=i,$n[Fa++]=o,$n[Fa++]=u,Ed|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function bd(r,i,o,u){return wc(r,i,o,u),Ic(r)}function Ha(r,i){return wc(r,null,null,i),Ic(r)}function t_(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var h=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(h=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,h&&i!==null&&(h=31-tn(o),r=m.hiddenUpdates,u=r[h],u===null?r[h]=[i]:u.push(i),i.lane=o|536870912),m):null}function Ic(r){if(50<ql)throw ql=0,Rp=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var ja={};function KI(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(r,i,o,u){return new KI(r,i,o,u)}function Td(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ri(r,i){var o=r.alternate;return o===null?(o=Rn(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function n_(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function Rc(r,i,o,u,h,m){var T=0;if(u=r,typeof r=="function")Td(r)&&(T=1);else if(typeof r=="string")T=WR(r,o,_e.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=Rn(31,o,i,h),r.elementType=R,r.lanes=m,r;case O:return Gs(o.children,h,m,i);case L:T=8,h|=24;break;case x:return r=Rn(12,o,i,h|2),r.elementType=x,r.lanes=m,r;case re:return r=Rn(13,o,i,h),r.elementType=re,r.lanes=m,r;case ie:return r=Rn(19,o,i,h),r.elementType=ie,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case $:case te:T=10;break e;case Y:T=9;break e;case ae:T=11;break e;case C:T=14;break e;case I:T=16,u=null;break e}T=29,o=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=Rn(T,o,i,h),i.elementType=r,i.type=u,i.lanes=m,i}function Gs(r,i,o,u){return r=Rn(7,r,u,i),r.lanes=o,r}function Sd(r,i,o){return r=Rn(6,r,null,i),r.lanes=o,r}function Ad(r,i,o){return i=Rn(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Ga=[],$a=0,Cc=null,Dc=0,Yn=[],Kn=0,$s=null,ii=1,si="";function Ys(r,i){Ga[$a++]=Dc,Ga[$a++]=Cc,Cc=r,Dc=i}function r_(r,i,o){Yn[Kn++]=ii,Yn[Kn++]=si,Yn[Kn++]=$s,$s=r;var u=ii;r=si;var h=32-tn(u)-1;u&=~(1<<h),o+=1;var m=32-tn(i)+h;if(30<m){var T=h-h%5;m=(u&(1<<T)-1).toString(32),u>>=T,h-=T,ii=1<<32-tn(i)+h|o<<h|u,si=m+r}else ii=1<<m|o<<h|u,si=r}function wd(r){r.return!==null&&(Ys(r,1),r_(r,1,0))}function Id(r){for(;r===Cc;)Cc=Ga[--$a],Ga[$a]=null,Dc=Ga[--$a],Ga[$a]=null;for(;r===$s;)$s=Yn[--Kn],Yn[Kn]=null,si=Yn[--Kn],Yn[Kn]=null,ii=Yn[--Kn],Yn[Kn]=null}var dn=null,dt=null,Ge=!1,Ks=null,Dr=!1,Rd=Error(s(519));function Qs(r){var i=Error(s(418,""));throw vl(Gn(i,r)),Rd}function i_(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[Nt]=r,i[St]=u,o){case"dialog":Me("cancel",i),Me("close",i);break;case"iframe":case"object":case"embed":Me("load",i);break;case"video":case"audio":for(o=0;o<Hl.length;o++)Me(Hl[o],i);break;case"source":Me("error",i);break;case"img":case"image":case"link":Me("error",i),Me("load",i);break;case"details":Me("toggle",i);break;case"input":Me("invalid",i),Ms(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Oa(i);break;case"select":Me("invalid",i);break;case"textarea":Me("invalid",i),Ps(i,u.value,u.defaultValue,u.children),Oa(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||bE(i.textContent,o)?(u.popover!=null&&(Me("beforetoggle",i),Me("toggle",i)),u.onScroll!=null&&Me("scroll",i),u.onScrollEnd!=null&&Me("scrollend",i),u.onClick!=null&&(i.onclick=cf),i=!0):i=!1,i||Qs(r)}function s_(r){for(dn=r.return;dn;)switch(dn.tag){case 5:case 13:Dr=!1;return;case 27:case 3:Dr=!0;return;default:dn=dn.return}}function yl(r){if(r!==dn)return!1;if(!Ge)return s_(r),Ge=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Hp(r.type,r.memoizedProps)),o=!o),o&&dt&&Qs(r),s_(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(i===0){dt=cr(r.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;r=r.nextSibling}dt=null}}else i===27?(i=dt,$i(r.type)?(r=Yp,Yp=null,dt=r):dt=i):dt=dn?cr(r.stateNode.nextSibling):null;return!0}function _l(){dt=dn=null,Ge=!1}function a_(){var r=Ks;return r!==null&&(_n===null?_n=r:_n.push.apply(_n,r),Ks=null),r}function vl(r){Ks===null?Ks=[r]:Ks.push(r)}var Cd=ee(null),Ws=null,ai=null;function Ni(r,i,o){se(Cd,i._currentValue),i._currentValue=o}function oi(r){r._currentValue=Cd.current,ce(Cd)}function Dd(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function Od(r,i,o,u){var h=r.child;for(h!==null&&(h.return=r);h!==null;){var m=h.dependencies;if(m!==null){var T=h.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=h;for(var N=0;N<i.length;N++)if(S.context===i[N]){m.lanes|=o,S=m.alternate,S!==null&&(S.lanes|=o),Dd(m.return,o,r),u||(T=null);break e}m=S.next}}else if(h.tag===18){if(T=h.return,T===null)throw Error(s(341));T.lanes|=o,m=T.alternate,m!==null&&(m.lanes|=o),Dd(T,o,r),T=null}else T=h.child;if(T!==null)T.return=h;else for(T=h;T!==null;){if(T===r){T=null;break}if(h=T.sibling,h!==null){h.return=T.return,T=h;break}T=T.return}h=T}}function El(r,i,o,u){r=null;for(var h=i,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var T=h.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var S=h.type;In(h.pendingProps.value,T.value)||(r!==null?r.push(S):r=[S])}}else if(h===gt.current){if(T=h.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(r!==null?r.push(Ql):r=[Ql])}h=h.return}r!==null&&Od(i,r,o,u),i.flags|=262144}function Oc(r){for(r=r.firstContext;r!==null;){if(!In(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Xs(r){Ws=r,ai=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function nn(r){return o_(Ws,r)}function Nc(r,i){return Ws===null&&Xs(r),o_(r,i)}function o_(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ai===null){if(r===null)throw Error(s(308));ai=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else ai=ai.next=i;return o}var QI=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},WI=n.unstable_scheduleCallback,XI=n.unstable_NormalPriority,Pt={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nd(){return{controller:new QI,data:new Map,refCount:0}}function bl(r){r.refCount--,r.refCount===0&&WI(XI,function(){r.controller.abort()})}var Tl=null,xd=0,Ya=0,Ka=null;function ZI(r,i){if(Tl===null){var o=Tl=[];xd=0,Ya=Pp(),Ka={status:"pending",value:void 0,then:function(u){o.push(u)}}}return xd++,i.then(l_,l_),i}function l_(){if(--xd===0&&Tl!==null){Ka!==null&&(Ka.status="fulfilled");var r=Tl;Tl=null,Ya=0,Ka=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function JI(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var h=0;h<o.length;h++)(0,o[h])(i)},function(h){for(u.status="rejected",u.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),u}var u_=K.S;K.S=function(r,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&ZI(r,i),u_!==null&&u_(r,i)};var Zs=ee(null);function Md(){var r=Zs.current;return r!==null?r:it.pooledCache}function xc(r,i){i===null?se(Zs,Zs.current):se(Zs,i.pool)}function c_(){var r=Md();return r===null?null:{parent:Pt._currentValue,pool:r}}var Sl=Error(s(460)),f_=Error(s(474)),Mc=Error(s(542)),Pd={then:function(){}};function h_(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Pc(){}function d_(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(Pc,Pc),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,m_(r),r;default:if(typeof i.status=="string")i.then(Pc,Pc);else{if(r=it,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=u}},function(u){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,m_(r),r}throw Al=i,Sl}}var Al=null;function p_(){if(Al===null)throw Error(s(459));var r=Al;return Al=null,r}function m_(r){if(r===Sl||r===Mc)throw Error(s(483))}var xi=!1;function Vd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ld(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Mi(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Pi(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(We&2)!==0){var h=u.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),u.pending=i,i=Ic(r),t_(r,null,o),i}return wc(r,u,i,o),Ic(r)}function wl(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,Jo(r,o)}}function kd(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?h=m=T:m=m.next=T,o=o.next}while(o!==null);m===null?h=m=i:m=m.next=i}else h=m=i;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var Ud=!1;function Il(){if(Ud){var r=Ka;if(r!==null)throw r}}function Rl(r,i,o,u){Ud=!1;var h=r.updateQueue;xi=!1;var m=h.firstBaseUpdate,T=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var N=S,F=N.next;N.next=null,T===null?m=F:T.next=F,T=N;var Q=r.alternate;Q!==null&&(Q=Q.updateQueue,S=Q.lastBaseUpdate,S!==T&&(S===null?Q.firstBaseUpdate=F:S.next=F,Q.lastBaseUpdate=N))}if(m!==null){var Z=h.baseState;T=0,Q=F=N=null,S=m;do{var H=S.lane&-536870913,j=H!==S.lane;if(j?(ze&H)===H:(u&H)===H){H!==0&&H===Ya&&(Ud=!0),Q!==null&&(Q=Q.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var we=r,Ee=S;H=i;var nt=o;switch(Ee.tag){case 1:if(we=Ee.payload,typeof we=="function"){Z=we.call(nt,Z,H);break e}Z=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ee.payload,H=typeof we=="function"?we.call(nt,Z,H):we,H==null)break e;Z=_({},Z,H);break e;case 2:xi=!0}}H=S.callback,H!==null&&(r.flags|=64,j&&(r.flags|=8192),j=h.callbacks,j===null?h.callbacks=[H]:j.push(H))}else j={lane:H,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Q===null?(F=Q=j,N=Z):Q=Q.next=j,T|=H;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;j=S,S=j.next,j.next=null,h.lastBaseUpdate=j,h.shared.pending=null}}while(!0);Q===null&&(N=Z),h.baseState=N,h.firstBaseUpdate=F,h.lastBaseUpdate=Q,m===null&&(h.shared.lanes=0),Fi|=T,r.lanes=T,r.memoizedState=Z}}function g_(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function y_(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)g_(o[r],i)}var Qa=ee(null),Vc=ee(0);function __(r,i){r=pi,se(Vc,r),se(Qa,i),pi=r|i.baseLanes}function Bd(){se(Vc,pi),se(Qa,Qa.current)}function zd(){pi=Vc.current,ce(Qa),ce(Vc)}var Vi=0,Oe=null,et=null,wt=null,Lc=!1,Wa=!1,Js=!1,kc=0,Cl=0,Xa=null,eR=0;function _t(){throw Error(s(321))}function qd(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!In(r[o],i[o]))return!1;return!0}function Fd(r,i,o,u,h,m){return Vi=m,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=r===null||r.memoizedState===null?tv:nv,Js=!1,m=o(u,h),Js=!1,Wa&&(m=E_(i,o,u,h)),v_(r),m}function v_(r){K.H=Hc;var i=et!==null&&et.next!==null;if(Vi=0,wt=et=Oe=null,Lc=!1,Cl=0,Xa=null,i)throw Error(s(300));r===null||Bt||(r=r.dependencies,r!==null&&Oc(r)&&(Bt=!0))}function E_(r,i,o,u){Oe=r;var h=0;do{if(Wa&&(Xa=null),Cl=0,Wa=!1,25<=h)throw Error(s(301));if(h+=1,wt=et=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}K.H=oR,m=i(o,u)}while(Wa);return m}function tR(){var r=K.H,i=r.useState()[0];return i=typeof i.then=="function"?Dl(i):i,r=r.useState()[0],(et!==null?et.memoizedState:null)!==r&&(Oe.flags|=1024),i}function Hd(){var r=kc!==0;return kc=0,r}function jd(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Gd(r){if(Lc){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Lc=!1}Vi=0,wt=et=Oe=null,Wa=!1,Cl=kc=0,Xa=null}function gn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Oe.memoizedState=wt=r:wt=wt.next=r,wt}function It(){if(et===null){var r=Oe.alternate;r=r!==null?r.memoizedState:null}else r=et.next;var i=wt===null?Oe.memoizedState:wt.next;if(i!==null)wt=i,et=r;else{if(r===null)throw Oe.alternate===null?Error(s(467)):Error(s(310));et=r,r={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},wt===null?Oe.memoizedState=wt=r:wt=wt.next=r}return wt}function $d(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(r){var i=Cl;return Cl+=1,Xa===null&&(Xa=[]),r=d_(Xa,r,i),i=Oe,(wt===null?i.memoizedState:wt.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?tv:nv),r}function Uc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Dl(r);if(r.$$typeof===te)return nn(r)}throw Error(s(438,String(r)))}function Yd(r){var i=null,o=Oe.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Oe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=$d(),Oe.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=M;return i.index++,o}function li(r,i){return typeof i=="function"?i(r):i}function Bc(r){var i=It();return Kd(i,et,r)}function Kd(r,i,o){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var h=r.baseQueue,m=u.pending;if(m!==null){if(h!==null){var T=h.next;h.next=m.next,m.next=T}i.baseQueue=h=m,u.pending=null}if(m=r.baseState,h===null)r.memoizedState=m;else{i=h.next;var S=T=null,N=null,F=i,Q=!1;do{var Z=F.lane&-536870913;if(Z!==F.lane?(ze&Z)===Z:(Vi&Z)===Z){var H=F.revertLane;if(H===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),Z===Ya&&(Q=!0);else if((Vi&H)===H){F=F.next,H===Ya&&(Q=!0);continue}else Z={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},N===null?(S=N=Z,T=m):N=N.next=Z,Oe.lanes|=H,Fi|=H;Z=F.action,Js&&o(m,Z),m=F.hasEagerState?F.eagerState:o(m,Z)}else H={lane:Z,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},N===null?(S=N=H,T=m):N=N.next=H,Oe.lanes|=Z,Fi|=Z;F=F.next}while(F!==null&&F!==i);if(N===null?T=m:N.next=S,!In(m,r.memoizedState)&&(Bt=!0,Q&&(o=Ka,o!==null)))throw o;r.memoizedState=m,r.baseState=T,r.baseQueue=N,u.lastRenderedState=m}return h===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Qd(r){var i=It(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var u=o.dispatch,h=o.pending,m=i.memoizedState;if(h!==null){o.pending=null;var T=h=h.next;do m=r(m,T.action),T=T.next;while(T!==h);In(m,i.memoizedState)||(Bt=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,u]}function b_(r,i,o){var u=Oe,h=It(),m=Ge;if(m){if(o===void 0)throw Error(s(407));o=o()}else o=i();var T=!In((et||h).memoizedState,o);T&&(h.memoizedState=o,Bt=!0),h=h.queue;var S=A_.bind(null,u,h,r);if(Ol(2048,8,S,[r]),h.getSnapshot!==i||T||wt!==null&&wt.memoizedState.tag&1){if(u.flags|=2048,Za(9,zc(),S_.bind(null,u,h,o,i),null),it===null)throw Error(s(349));m||(Vi&124)!==0||T_(u,i,o)}return o}function T_(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=Oe.updateQueue,i===null?(i=$d(),Oe.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function S_(r,i,o,u){i.value=o,i.getSnapshot=u,w_(i)&&I_(r)}function A_(r,i,o){return o(function(){w_(i)&&I_(r)})}function w_(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!In(r,o)}catch{return!0}}function I_(r){var i=Ha(r,2);i!==null&&xn(i,r,2)}function Wd(r){var i=gn();if(typeof r=="function"){var o=r;if(r=o(),Js){An(!0);try{o()}finally{An(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:r},i}function R_(r,i,o,u){return r.baseState=o,Kd(r,et,typeof u=="function"?u:li)}function nR(r,i,o,u,h){if(Fc(r))throw Error(s(485));if(r=i.action,r!==null){var m={payload:h,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){m.listeners.push(T)}};K.T!==null?o(!0):m.isTransition=!1,u(m),o=i.pending,o===null?(m.next=i.pending=m,C_(i,m)):(m.next=o.next,i.pending=o.next=m)}}function C_(r,i){var o=i.action,u=i.payload,h=r.state;if(i.isTransition){var m=K.T,T={};K.T=T;try{var S=o(h,u),N=K.S;N!==null&&N(T,S),D_(r,i,S)}catch(F){Xd(r,i,F)}finally{K.T=m}}else try{m=o(h,u),D_(r,i,m)}catch(F){Xd(r,i,F)}}function D_(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){O_(r,i,u)},function(u){return Xd(r,i,u)}):O_(r,i,o)}function O_(r,i,o){i.status="fulfilled",i.value=o,N_(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,C_(r,o)))}function Xd(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,N_(i),i=i.next;while(i!==u)}r.action=null}function N_(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function x_(r,i){return i}function M_(r,i){if(Ge){var o=it.formState;if(o!==null){e:{var u=Oe;if(Ge){if(dt){t:{for(var h=dt,m=Dr;h.nodeType!==8;){if(!m){h=null;break t}if(h=cr(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){dt=cr(h.nextSibling),u=h.data==="F!";break e}}Qs(u)}u=!1}u&&(i=o[0])}}return o=gn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x_,lastRenderedState:i},o.queue=u,o=Z_.bind(null,Oe,u),u.dispatch=o,u=Wd(!1),m=np.bind(null,Oe,!1,u.queue),u=gn(),h={state:i,dispatch:null,action:r,pending:null},u.queue=h,o=nR.bind(null,Oe,h,m,o),h.dispatch=o,u.memoizedState=r,[i,o,!1]}function P_(r){var i=It();return V_(i,et,r)}function V_(r,i,o){if(i=Kd(r,i,x_)[0],r=Bc(li)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Dl(i)}catch(T){throw T===Sl?Mc:T}else u=i;i=It();var h=i.queue,m=h.dispatch;return o!==i.memoizedState&&(Oe.flags|=2048,Za(9,zc(),rR.bind(null,h,o),null)),[u,m,r]}function rR(r,i){r.action=i}function L_(r){var i=It(),o=et;if(o!==null)return V_(i,o,r);It(),i=i.memoizedState,o=It();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function Za(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=Oe.updateQueue,i===null&&(i=$d(),Oe.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function zc(){return{destroy:void 0,resource:void 0}}function k_(){return It().memoizedState}function qc(r,i,o,u){var h=gn();u=u===void 0?null:u,Oe.flags|=r,h.memoizedState=Za(1|i,zc(),o,u)}function Ol(r,i,o,u){var h=It();u=u===void 0?null:u;var m=h.memoizedState.inst;et!==null&&u!==null&&qd(u,et.memoizedState.deps)?h.memoizedState=Za(i,m,o,u):(Oe.flags|=r,h.memoizedState=Za(1|i,m,o,u))}function U_(r,i){qc(8390656,8,r,i)}function B_(r,i){Ol(2048,8,r,i)}function z_(r,i){return Ol(4,2,r,i)}function q_(r,i){return Ol(4,4,r,i)}function F_(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function H_(r,i,o){o=o!=null?o.concat([r]):null,Ol(4,4,F_.bind(null,i,r),o)}function Zd(){}function j_(r,i){var o=It();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&qd(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function G_(r,i){var o=It();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&qd(i,u[1]))return u[0];if(u=r(),Js){An(!0);try{r()}finally{An(!1)}}return o.memoizedState=[u,i],u}function Jd(r,i,o){return o===void 0||(Vi&1073741824)!==0?r.memoizedState=i:(r.memoizedState=o,r=Kv(),Oe.lanes|=r,Fi|=r,o)}function $_(r,i,o,u){return In(o,i)?o:Qa.current!==null?(r=Jd(r,o,u),In(r,i)||(Bt=!0),r):(Vi&42)===0?(Bt=!0,r.memoizedState=o):(r=Kv(),Oe.lanes|=r,Fi|=r,i)}function Y_(r,i,o,u,h){var m=ue.p;ue.p=m!==0&&8>m?m:8;var T=K.T,S={};K.T=S,np(r,!1,i,o);try{var N=h(),F=K.S;if(F!==null&&F(S,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Q=JI(N,u);Nl(r,i,Q,Nn(r))}else Nl(r,i,u,Nn(r))}catch(Z){Nl(r,i,{then:function(){},status:"rejected",reason:Z},Nn())}finally{ue.p=m,K.T=T}}function iR(){}function ep(r,i,o,u){if(r.tag!==5)throw Error(s(476));var h=K_(r).queue;Y_(r,h,i,me,o===null?iR:function(){return Q_(r),o(u)})}function K_(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:me},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Q_(r){var i=K_(r).next.queue;Nl(r,i,{},Nn())}function tp(){return nn(Ql)}function W_(){return It().memoizedState}function X_(){return It().memoizedState}function sR(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Nn();r=Mi(o);var u=Pi(i,r,o);u!==null&&(xn(u,i,o),wl(u,i,o)),i={cache:Nd()},r.payload=i;return}i=i.return}}function aR(r,i,o){var u=Nn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Fc(r)?J_(i,o):(o=bd(r,i,o,u),o!==null&&(xn(o,r,u),ev(o,i,u)))}function Z_(r,i,o){var u=Nn();Nl(r,i,o,u)}function Nl(r,i,o,u){var h={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Fc(r))J_(i,h);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var T=i.lastRenderedState,S=m(T,o);if(h.hasEagerState=!0,h.eagerState=S,In(S,T))return wc(r,i,h,0),it===null&&Ac(),!1}catch{}finally{}if(o=bd(r,i,h,u),o!==null)return xn(o,r,u),ev(o,i,u),!0}return!1}function np(r,i,o,u){if(u={lane:2,revertLane:Pp(),action:u,hasEagerState:!1,eagerState:null,next:null},Fc(r)){if(i)throw Error(s(479))}else i=bd(r,o,u,2),i!==null&&xn(i,r,2)}function Fc(r){var i=r.alternate;return r===Oe||i!==null&&i===Oe}function J_(r,i){Wa=Lc=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function ev(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,Jo(r,o)}}var Hc={readContext:nn,use:Uc,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t},tv={readContext:nn,use:Uc,useCallback:function(r,i){return gn().memoizedState=[r,i===void 0?null:i],r},useContext:nn,useEffect:U_,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,qc(4194308,4,F_.bind(null,i,r),o)},useLayoutEffect:function(r,i){return qc(4194308,4,r,i)},useInsertionEffect:function(r,i){qc(4,2,r,i)},useMemo:function(r,i){var o=gn();i=i===void 0?null:i;var u=r();if(Js){An(!0);try{r()}finally{An(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=gn();if(o!==void 0){var h=o(i);if(Js){An(!0);try{o(i)}finally{An(!1)}}}else h=i;return u.memoizedState=u.baseState=h,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:h},u.queue=r,r=r.dispatch=aR.bind(null,Oe,r),[u.memoizedState,r]},useRef:function(r){var i=gn();return r={current:r},i.memoizedState=r},useState:function(r){r=Wd(r);var i=r.queue,o=Z_.bind(null,Oe,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:Zd,useDeferredValue:function(r,i){var o=gn();return Jd(o,r,i)},useTransition:function(){var r=Wd(!1);return r=Y_.bind(null,Oe,r.queue,!0,!1),gn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=Oe,h=gn();if(Ge){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),it===null)throw Error(s(349));(ze&124)!==0||T_(u,i,o)}h.memoizedState=o;var m={value:o,getSnapshot:i};return h.queue=m,U_(A_.bind(null,u,m,r),[r]),u.flags|=2048,Za(9,zc(),S_.bind(null,u,m,o,i),null),o},useId:function(){var r=gn(),i=it.identifierPrefix;if(Ge){var o=si,u=ii;o=(u&~(1<<32-tn(u)-1)).toString(32)+o,i="«"+i+"R"+o,o=kc++,0<o&&(i+="H"+o.toString(32)),i+="»"}else o=eR++,i="«"+i+"r"+o.toString(32)+"»";return r.memoizedState=i},useHostTransitionStatus:tp,useFormState:M_,useActionState:M_,useOptimistic:function(r){var i=gn();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=np.bind(null,Oe,!0,o),o.dispatch=i,[r,i]},useMemoCache:Yd,useCacheRefresh:function(){return gn().memoizedState=sR.bind(null,Oe)}},nv={readContext:nn,use:Uc,useCallback:j_,useContext:nn,useEffect:B_,useImperativeHandle:H_,useInsertionEffect:z_,useLayoutEffect:q_,useMemo:G_,useReducer:Bc,useRef:k_,useState:function(){return Bc(li)},useDebugValue:Zd,useDeferredValue:function(r,i){var o=It();return $_(o,et.memoizedState,r,i)},useTransition:function(){var r=Bc(li)[0],i=It().memoizedState;return[typeof r=="boolean"?r:Dl(r),i]},useSyncExternalStore:b_,useId:W_,useHostTransitionStatus:tp,useFormState:P_,useActionState:P_,useOptimistic:function(r,i){var o=It();return R_(o,et,r,i)},useMemoCache:Yd,useCacheRefresh:X_},oR={readContext:nn,use:Uc,useCallback:j_,useContext:nn,useEffect:B_,useImperativeHandle:H_,useInsertionEffect:z_,useLayoutEffect:q_,useMemo:G_,useReducer:Qd,useRef:k_,useState:function(){return Qd(li)},useDebugValue:Zd,useDeferredValue:function(r,i){var o=It();return et===null?Jd(o,r,i):$_(o,et.memoizedState,r,i)},useTransition:function(){var r=Qd(li)[0],i=It().memoizedState;return[typeof r=="boolean"?r:Dl(r),i]},useSyncExternalStore:b_,useId:W_,useHostTransitionStatus:tp,useFormState:L_,useActionState:L_,useOptimistic:function(r,i){var o=It();return et!==null?R_(o,et,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Yd,useCacheRefresh:X_},Ja=null,xl=0;function jc(r){var i=xl;return xl+=1,Ja===null&&(Ja=[]),d_(Ja,r,i)}function Ml(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Gc(r,i){throw i.$$typeof===E?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function rv(r){var i=r._init;return i(r._payload)}function iv(r){function i(B,k){if(r){var q=B.deletions;q===null?(B.deletions=[k],B.flags|=16):q.push(k)}}function o(B,k){if(!r)return null;for(;k!==null;)i(B,k),k=k.sibling;return null}function u(B){for(var k=new Map;B!==null;)B.key!==null?k.set(B.key,B):k.set(B.index,B),B=B.sibling;return k}function h(B,k){return B=ri(B,k),B.index=0,B.sibling=null,B}function m(B,k,q){return B.index=q,r?(q=B.alternate,q!==null?(q=q.index,q<k?(B.flags|=67108866,k):q):(B.flags|=67108866,k)):(B.flags|=1048576,k)}function T(B){return r&&B.alternate===null&&(B.flags|=67108866),B}function S(B,k,q,W){return k===null||k.tag!==6?(k=Sd(q,B.mode,W),k.return=B,k):(k=h(k,q),k.return=B,k)}function N(B,k,q,W){var pe=q.type;return pe===O?Q(B,k,q.props.children,W,q.key):k!==null&&(k.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===I&&rv(pe)===k.type)?(k=h(k,q.props),Ml(k,q),k.return=B,k):(k=Rc(q.type,q.key,q.props,null,B.mode,W),Ml(k,q),k.return=B,k)}function F(B,k,q,W){return k===null||k.tag!==4||k.stateNode.containerInfo!==q.containerInfo||k.stateNode.implementation!==q.implementation?(k=Ad(q,B.mode,W),k.return=B,k):(k=h(k,q.children||[]),k.return=B,k)}function Q(B,k,q,W,pe){return k===null||k.tag!==7?(k=Gs(q,B.mode,W,pe),k.return=B,k):(k=h(k,q),k.return=B,k)}function Z(B,k,q){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Sd(""+k,B.mode,q),k.return=B,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case v:return q=Rc(k.type,k.key,k.props,null,B.mode,q),Ml(q,k),q.return=B,q;case A:return k=Ad(k,B.mode,q),k.return=B,k;case I:var W=k._init;return k=W(k._payload),Z(B,k,q)}if(He(k)||U(k))return k=Gs(k,B.mode,q,null),k.return=B,k;if(typeof k.then=="function")return Z(B,jc(k),q);if(k.$$typeof===te)return Z(B,Nc(B,k),q);Gc(B,k)}return null}function H(B,k,q,W){var pe=k!==null?k.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return pe!==null?null:S(B,k,""+q,W);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case v:return q.key===pe?N(B,k,q,W):null;case A:return q.key===pe?F(B,k,q,W):null;case I:return pe=q._init,q=pe(q._payload),H(B,k,q,W)}if(He(q)||U(q))return pe!==null?null:Q(B,k,q,W,null);if(typeof q.then=="function")return H(B,k,jc(q),W);if(q.$$typeof===te)return H(B,k,Nc(B,q),W);Gc(B,q)}return null}function j(B,k,q,W,pe){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return B=B.get(q)||null,S(k,B,""+W,pe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case v:return B=B.get(W.key===null?q:W.key)||null,N(k,B,W,pe);case A:return B=B.get(W.key===null?q:W.key)||null,F(k,B,W,pe);case I:var Ne=W._init;return W=Ne(W._payload),j(B,k,q,W,pe)}if(He(W)||U(W))return B=B.get(q)||null,Q(k,B,W,pe,null);if(typeof W.then=="function")return j(B,k,q,jc(W),pe);if(W.$$typeof===te)return j(B,k,q,Nc(k,W),pe);Gc(k,W)}return null}function we(B,k,q,W){for(var pe=null,Ne=null,ge=k,Te=k=0,qt=null;ge!==null&&Te<q.length;Te++){ge.index>Te?(qt=ge,ge=null):qt=ge.sibling;var je=H(B,ge,q[Te],W);if(je===null){ge===null&&(ge=qt);break}r&&ge&&je.alternate===null&&i(B,ge),k=m(je,k,Te),Ne===null?pe=je:Ne.sibling=je,Ne=je,ge=qt}if(Te===q.length)return o(B,ge),Ge&&Ys(B,Te),pe;if(ge===null){for(;Te<q.length;Te++)ge=Z(B,q[Te],W),ge!==null&&(k=m(ge,k,Te),Ne===null?pe=ge:Ne.sibling=ge,Ne=ge);return Ge&&Ys(B,Te),pe}for(ge=u(ge);Te<q.length;Te++)qt=j(ge,B,Te,q[Te],W),qt!==null&&(r&&qt.alternate!==null&&ge.delete(qt.key===null?Te:qt.key),k=m(qt,k,Te),Ne===null?pe=qt:Ne.sibling=qt,Ne=qt);return r&&ge.forEach(function(Xi){return i(B,Xi)}),Ge&&Ys(B,Te),pe}function Ee(B,k,q,W){if(q==null)throw Error(s(151));for(var pe=null,Ne=null,ge=k,Te=k=0,qt=null,je=q.next();ge!==null&&!je.done;Te++,je=q.next()){ge.index>Te?(qt=ge,ge=null):qt=ge.sibling;var Xi=H(B,ge,je.value,W);if(Xi===null){ge===null&&(ge=qt);break}r&&ge&&Xi.alternate===null&&i(B,ge),k=m(Xi,k,Te),Ne===null?pe=Xi:Ne.sibling=Xi,Ne=Xi,ge=qt}if(je.done)return o(B,ge),Ge&&Ys(B,Te),pe;if(ge===null){for(;!je.done;Te++,je=q.next())je=Z(B,je.value,W),je!==null&&(k=m(je,k,Te),Ne===null?pe=je:Ne.sibling=je,Ne=je);return Ge&&Ys(B,Te),pe}for(ge=u(ge);!je.done;Te++,je=q.next())je=j(ge,B,Te,je.value,W),je!==null&&(r&&je.alternate!==null&&ge.delete(je.key===null?Te:je.key),k=m(je,k,Te),Ne===null?pe=je:Ne.sibling=je,Ne=je);return r&&ge.forEach(function(l1){return i(B,l1)}),Ge&&Ys(B,Te),pe}function nt(B,k,q,W){if(typeof q=="object"&&q!==null&&q.type===O&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case v:e:{for(var pe=q.key;k!==null;){if(k.key===pe){if(pe=q.type,pe===O){if(k.tag===7){o(B,k.sibling),W=h(k,q.props.children),W.return=B,B=W;break e}}else if(k.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===I&&rv(pe)===k.type){o(B,k.sibling),W=h(k,q.props),Ml(W,q),W.return=B,B=W;break e}o(B,k);break}else i(B,k);k=k.sibling}q.type===O?(W=Gs(q.props.children,B.mode,W,q.key),W.return=B,B=W):(W=Rc(q.type,q.key,q.props,null,B.mode,W),Ml(W,q),W.return=B,B=W)}return T(B);case A:e:{for(pe=q.key;k!==null;){if(k.key===pe)if(k.tag===4&&k.stateNode.containerInfo===q.containerInfo&&k.stateNode.implementation===q.implementation){o(B,k.sibling),W=h(k,q.children||[]),W.return=B,B=W;break e}else{o(B,k);break}else i(B,k);k=k.sibling}W=Ad(q,B.mode,W),W.return=B,B=W}return T(B);case I:return pe=q._init,q=pe(q._payload),nt(B,k,q,W)}if(He(q))return we(B,k,q,W);if(U(q)){if(pe=U(q),typeof pe!="function")throw Error(s(150));return q=pe.call(q),Ee(B,k,q,W)}if(typeof q.then=="function")return nt(B,k,jc(q),W);if(q.$$typeof===te)return nt(B,k,Nc(B,q),W);Gc(B,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,k!==null&&k.tag===6?(o(B,k.sibling),W=h(k,q),W.return=B,B=W):(o(B,k),W=Sd(q,B.mode,W),W.return=B,B=W),T(B)):o(B,k)}return function(B,k,q,W){try{xl=0;var pe=nt(B,k,q,W);return Ja=null,pe}catch(ge){if(ge===Sl||ge===Mc)throw ge;var Ne=Rn(29,ge,null,B.mode);return Ne.lanes=W,Ne.return=B,Ne}finally{}}}var eo=iv(!0),sv=iv(!1),Qn=ee(null),Or=null;function Li(r){var i=r.alternate;se(Vt,Vt.current&1),se(Qn,r),Or===null&&(i===null||Qa.current!==null||i.memoizedState!==null)&&(Or=r)}function av(r){if(r.tag===22){if(se(Vt,Vt.current),se(Qn,r),Or===null){var i=r.alternate;i!==null&&i.memoizedState!==null&&(Or=r)}}else ki()}function ki(){se(Vt,Vt.current),se(Qn,Qn.current)}function ui(r){ce(Qn),Or===r&&(Or=null),ce(Vt)}var Vt=ee(0);function $c(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||$p(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function rp(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:_({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var ip={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=Nn(),h=Mi(u);h.payload=i,o!=null&&(h.callback=o),i=Pi(r,h,u),i!==null&&(xn(i,r,u),wl(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=Nn(),h=Mi(u);h.tag=1,h.payload=i,o!=null&&(h.callback=o),i=Pi(r,h,u),i!==null&&(xn(i,r,u),wl(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Nn(),u=Mi(o);u.tag=2,i!=null&&(u.callback=i),i=Pi(r,u,o),i!==null&&(xn(i,r,o),wl(i,r,o))}};function ov(r,i,o,u,h,m,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,T):i.prototype&&i.prototype.isPureReactComponent?!ml(o,u)||!ml(h,m):!0}function lv(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&ip.enqueueReplaceState(i,i.state,null)}function ea(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=_({},o));for(var h in r)o[h]===void 0&&(o[h]=r[h])}return o}var Yc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function uv(r){Yc(r)}function cv(r){console.error(r)}function fv(r){Yc(r)}function Kc(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function hv(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function sp(r,i,o){return o=Mi(o),o.tag=3,o.payload={element:null},o.callback=function(){Kc(r,i)},o}function dv(r){return r=Mi(r),r.tag=3,r}function pv(r,i,o,u){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var m=u.value;r.payload=function(){return h(m)},r.callback=function(){hv(i,o,u)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){hv(i,o,u),typeof h!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function lR(r,i,o,u,h){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&El(i,o,h,!0),o=Qn.current,o!==null){switch(o.tag){case 13:return Or===null?Dp():o.alternate===null&&pt===0&&(pt=3),o.flags&=-257,o.flags|=65536,o.lanes=h,u===Pd?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),Np(r,u,h)),!1;case 22:return o.flags|=65536,u===Pd?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),Np(r,u,h)),!1}throw Error(s(435,o.tag))}return Np(r,u,h),Dp(),!1}if(Ge)return i=Qn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,u!==Rd&&(r=Error(s(422),{cause:u}),vl(Gn(r,o)))):(u!==Rd&&(i=Error(s(423),{cause:u}),vl(Gn(i,o))),r=r.current.alternate,r.flags|=65536,h&=-h,r.lanes|=h,u=Gn(u,o),h=sp(r.stateNode,u,h),kd(r,h),pt!==4&&(pt=2)),!1;var m=Error(s(520),{cause:u});if(m=Gn(m,o),zl===null?zl=[m]:zl.push(m),pt!==4&&(pt=2),i===null)return!0;u=Gn(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=h&-h,o.lanes|=r,r=sp(o.stateNode,u,r),kd(o,r),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Hi===null||!Hi.has(m))))return o.flags|=65536,h&=-h,o.lanes|=h,h=dv(h),pv(h,r,o,u),kd(o,h),!1}o=o.return}while(o!==null);return!1}var mv=Error(s(461)),Bt=!1;function Yt(r,i,o,u){i.child=r===null?sv(i,null,o,u):eo(i,r.child,o,u)}function gv(r,i,o,u,h){o=o.render;var m=i.ref;if("ref"in u){var T={};for(var S in u)S!=="ref"&&(T[S]=u[S])}else T=u;return Xs(i),u=Fd(r,i,o,T,m,h),S=Hd(),r!==null&&!Bt?(jd(r,i,h),ci(r,i,h)):(Ge&&S&&wd(i),i.flags|=1,Yt(r,i,u,h),i.child)}function yv(r,i,o,u,h){if(r===null){var m=o.type;return typeof m=="function"&&!Td(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,_v(r,i,m,u,h)):(r=Rc(o.type,null,u,i,i.mode,h),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,!dp(r,h)){var T=m.memoizedProps;if(o=o.compare,o=o!==null?o:ml,o(T,u)&&r.ref===i.ref)return ci(r,i,h)}return i.flags|=1,r=ri(m,u),r.ref=i.ref,r.return=i,i.child=r}function _v(r,i,o,u,h){if(r!==null){var m=r.memoizedProps;if(ml(m,u)&&r.ref===i.ref)if(Bt=!1,i.pendingProps=u=m,dp(r,h))(r.flags&131072)!==0&&(Bt=!0);else return i.lanes=r.lanes,ci(r,i,h)}return ap(r,i,o,u,h)}function vv(r,i,o){var u=i.pendingProps,h=u.children,m=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,r!==null){for(h=i.child=r.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;i.childLanes=m&~u}else i.childLanes=0,i.child=null;return Ev(r,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&xc(i,m!==null?m.cachePool:null),m!==null?__(i,m):Bd(),av(i);else return i.lanes=i.childLanes=536870912,Ev(r,i,m!==null?m.baseLanes|o:o,o)}else m!==null?(xc(i,m.cachePool),__(i,m),ki(),i.memoizedState=null):(r!==null&&xc(i,null),Bd(),ki());return Yt(r,i,h,o),i.child}function Ev(r,i,o,u){var h=Md();return h=h===null?null:{parent:Pt._currentValue,pool:h},i.memoizedState={baseLanes:o,cachePool:h},r!==null&&xc(i,null),Bd(),av(i),r!==null&&El(r,i,u,!0),null}function Qc(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function ap(r,i,o,u,h){return Xs(i),o=Fd(r,i,o,u,void 0,h),u=Hd(),r!==null&&!Bt?(jd(r,i,h),ci(r,i,h)):(Ge&&u&&wd(i),i.flags|=1,Yt(r,i,o,h),i.child)}function bv(r,i,o,u,h,m){return Xs(i),i.updateQueue=null,o=E_(i,u,o,h),v_(r),u=Hd(),r!==null&&!Bt?(jd(r,i,m),ci(r,i,m)):(Ge&&u&&wd(i),i.flags|=1,Yt(r,i,o,m),i.child)}function Tv(r,i,o,u,h){if(Xs(i),i.stateNode===null){var m=ja,T=o.contextType;typeof T=="object"&&T!==null&&(m=nn(T)),m=new o(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ip,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},Vd(i),T=o.contextType,m.context=typeof T=="object"&&T!==null?nn(T):ja,m.state=i.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(rp(i,o,T,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(T=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),T!==m.state&&ip.enqueueReplaceState(m,m.state,null),Rl(i,u,m,h),Il(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){m=i.stateNode;var S=i.memoizedProps,N=ea(o,S);m.props=N;var F=m.context,Q=o.contextType;T=ja,typeof Q=="object"&&Q!==null&&(T=nn(Q));var Z=o.getDerivedStateFromProps;Q=typeof Z=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,Q||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||F!==T)&&lv(i,m,u,T),xi=!1;var H=i.memoizedState;m.state=H,Rl(i,u,m,h),Il(),F=i.memoizedState,S||H!==F||xi?(typeof Z=="function"&&(rp(i,o,Z,u),F=i.memoizedState),(N=xi||ov(i,o,N,u,H,F,T))?(Q||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=F),m.props=u,m.state=F,m.context=T,u=N):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,Ld(r,i),T=i.memoizedProps,Q=ea(o,T),m.props=Q,Z=i.pendingProps,H=m.context,F=o.contextType,N=ja,typeof F=="object"&&F!==null&&(N=nn(F)),S=o.getDerivedStateFromProps,(F=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T!==Z||H!==N)&&lv(i,m,u,N),xi=!1,H=i.memoizedState,m.state=H,Rl(i,u,m,h),Il();var j=i.memoizedState;T!==Z||H!==j||xi||r!==null&&r.dependencies!==null&&Oc(r.dependencies)?(typeof S=="function"&&(rp(i,o,S,u),j=i.memoizedState),(Q=xi||ov(i,o,Q,u,H,j,N)||r!==null&&r.dependencies!==null&&Oc(r.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,j,N),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,j,N)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||T===r.memoizedProps&&H===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&H===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=j),m.props=u,m.state=j,m.context=N,u=Q):(typeof m.componentDidUpdate!="function"||T===r.memoizedProps&&H===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&H===r.memoizedState||(i.flags|=1024),u=!1)}return m=u,Qc(r,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,r!==null&&u?(i.child=eo(i,r.child,null,h),i.child=eo(i,null,o,h)):Yt(r,i,o,h),i.memoizedState=m.state,r=i.child):r=ci(r,i,h),r}function Sv(r,i,o,u){return _l(),i.flags|=256,Yt(r,i,o,u),i.child}var op={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lp(r){return{baseLanes:r,cachePool:c_()}}function up(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=Wn),r}function Av(r,i,o){var u=i.pendingProps,h=!1,m=(i.flags&128)!==0,T;if((T=m)||(T=r!==null&&r.memoizedState===null?!1:(Vt.current&2)!==0),T&&(h=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,r===null){if(Ge){if(h?Li(i):ki(),Ge){var S=dt,N;if(N=S){e:{for(N=S,S=Dr;N.nodeType!==8;){if(!S){S=null;break e}if(N=cr(N.nextSibling),N===null){S=null;break e}}S=N}S!==null?(i.memoizedState={dehydrated:S,treeContext:$s!==null?{id:ii,overflow:si}:null,retryLane:536870912,hydrationErrors:null},N=Rn(18,null,null,0),N.stateNode=S,N.return=i,i.child=N,dn=i,dt=null,N=!0):N=!1}N||Qs(i)}if(S=i.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return $p(S)?i.lanes=32:i.lanes=536870912,null;ui(i)}return S=u.children,u=u.fallback,h?(ki(),h=i.mode,S=Wc({mode:"hidden",children:S},h),u=Gs(u,h,o,null),S.return=i,u.return=i,S.sibling=u,i.child=S,h=i.child,h.memoizedState=lp(o),h.childLanes=up(r,T,o),i.memoizedState=op,u):(Li(i),cp(i,S))}if(N=r.memoizedState,N!==null&&(S=N.dehydrated,S!==null)){if(m)i.flags&256?(Li(i),i.flags&=-257,i=fp(r,i,o)):i.memoizedState!==null?(ki(),i.child=r.child,i.flags|=128,i=null):(ki(),h=u.fallback,S=i.mode,u=Wc({mode:"visible",children:u.children},S),h=Gs(h,S,o,null),h.flags|=2,u.return=i,h.return=i,u.sibling=h,i.child=u,eo(i,r.child,null,o),u=i.child,u.memoizedState=lp(o),u.childLanes=up(r,T,o),i.memoizedState=op,i=h);else if(Li(i),$p(S)){if(T=S.nextSibling&&S.nextSibling.dataset,T)var F=T.dgst;T=F,u=Error(s(419)),u.stack="",u.digest=T,vl({value:u,source:null,stack:null}),i=fp(r,i,o)}else if(Bt||El(r,i,o,!1),T=(o&r.childLanes)!==0,Bt||T){if(T=it,T!==null&&(u=o&-o,u=(u&42)!==0?1:Ai(u),u=(u&(T.suspendedLanes|o))!==0?0:u,u!==0&&u!==N.retryLane))throw N.retryLane=u,Ha(r,u),xn(T,r,u),mv;S.data==="$?"||Dp(),i=fp(r,i,o)}else S.data==="$?"?(i.flags|=192,i.child=r.child,i=null):(r=N.treeContext,dt=cr(S.nextSibling),dn=i,Ge=!0,Ks=null,Dr=!1,r!==null&&(Yn[Kn++]=ii,Yn[Kn++]=si,Yn[Kn++]=$s,ii=r.id,si=r.overflow,$s=i),i=cp(i,u.children),i.flags|=4096);return i}return h?(ki(),h=u.fallback,S=i.mode,N=r.child,F=N.sibling,u=ri(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,F!==null?h=ri(F,h):(h=Gs(h,S,o,null),h.flags|=2),h.return=i,u.return=i,u.sibling=h,i.child=u,u=h,h=i.child,S=r.child.memoizedState,S===null?S=lp(o):(N=S.cachePool,N!==null?(F=Pt._currentValue,N=N.parent!==F?{parent:F,pool:F}:N):N=c_(),S={baseLanes:S.baseLanes|o,cachePool:N}),h.memoizedState=S,h.childLanes=up(r,T,o),i.memoizedState=op,u):(Li(i),o=r.child,r=o.sibling,o=ri(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(T=i.deletions,T===null?(i.deletions=[r],i.flags|=16):T.push(r)),i.child=o,i.memoizedState=null,o)}function cp(r,i){return i=Wc({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Wc(r,i){return r=Rn(22,r,null,i),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function fp(r,i,o){return eo(i,r.child,null,o),r=cp(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function wv(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),Dd(r.return,i,o)}function hp(r,i,o,u,h){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=h)}function Iv(r,i,o){var u=i.pendingProps,h=u.revealOrder,m=u.tail;if(Yt(r,i,u.children,o),u=Vt.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&wv(r,o,i);else if(r.tag===19)wv(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(se(Vt,u),h){case"forwards":for(o=i.child,h=null;o!==null;)r=o.alternate,r!==null&&$c(r)===null&&(h=o),o=o.sibling;o=h,o===null?(h=i.child,i.child=null):(h=o.sibling,o.sibling=null),hp(i,!1,h,o,m);break;case"backwards":for(o=null,h=i.child,i.child=null;h!==null;){if(r=h.alternate,r!==null&&$c(r)===null){i.child=h;break}r=h.sibling,h.sibling=o,o=h,h=r}hp(i,!0,o,null,m);break;case"together":hp(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ci(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),Fi|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(El(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,o=ri(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=ri(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function dp(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Oc(r)))}function uR(r,i,o){switch(i.tag){case 3:Ze(i,i.stateNode.containerInfo),Ni(i,Pt,r.memoizedState.cache),_l();break;case 27:case 5:Un(i);break;case 4:Ze(i,i.stateNode.containerInfo);break;case 10:Ni(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Li(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Av(r,i,o):(Li(i),r=ci(r,i,o),r!==null?r.sibling:null);Li(i);break;case 19:var h=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(El(r,i,o,!1),u=(o&i.childLanes)!==0),h){if(u)return Iv(r,i,o);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),se(Vt,Vt.current),u)break;return null;case 22:case 23:return i.lanes=0,vv(r,i,o);case 24:Ni(i,Pt,r.memoizedState.cache)}return ci(r,i,o)}function Rv(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)Bt=!0;else{if(!dp(r,o)&&(i.flags&128)===0)return Bt=!1,uR(r,i,o);Bt=(r.flags&131072)!==0}else Bt=!1,Ge&&(i.flags&1048576)!==0&&r_(i,Dc,i.index);switch(i.lanes=0,i.tag){case 16:e:{r=i.pendingProps;var u=i.elementType,h=u._init;if(u=h(u._payload),i.type=u,typeof u=="function")Td(u)?(r=ea(u,r),i.tag=1,i=Tv(null,i,u,r,o)):(i.tag=0,i=ap(null,i,u,r,o));else{if(u!=null){if(h=u.$$typeof,h===ae){i.tag=11,i=gv(null,i,u,r,o);break e}else if(h===C){i.tag=14,i=yv(null,i,u,r,o);break e}}throw i=ut(u)||u,Error(s(306,i,""))}}return i;case 0:return ap(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,h=ea(u,i.pendingProps),Tv(r,i,u,h,o);case 3:e:{if(Ze(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var m=i.memoizedState;h=m.element,Ld(r,i),Rl(i,u,null,o);var T=i.memoizedState;if(u=T.cache,Ni(i,Pt,u),u!==m.cache&&Od(i,[Pt],o,!0),Il(),u=T.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=Sv(r,i,u,o);break e}else if(u!==h){h=Gn(Error(s(424)),i),vl(h),i=Sv(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(dt=cr(r.firstChild),dn=i,Ge=!0,Ks=null,Dr=!0,o=sv(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(_l(),u===h){i=ci(r,i,o);break e}Yt(r,i,u,o)}i=i.child}return i;case 26:return Qc(r,i),r===null?(o=NE(i.type,null,i.pendingProps,null))?i.memoizedState=o:Ge||(o=i.type,r=i.pendingProps,u=ff(be.current).createElement(o),u[Nt]=i,u[St]=r,Qt(u,o,r),yt(u),i.stateNode=u):i.memoizedState=NE(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Un(i),r===null&&Ge&&(u=i.stateNode=CE(i.type,i.pendingProps,be.current),dn=i,Dr=!0,h=dt,$i(i.type)?(Yp=h,dt=cr(u.firstChild)):dt=h),Yt(r,i,i.pendingProps.children,o),Qc(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&Ge&&((h=u=dt)&&(u=kR(u,i.type,i.pendingProps,Dr),u!==null?(i.stateNode=u,dn=i,dt=cr(u.firstChild),Dr=!1,h=!0):h=!1),h||Qs(i)),Un(i),h=i.type,m=i.pendingProps,T=r!==null?r.memoizedProps:null,u=m.children,Hp(h,m)?u=null:T!==null&&Hp(h,T)&&(i.flags|=32),i.memoizedState!==null&&(h=Fd(r,i,tR,null,null,o),Ql._currentValue=h),Qc(r,i),Yt(r,i,u,o),i.child;case 6:return r===null&&Ge&&((r=o=dt)&&(o=UR(o,i.pendingProps,Dr),o!==null?(i.stateNode=o,dn=i,dt=null,r=!0):r=!1),r||Qs(i)),null;case 13:return Av(r,i,o);case 4:return Ze(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=eo(i,null,u,o):Yt(r,i,u,o),i.child;case 11:return gv(r,i,i.type,i.pendingProps,o);case 7:return Yt(r,i,i.pendingProps,o),i.child;case 8:return Yt(r,i,i.pendingProps.children,o),i.child;case 12:return Yt(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Ni(i,i.type,u.value),Yt(r,i,u.children,o),i.child;case 9:return h=i.type._context,u=i.pendingProps.children,Xs(i),h=nn(h),u=u(h),i.flags|=1,Yt(r,i,u,o),i.child;case 14:return yv(r,i,i.type,i.pendingProps,o);case 15:return _v(r,i,i.type,i.pendingProps,o);case 19:return Iv(r,i,o);case 31:return u=i.pendingProps,o=i.mode,u={mode:u.mode,children:u.children},r===null?(o=Wc(u,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=ri(r.child,u),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return vv(r,i,o);case 24:return Xs(i),u=nn(Pt),r===null?(h=Md(),h===null&&(h=it,m=Nd(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=o),h=m),i.memoizedState={parent:u,cache:h},Vd(i),Ni(i,Pt,h)):((r.lanes&o)!==0&&(Ld(r,i),Rl(i,null,null,o),Il()),h=r.memoizedState,m=i.memoizedState,h.parent!==u?(h={parent:u,cache:u},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Ni(i,Pt,u)):(u=m.cache,Ni(i,Pt,u),u!==h.cache&&Od(i,[Pt],o,!0))),Yt(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function fi(r){r.flags|=4}function Cv(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!LE(i)){if(i=Qn.current,i!==null&&((ze&4194048)===ze?Or!==null:(ze&62914560)!==ze&&(ze&536870912)===0||i!==Or))throw Al=Pd,f_;r.flags|=8192}}function Xc(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Xo():536870912,r.lanes|=i,io|=i)}function Pl(r,i){if(!Ge)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function ct(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var h=r.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&65011712,u|=h.flags&65011712,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function cR(r,i,o){var u=i.pendingProps;switch(Id(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(i),null;case 1:return ct(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),oi(Pt),un(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(yl(i)?fi(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,a_())),ct(i),null;case 26:return o=i.memoizedState,r===null?(fi(i),o!==null?(ct(i),Cv(i,o)):(ct(i),i.flags&=-16777217)):o?o!==r.memoizedState?(fi(i),ct(i),Cv(i,o)):(ct(i),i.flags&=-16777217):(r.memoizedProps!==u&&fi(i),ct(i),i.flags&=-16777217),null;case 27:yr(i),o=be.current;var h=i.type;if(r!==null&&i.stateNode!=null)r.memoizedProps!==u&&fi(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return ct(i),null}r=_e.current,yl(i)?i_(i):(r=CE(h,u,o),i.stateNode=r,fi(i))}return ct(i),null;case 5:if(yr(i),o=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&fi(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return ct(i),null}if(r=_e.current,yl(i))i_(i);else{switch(h=ff(be.current),r){case 1:r=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=h.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?h.createElement("select",{is:u.is}):h.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?h.createElement(o,{is:u.is}):h.createElement(o)}}r[Nt]=i,r[St]=u;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)r.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=r;e:switch(Qt(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&fi(i)}}return ct(i),i.flags&=-16777217,null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&fi(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=be.current,yl(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,h=dn,h!==null)switch(h.tag){case 27:case 5:u=h.memoizedProps}r[Nt]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||bE(r.nodeValue,o)),r||Qs(i)}else r=ff(r).createTextNode(u),r[Nt]=i,i.stateNode=r}return ct(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(h=yl(i),u!==null&&u.dehydrated!==null){if(r===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Nt]=i}else _l(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ct(i),h=!1}else h=a_(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(ui(i),i):(ui(i),null)}if(ui(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=i.child,h=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(h=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048)}return o!==r&&o&&(i.child.flags|=8192),Xc(i,i.updateQueue),ct(i),null;case 4:return un(),r===null&&Up(i.stateNode.containerInfo),ct(i),null;case 10:return oi(i.type),ct(i),null;case 19:if(ce(Vt),h=i.memoizedState,h===null)return ct(i),null;if(u=(i.flags&128)!==0,m=h.rendering,m===null)if(u)Pl(h,!1);else{if(pt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(m=$c(r),m!==null){for(i.flags|=128,Pl(h,!1),r=m.updateQueue,i.updateQueue=r,Xc(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)n_(o,r),o=o.sibling;return se(Vt,Vt.current&1|2),i.child}r=r.sibling}h.tail!==null&&Bn()>ef&&(i.flags|=128,u=!0,Pl(h,!1),i.lanes=4194304)}else{if(!u)if(r=$c(m),r!==null){if(i.flags|=128,u=!0,r=r.updateQueue,i.updateQueue=r,Xc(i,r),Pl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!Ge)return ct(i),null}else 2*Bn()-h.renderingStartTime>ef&&o!==536870912&&(i.flags|=128,u=!0,Pl(h,!1),i.lanes=4194304);h.isBackwards?(m.sibling=i.child,i.child=m):(r=h.last,r!==null?r.sibling=m:i.child=m,h.last=m)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Bn(),i.sibling=null,r=Vt.current,se(Vt,u?r&1|2:r&1),i):(ct(i),null);case 22:case 23:return ui(i),zd(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(ct(i),i.subtreeFlags&6&&(i.flags|=8192)):ct(i),o=i.updateQueue,o!==null&&Xc(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&ce(Zs),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),oi(Pt),ct(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function fR(r,i){switch(Id(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return oi(Pt),un(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return yr(i),null;case 13:if(ui(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));_l()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return ce(Vt),null;case 4:return un(),null;case 10:return oi(i.type),null;case 22:case 23:return ui(i),zd(),r!==null&&ce(Zs),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return oi(Pt),null;case 25:return null;default:return null}}function Dv(r,i){switch(Id(i),i.tag){case 3:oi(Pt),un();break;case 26:case 27:case 5:yr(i);break;case 4:un();break;case 13:ui(i);break;case 19:ce(Vt);break;case 10:oi(i.type);break;case 22:case 23:ui(i),zd(),r!==null&&ce(Zs);break;case 24:oi(Pt)}}function Vl(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var h=u.next;o=h;do{if((o.tag&r)===r){u=void 0;var m=o.create,T=o.inst;u=m(),T.destroy=u}o=o.next}while(o!==h)}}catch(S){rt(i,i.return,S)}}function Ui(r,i,o){try{var u=i.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var m=h.next;u=m;do{if((u.tag&r)===r){var T=u.inst,S=T.destroy;if(S!==void 0){T.destroy=void 0,h=i;var N=o,F=S;try{F()}catch(Q){rt(h,N,Q)}}}u=u.next}while(u!==m)}}catch(Q){rt(i,i.return,Q)}}function Ov(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{y_(i,o)}catch(u){rt(r,r.return,u)}}}function Nv(r,i,o){o.props=ea(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){rt(r,i,u)}}function Ll(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(h){rt(r,i,h)}}function Nr(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(h){rt(r,i,h)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){rt(r,i,h)}else o.current=null}function xv(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(h){rt(r,r.return,h)}}function pp(r,i,o){try{var u=r.stateNode;xR(u,r.type,o,i),u[St]=i}catch(h){rt(r,r.return,h)}}function Mv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&$i(r.type)||r.tag===4}function mp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Mv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&$i(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function gp(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=cf));else if(u!==4&&(u===27&&$i(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(gp(r,i,o),r=r.sibling;r!==null;)gp(r,i,o),r=r.sibling}function Zc(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&$i(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Zc(r,i,o),r=r.sibling;r!==null;)Zc(r,i,o),r=r.sibling}function Pv(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Qt(i,u,o),i[Nt]=r,i[St]=o}catch(m){rt(r,r.return,m)}}var hi=!1,vt=!1,yp=!1,Vv=typeof WeakSet=="function"?WeakSet:Set,zt=null;function hR(r,i){if(r=r.containerInfo,qp=yf,r=$y(r),md(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var T=0,S=-1,N=-1,F=0,Q=0,Z=r,H=null;t:for(;;){for(var j;Z!==o||h!==0&&Z.nodeType!==3||(S=T+h),Z!==m||u!==0&&Z.nodeType!==3||(N=T+u),Z.nodeType===3&&(T+=Z.nodeValue.length),(j=Z.firstChild)!==null;)H=Z,Z=j;for(;;){if(Z===r)break t;if(H===o&&++F===h&&(S=T),H===m&&++Q===u&&(N=T),(j=Z.nextSibling)!==null)break;Z=H,H=Z.parentNode}Z=j}o=S===-1||N===-1?null:{start:S,end:N}}else o=null}o=o||{start:0,end:0}}else o=null;for(Fp={focusedElem:r,selectionRange:o},yf=!1,zt=i;zt!==null;)if(i=zt,r=i.child,(i.subtreeFlags&1024)!==0&&r!==null)r.return=i,zt=r;else for(;zt!==null;){switch(i=zt,m=i.alternate,r=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=i,h=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var we=ea(o.type,h,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(we,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ee){rt(o,o.return,Ee)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Gp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Gp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,zt=r;break}zt=i.return}}function Lv(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Bi(r,o),u&4&&Vl(5,o);break;case 1:if(Bi(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(T){rt(o,o.return,T)}else{var h=ea(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(h,i,r.__reactInternalSnapshotBeforeUpdate)}catch(T){rt(o,o.return,T)}}u&64&&Ov(o),u&512&&Ll(o,o.return);break;case 3:if(Bi(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{y_(r,i)}catch(T){rt(o,o.return,T)}}break;case 27:i===null&&u&4&&Pv(o);case 26:case 5:Bi(r,o),i===null&&u&4&&xv(o),u&512&&Ll(o,o.return);break;case 12:Bi(r,o);break;case 13:Bi(r,o),u&4&&Bv(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=bR.bind(null,o),BR(r,o))));break;case 22:if(u=o.memoizedState!==null||hi,!u){i=i!==null&&i.memoizedState!==null||vt,h=hi;var m=vt;hi=u,(vt=i)&&!m?zi(r,o,(o.subtreeFlags&8772)!==0):Bi(r,o),hi=h,vt=m}break;case 30:break;default:Bi(r,o)}}function kv(r){var i=r.alternate;i!==null&&(r.alternate=null,kv(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Ri(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var lt=null,yn=!1;function di(r,i,o){for(o=o.child;o!==null;)Uv(r,i,o),o=o.sibling}function Uv(r,i,o){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(ht,o)}catch{}switch(o.tag){case 26:vt||Nr(o,i),di(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:vt||Nr(o,i);var u=lt,h=yn;$i(o.type)&&(lt=o.stateNode,yn=!1),di(r,i,o),Gl(o.stateNode),lt=u,yn=h;break;case 5:vt||Nr(o,i);case 6:if(u=lt,h=yn,lt=null,di(r,i,o),lt=u,yn=h,lt!==null)if(yn)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(o.stateNode)}catch(m){rt(o,i,m)}else try{lt.removeChild(o.stateNode)}catch(m){rt(o,i,m)}break;case 18:lt!==null&&(yn?(r=lt,IE(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Jl(r)):IE(lt,o.stateNode));break;case 4:u=lt,h=yn,lt=o.stateNode.containerInfo,yn=!0,di(r,i,o),lt=u,yn=h;break;case 0:case 11:case 14:case 15:vt||Ui(2,o,i),vt||Ui(4,o,i),di(r,i,o);break;case 1:vt||(Nr(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Nv(o,i,u)),di(r,i,o);break;case 21:di(r,i,o);break;case 22:vt=(u=vt)||o.memoizedState!==null,di(r,i,o),vt=u;break;default:di(r,i,o)}}function Bv(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Jl(r)}catch(o){rt(i,i.return,o)}}function dR(r){switch(r.tag){case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Vv),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Vv),i;default:throw Error(s(435,r.tag))}}function _p(r,i){var o=dR(r);i.forEach(function(u){var h=TR.bind(null,r,u);o.has(u)||(o.add(u),u.then(h,h))})}function Cn(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u],m=r,T=i,S=T;e:for(;S!==null;){switch(S.tag){case 27:if($i(S.type)){lt=S.stateNode,yn=!1;break e}break;case 5:lt=S.stateNode,yn=!1;break e;case 3:case 4:lt=S.stateNode.containerInfo,yn=!0;break e}S=S.return}if(lt===null)throw Error(s(160));Uv(m,T,h),lt=null,yn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)zv(i,r),i=i.sibling}var ur=null;function zv(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Cn(i,r),Dn(r),u&4&&(Ui(3,r,r.return),Vl(3,r),Ui(5,r,r.return));break;case 1:Cn(i,r),Dn(r),u&512&&(vt||o===null||Nr(o,o.return)),u&64&&hi&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var h=ur;if(Cn(i,r),Dn(r),u&512&&(vt||o===null||Nr(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,h=h.ownerDocument||h;t:switch(u){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Ds]||m[Nt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(u),h.head.insertBefore(m,h.querySelector("head > title"))),Qt(m,u,o),m[Nt]=r,yt(m),u=m;break e;case"link":var T=PE("link","href",h).get(u+(o.href||""));if(T){for(var S=0;S<T.length;S++)if(m=T[S],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(S,1);break t}}m=h.createElement(u),Qt(m,u,o),h.head.appendChild(m);break;case"meta":if(T=PE("meta","content",h).get(u+(o.content||""))){for(S=0;S<T.length;S++)if(m=T[S],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(S,1);break t}}m=h.createElement(u),Qt(m,u,o),h.head.appendChild(m);break;default:throw Error(s(468,u))}m[Nt]=r,yt(m),u=m}r.stateNode=u}else VE(h,r.type,r.stateNode);else r.stateNode=ME(h,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?VE(h,r.type,r.stateNode):ME(h,u,r.memoizedProps)):u===null&&r.stateNode!==null&&pp(r,r.memoizedProps,o.memoizedProps)}break;case 27:Cn(i,r),Dn(r),u&512&&(vt||o===null||Nr(o,o.return)),o!==null&&u&4&&pp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Cn(i,r),Dn(r),u&512&&(vt||o===null||Nr(o,o.return)),r.flags&32){h=r.stateNode;try{qn(h,"")}catch(j){rt(r,r.return,j)}}u&4&&r.stateNode!=null&&(h=r.memoizedProps,pp(r,h,o!==null?o.memoizedProps:h)),u&1024&&(yp=!0);break;case 6:if(Cn(i,r),Dn(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(j){rt(r,r.return,j)}}break;case 3:if(pf=null,h=ur,ur=hf(i.containerInfo),Cn(i,r),ur=h,Dn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Jl(i.containerInfo)}catch(j){rt(r,r.return,j)}yp&&(yp=!1,qv(r));break;case 4:u=ur,ur=hf(r.stateNode.containerInfo),Cn(i,r),Dn(r),ur=u;break;case 12:Cn(i,r),Dn(r);break;case 13:Cn(i,r),Dn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ap=Bn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,_p(r,u)));break;case 22:h=r.memoizedState!==null;var N=o!==null&&o.memoizedState!==null,F=hi,Q=vt;if(hi=F||h,vt=Q||N,Cn(i,r),vt=Q,hi=F,Dn(r),u&8192)e:for(i=r.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(o===null||N||hi||vt||ta(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){N=o=i;try{if(m=N.stateNode,h)T=m.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{S=N.stateNode;var Z=N.memoizedProps.style,H=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;S.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(j){rt(N,N.return,j)}}}else if(i.tag===6){if(o===null){N=i;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(j){rt(N,N.return,j)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,_p(r,o))));break;case 19:Cn(i,r),Dn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,_p(r,u)));break;case 30:break;case 21:break;default:Cn(i,r),Dn(r)}}function Dn(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(Mv(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var h=o.stateNode,m=mp(r);Zc(r,m,h);break;case 5:var T=o.stateNode;o.flags&32&&(qn(T,""),o.flags&=-33);var S=mp(r);Zc(r,S,T);break;case 3:case 4:var N=o.stateNode.containerInfo,F=mp(r);gp(r,F,N);break;default:throw Error(s(161))}}catch(Q){rt(r,r.return,Q)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function qv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;qv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Bi(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Lv(r,i.alternate,i),i=i.sibling}function ta(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ui(4,i,i.return),ta(i);break;case 1:Nr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Nv(i,i.return,o),ta(i);break;case 27:Gl(i.stateNode);case 26:case 5:Nr(i,i.return),ta(i);break;case 22:i.memoizedState===null&&ta(i);break;case 30:ta(i);break;default:ta(i)}r=r.sibling}}function zi(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,h=r,m=i,T=m.flags;switch(m.tag){case 0:case 11:case 15:zi(h,m,o),Vl(4,m);break;case 1:if(zi(h,m,o),u=m,h=u.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){rt(u,u.return,F)}if(u=m,h=u.updateQueue,h!==null){var S=u.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)g_(N[h],S)}catch(F){rt(u,u.return,F)}}o&&T&64&&Ov(m),Ll(m,m.return);break;case 27:Pv(m);case 26:case 5:zi(h,m,o),o&&u===null&&T&4&&xv(m),Ll(m,m.return);break;case 12:zi(h,m,o);break;case 13:zi(h,m,o),o&&T&4&&Bv(h,m);break;case 22:m.memoizedState===null&&zi(h,m,o),Ll(m,m.return);break;case 30:break;default:zi(h,m,o)}i=i.sibling}}function vp(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&bl(o))}function Ep(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&bl(r))}function xr(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Fv(r,i,o,u),i=i.sibling}function Fv(r,i,o,u){var h=i.flags;switch(i.tag){case 0:case 11:case 15:xr(r,i,o,u),h&2048&&Vl(9,i);break;case 1:xr(r,i,o,u);break;case 3:xr(r,i,o,u),h&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&bl(r)));break;case 12:if(h&2048){xr(r,i,o,u),r=i.stateNode;try{var m=i.memoizedProps,T=m.id,S=m.onPostCommit;typeof S=="function"&&S(T,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(N){rt(i,i.return,N)}}else xr(r,i,o,u);break;case 13:xr(r,i,o,u);break;case 23:break;case 22:m=i.stateNode,T=i.alternate,i.memoizedState!==null?m._visibility&2?xr(r,i,o,u):kl(r,i):m._visibility&2?xr(r,i,o,u):(m._visibility|=2,to(r,i,o,u,(i.subtreeFlags&10256)!==0)),h&2048&&vp(T,i);break;case 24:xr(r,i,o,u),h&2048&&Ep(i.alternate,i);break;default:xr(r,i,o,u)}}function to(r,i,o,u,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=r,T=i,S=o,N=u,F=T.flags;switch(T.tag){case 0:case 11:case 15:to(m,T,S,N,h),Vl(8,T);break;case 23:break;case 22:var Q=T.stateNode;T.memoizedState!==null?Q._visibility&2?to(m,T,S,N,h):kl(m,T):(Q._visibility|=2,to(m,T,S,N,h)),h&&F&2048&&vp(T.alternate,T);break;case 24:to(m,T,S,N,h),h&&F&2048&&Ep(T.alternate,T);break;default:to(m,T,S,N,h)}i=i.sibling}}function kl(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,h=u.flags;switch(u.tag){case 22:kl(o,u),h&2048&&vp(u.alternate,u);break;case 24:kl(o,u),h&2048&&Ep(u.alternate,u);break;default:kl(o,u)}i=i.sibling}}var Ul=8192;function no(r){if(r.subtreeFlags&Ul)for(r=r.child;r!==null;)Hv(r),r=r.sibling}function Hv(r){switch(r.tag){case 26:no(r),r.flags&Ul&&r.memoizedState!==null&&ZR(ur,r.memoizedState,r.memoizedProps);break;case 5:no(r);break;case 3:case 4:var i=ur;ur=hf(r.stateNode.containerInfo),no(r),ur=i;break;case 22:r.memoizedState===null&&(i=r.alternate,i!==null&&i.memoizedState!==null?(i=Ul,Ul=16777216,no(r),Ul=i):no(r));break;default:no(r)}}function jv(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Bl(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];zt=u,$v(u,r)}jv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Gv(r),r=r.sibling}function Gv(r){switch(r.tag){case 0:case 11:case 15:Bl(r),r.flags&2048&&Ui(9,r,r.return);break;case 3:Bl(r);break;case 12:Bl(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Jc(r)):Bl(r);break;default:Bl(r)}}function Jc(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];zt=u,$v(u,r)}jv(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ui(8,i,i.return),Jc(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Jc(i));break;default:Jc(i)}r=r.sibling}}function $v(r,i){for(;zt!==null;){var o=zt;switch(o.tag){case 0:case 11:case 15:Ui(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:bl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,zt=u;else e:for(o=r;zt!==null;){u=zt;var h=u.sibling,m=u.return;if(kv(u),u===o){zt=null;break e}if(h!==null){h.return=m,zt=h;break e}zt=m}}}var pR={getCacheForType:function(r){var i=nn(Pt),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o}},mR=typeof WeakMap=="function"?WeakMap:Map,We=0,it=null,xe=null,ze=0,Xe=0,On=null,qi=!1,ro=!1,bp=!1,pi=0,pt=0,Fi=0,na=0,Tp=0,Wn=0,io=0,zl=null,_n=null,Sp=!1,Ap=0,ef=1/0,tf=null,Hi=null,Kt=0,ji=null,so=null,ao=0,wp=0,Ip=null,Yv=null,ql=0,Rp=null;function Nn(){if((We&2)!==0&&ze!==0)return ze&-ze;if(K.T!==null){var r=Ya;return r!==0?r:Pp()}return wi()}function Kv(){Wn===0&&(Wn=(ze&536870912)===0||Ge?Wo():536870912);var r=Qn.current;return r!==null&&(r.flags|=32),Wn}function xn(r,i,o){(r===it&&(Xe===2||Xe===9)||r.cancelPendingCommit!==null)&&(oo(r,0),Gi(r,ze,Wn,!1)),$r(r,o),((We&2)===0||r!==it)&&(r===it&&((We&2)===0&&(na|=o),pt===4&&Gi(r,ze,Wn,!1)),Mr(r))}function Qv(r,i,o){if((We&6)!==0)throw Error(s(327));var u=!o&&(i&124)===0&&(i&r.expiredLanes)===0||Cs(r,i),h=u?_R(r,i):Op(r,i,!0),m=u;do{if(h===0){ro&&!u&&Gi(r,i,0,!1);break}else{if(o=r.current.alternate,m&&!gR(o)){h=Op(r,i,!1),m=!1;continue}if(h===2){if(m=i,r.errorRecoveryDisabledLanes&m)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var S=r;h=zl;var N=S.current.memoizedState.isDehydrated;if(N&&(oo(S,T).flags|=256),T=Op(S,T,!1),T!==2){if(bp&&!N){S.errorRecoveryDisabledLanes|=m,na|=m,h=4;break e}m=_n,_n=h,m!==null&&(_n===null?_n=m:_n.push.apply(_n,m))}h=T}if(m=!1,h!==2)continue}}if(h===1){oo(r,0),Gi(r,i,0,!0);break}e:{switch(u=r,m=h,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Gi(u,i,Wn,!qi);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Ap+300-Bn(),10<h)){if(Gi(u,i,Wn,!qi),Aa(u,0,!0)!==0)break e;u.timeoutHandle=AE(Wv.bind(null,u,o,_n,tf,Sp,i,Wn,na,io,qi,m,2,-0,0),h);break e}Wv(u,o,_n,tf,Sp,i,Wn,na,io,qi,m,0,-0,0)}}break}while(!0);Mr(r)}function Wv(r,i,o,u,h,m,T,S,N,F,Q,Z,H,j){if(r.timeoutHandle=-1,Z=i.subtreeFlags,(Z&8192||(Z&16785408)===16785408)&&(Kl={stylesheets:null,count:0,unsuspend:XR},Hv(i),Z=JR(),Z!==null)){r.cancelPendingCommit=Z(rE.bind(null,r,i,m,o,u,h,T,S,N,Q,1,H,j)),Gi(r,m,T,!F);return}rE(r,i,m,o,u,h,T,S,N)}function gR(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var h=o[u],m=h.getSnapshot;h=h.value;try{if(!In(m(),h))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Gi(r,i,o,u){i&=~Tp,i&=~na,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var h=i;0<h;){var m=31-tn(h),T=1<<m;u[m]=-1,h&=~T}o!==0&&_r(r,o,i)}function nf(){return(We&6)===0?(Fl(0),!1):!0}function Cp(){if(xe!==null){if(Xe===0)var r=xe.return;else r=xe,ai=Ws=null,Gd(r),Ja=null,xl=0,r=xe;for(;r!==null;)Dv(r.alternate,r),r=r.return;xe=null}}function oo(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,PR(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Cp(),it=r,xe=o=ri(r.current,null),ze=i,Xe=0,On=null,qi=!1,ro=Cs(r,i),bp=!1,io=Wn=Tp=na=Fi=pt=0,_n=zl=null,Sp=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var h=31-tn(u),m=1<<h;i|=r[h],u&=~m}return pi=i,Ac(),o}function Xv(r,i){Oe=null,K.H=Hc,i===Sl||i===Mc?(i=p_(),Xe=3):i===f_?(i=p_(),Xe=4):Xe=i===mv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,On=i,xe===null&&(pt=1,Kc(r,Gn(i,r.current)))}function Zv(){var r=K.H;return K.H=Hc,r===null?Hc:r}function Jv(){var r=K.A;return K.A=pR,r}function Dp(){pt=4,qi||(ze&4194048)!==ze&&Qn.current!==null||(ro=!0),(Fi&134217727)===0&&(na&134217727)===0||it===null||Gi(it,ze,Wn,!1)}function Op(r,i,o){var u=We;We|=2;var h=Zv(),m=Jv();(it!==r||ze!==i)&&(tf=null,oo(r,i)),i=!1;var T=pt;e:do try{if(Xe!==0&&xe!==null){var S=xe,N=On;switch(Xe){case 8:Cp(),T=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(i=!0);var F=Xe;if(Xe=0,On=null,lo(r,S,N,F),o&&ro){T=0;break e}break;default:F=Xe,Xe=0,On=null,lo(r,S,N,F)}}yR(),T=pt;break}catch(Q){Xv(r,Q)}while(!0);return i&&r.shellSuspendCounter++,ai=Ws=null,We=u,K.H=h,K.A=m,xe===null&&(it=null,ze=0,Ac()),T}function yR(){for(;xe!==null;)eE(xe)}function _R(r,i){var o=We;We|=2;var u=Zv(),h=Jv();it!==r||ze!==i?(tf=null,ef=Bn()+500,oo(r,i)):ro=Cs(r,i);e:do try{if(Xe!==0&&xe!==null){i=xe;var m=On;t:switch(Xe){case 1:Xe=0,On=null,lo(r,i,m,1);break;case 2:case 9:if(h_(m)){Xe=0,On=null,tE(i);break}i=function(){Xe!==2&&Xe!==9||it!==r||(Xe=7),Mr(r)},m.then(i,i);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:h_(m)?(Xe=0,On=null,tE(i)):(Xe=0,On=null,lo(r,i,m,7));break;case 5:var T=null;switch(xe.tag){case 26:T=xe.memoizedState;case 5:case 27:var S=xe;if(!T||LE(T)){Xe=0,On=null;var N=S.sibling;if(N!==null)xe=N;else{var F=S.return;F!==null?(xe=F,rf(F)):xe=null}break t}}Xe=0,On=null,lo(r,i,m,5);break;case 6:Xe=0,On=null,lo(r,i,m,6);break;case 8:Cp(),pt=6;break e;default:throw Error(s(462))}}vR();break}catch(Q){Xv(r,Q)}while(!0);return ai=Ws=null,K.H=u,K.A=h,We=o,xe!==null?0:(it=null,ze=0,Ac(),pt)}function vR(){for(;xe!==null&&!$o();)eE(xe)}function eE(r){var i=Rv(r.alternate,r,pi);r.memoizedProps=r.pendingProps,i===null?rf(r):xe=i}function tE(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=bv(o,i,i.pendingProps,i.type,void 0,ze);break;case 11:i=bv(o,i,i.pendingProps,i.type.render,i.ref,ze);break;case 5:Gd(i);default:Dv(o,i),i=xe=n_(i,pi),i=Rv(o,i,pi)}r.memoizedProps=r.pendingProps,i===null?rf(r):xe=i}function lo(r,i,o,u){ai=Ws=null,Gd(i),Ja=null,xl=0;var h=i.return;try{if(lR(r,h,i,o,ze)){pt=1,Kc(r,Gn(o,r.current)),xe=null;return}}catch(m){if(h!==null)throw xe=h,m;pt=1,Kc(r,Gn(o,r.current)),xe=null;return}i.flags&32768?(Ge||u===1?r=!0:ro||(ze&536870912)!==0?r=!1:(qi=r=!0,(u===2||u===9||u===3||u===6)&&(u=Qn.current,u!==null&&u.tag===13&&(u.flags|=16384))),nE(i,r)):rf(i)}function rf(r){var i=r;do{if((i.flags&32768)!==0){nE(i,qi);return}r=i.return;var o=cR(i.alternate,i,pi);if(o!==null){xe=o;return}if(i=i.sibling,i!==null){xe=i;return}xe=i=r}while(i!==null);pt===0&&(pt=5)}function nE(r,i){do{var o=fR(r.alternate,r);if(o!==null){o.flags&=32767,xe=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){xe=r;return}xe=r=o}while(r!==null);pt=6,xe=null}function rE(r,i,o,u,h,m,T,S,N){r.cancelPendingCommit=null;do sf();while(Kt!==0);if((We&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=Ed,Zo(r,o,m,T,S,N),r===it&&(xe=it=null,ze=0),so=i,ji=r,ao=o,wp=m,Ip=h,Yv=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,SR(As,function(){return lE(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=K.T,K.T=null,h=ue.p,ue.p=2,T=We,We|=4;try{hR(r,i,o)}finally{We=T,ue.p=h,K.T=u}}Kt=1,iE(),sE(),aE()}}function iE(){if(Kt===1){Kt=0;var r=ji,i=so,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=K.T,K.T=null;var u=ue.p;ue.p=2;var h=We;We|=4;try{zv(i,r);var m=Fp,T=$y(r.containerInfo),S=m.focusedElem,N=m.selectionRange;if(T!==S&&S&&S.ownerDocument&&Gy(S.ownerDocument.documentElement,S)){if(N!==null&&md(S)){var F=N.start,Q=N.end;if(Q===void 0&&(Q=F),"selectionStart"in S)S.selectionStart=F,S.selectionEnd=Math.min(Q,S.value.length);else{var Z=S.ownerDocument||document,H=Z&&Z.defaultView||window;if(H.getSelection){var j=H.getSelection(),we=S.textContent.length,Ee=Math.min(N.start,we),nt=N.end===void 0?Ee:Math.min(N.end,we);!j.extend&&Ee>nt&&(T=nt,nt=Ee,Ee=T);var B=jy(S,Ee),k=jy(S,nt);if(B&&k&&(j.rangeCount!==1||j.anchorNode!==B.node||j.anchorOffset!==B.offset||j.focusNode!==k.node||j.focusOffset!==k.offset)){var q=Z.createRange();q.setStart(B.node,B.offset),j.removeAllRanges(),Ee>nt?(j.addRange(q),j.extend(k.node,k.offset)):(q.setEnd(k.node,k.offset),j.addRange(q))}}}}for(Z=[],j=S;j=j.parentNode;)j.nodeType===1&&Z.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<Z.length;S++){var W=Z[S];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}yf=!!qp,Fp=qp=null}finally{We=h,ue.p=u,K.T=o}}r.current=i,Kt=2}}function sE(){if(Kt===2){Kt=0;var r=ji,i=so,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=K.T,K.T=null;var u=ue.p;ue.p=2;var h=We;We|=4;try{Lv(r,i.alternate,i)}finally{We=h,ue.p=u,K.T=o}}Kt=3}}function aE(){if(Kt===4||Kt===3){Kt=0,Ju();var r=ji,i=so,o=ao,u=Yv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Kt=5:(Kt=0,so=ji=null,oE(r,r.pendingLanes));var h=r.pendingLanes;if(h===0&&(Hi=null),wa(o),i=i.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(ht,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=K.T,h=ue.p,ue.p=2,K.T=null;try{for(var m=r.onRecoverableError,T=0;T<u.length;T++){var S=u[T];m(S.value,{componentStack:S.stack})}}finally{K.T=i,ue.p=h}}(ao&3)!==0&&sf(),Mr(r),h=r.pendingLanes,(o&4194090)!==0&&(h&42)!==0?r===Rp?ql++:(ql=0,Rp=r):ql=0,Fl(0)}}function oE(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,bl(i)))}function sf(r){return iE(),sE(),aE(),lE()}function lE(){if(Kt!==5)return!1;var r=ji,i=wp;wp=0;var o=wa(ao),u=K.T,h=ue.p;try{ue.p=32>o?32:o,K.T=null,o=Ip,Ip=null;var m=ji,T=ao;if(Kt=0,so=ji=null,ao=0,(We&6)!==0)throw Error(s(331));var S=We;if(We|=4,Gv(m.current),Fv(m,m.current,T,o),We=S,Fl(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(ht,m)}catch{}return!0}finally{ue.p=h,K.T=u,oE(r,i)}}function uE(r,i,o){i=Gn(o,i),i=sp(r.stateNode,i,2),r=Pi(r,i,2),r!==null&&($r(r,2),Mr(r))}function rt(r,i,o){if(r.tag===3)uE(r,r,o);else for(;i!==null;){if(i.tag===3){uE(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Hi===null||!Hi.has(u))){r=Gn(o,r),o=dv(2),u=Pi(i,o,2),u!==null&&(pv(o,u,i,r),$r(u,2),Mr(u));break}}i=i.return}}function Np(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new mR;var h=new Set;u.set(i,h)}else h=u.get(i),h===void 0&&(h=new Set,u.set(i,h));h.has(o)||(bp=!0,h.add(o),r=ER.bind(null,r,i,o),i.then(r,r))}function ER(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,it===r&&(ze&o)===o&&(pt===4||pt===3&&(ze&62914560)===ze&&300>Bn()-Ap?(We&2)===0&&oo(r,0):Tp|=o,io===ze&&(io=0)),Mr(r)}function cE(r,i){i===0&&(i=Xo()),r=Ha(r,i),r!==null&&($r(r,i),Mr(r))}function bR(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),cE(r,o)}function TR(r,i){var o=0;switch(r.tag){case 13:var u=r.stateNode,h=r.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),cE(r,o)}function SR(r,i){return Sn(r,i)}var af=null,uo=null,xp=!1,of=!1,Mp=!1,ra=0;function Mr(r){r!==uo&&r.next===null&&(uo===null?af=uo=r:uo=uo.next=r),of=!0,xp||(xp=!0,wR())}function Fl(r,i){if(!Mp&&of){Mp=!0;do for(var o=!1,u=af;u!==null;){if(r!==0){var h=u.pendingLanes;if(h===0)var m=0;else{var T=u.suspendedLanes,S=u.pingedLanes;m=(1<<31-tn(42|r)+1)-1,m&=h&~(T&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,pE(u,m))}else m=ze,m=Aa(u,u===it?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Cs(u,m)||(o=!0,pE(u,m));u=u.next}while(o);Mp=!1}}function AR(){fE()}function fE(){of=xp=!1;var r=0;ra!==0&&(MR()&&(r=ra),ra=0);for(var i=Bn(),o=null,u=af;u!==null;){var h=u.next,m=hE(u,i);m===0?(u.next=null,o===null?af=h:o.next=h,h===null&&(uo=o)):(o=u,(r!==0||(m&3)!==0)&&(of=!0)),u=h}Fl(r)}function hE(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,h=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var T=31-tn(m),S=1<<T,N=h[T];N===-1?((S&o)===0||(S&u)!==0)&&(h[T]=Qo(S,i)):N<=i&&(r.expiredLanes|=S),m&=~S}if(i=it,o=ze,o=Aa(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(Xe===2||Xe===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Ss(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Cs(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&Ss(u),wa(o)){case 2:case 8:o=Ta;break;case 32:o=As;break;case 268435456:o=Sa;break;default:o=As}return u=dE.bind(null,r),o=Sn(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&Ss(u),r.callbackPriority=2,r.callbackNode=null,2}function dE(r,i){if(Kt!==0&&Kt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(sf()&&r.callbackNode!==o)return null;var u=ze;return u=Aa(r,r===it?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(Qv(r,u,i),hE(r,Bn()),r.callbackNode!=null&&r.callbackNode===o?dE.bind(null,r):null)}function pE(r,i){if(sf())return null;Qv(r,i,!0)}function wR(){VR(function(){(We&6)!==0?Sn(Yo,AR):fE()})}function Pp(){return ra===0&&(ra=Wo()),ra}function mE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Na(""+r)}function gE(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function IR(r,i,o,u,h){if(i==="submit"&&o&&o.stateNode===h){var m=mE((h[St]||null).action),T=u.submitter;T&&(i=(i=T[St]||null)?mE(i.formAction):T.getAttribute("formAction"),i!==null&&(m=i,T=null));var S=new xa("action","action",null,u,h);r.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ra!==0){var N=T?gE(h,T):new FormData(h);ep(o,{pending:!0,data:N,method:h.method,action:m},null,N)}}else typeof m=="function"&&(S.preventDefault(),N=T?gE(h,T):new FormData(h),ep(o,{pending:!0,data:N,method:h.method,action:m},m,N))},currentTarget:h}]})}}for(var Vp=0;Vp<vd.length;Vp++){var Lp=vd[Vp],RR=Lp.toLowerCase(),CR=Lp[0].toUpperCase()+Lp.slice(1);lr(RR,"on"+CR)}lr(Qy,"onAnimationEnd"),lr(Wy,"onAnimationIteration"),lr(Xy,"onAnimationStart"),lr("dblclick","onDoubleClick"),lr("focusin","onFocus"),lr("focusout","onBlur"),lr(GI,"onTransitionRun"),lr($I,"onTransitionStart"),lr(YI,"onTransitionCancel"),lr(Zy,"onTransitionEnd"),Kr("onMouseEnter",["mouseout","mouseover"]),Kr("onMouseLeave",["mouseout","mouseover"]),Kr("onPointerEnter",["pointerout","pointerover"]),Kr("onPointerLeave",["pointerout","pointerover"]),ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ar("onBeforeInput",["compositionend","keypress","textInput","paste"]),ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hl));function yE(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],h=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var T=u.length-1;0<=T;T--){var S=u[T],N=S.instance,F=S.currentTarget;if(S=S.listener,N!==m&&h.isPropagationStopped())break e;m=S,h.currentTarget=F;try{m(h)}catch(Q){Yc(Q)}h.currentTarget=null,m=N}else for(T=0;T<u.length;T++){if(S=u[T],N=S.instance,F=S.currentTarget,S=S.listener,N!==m&&h.isPropagationStopped())break e;m=S,h.currentTarget=F;try{m(h)}catch(Q){Yc(Q)}h.currentTarget=null,m=N}}}}function Me(r,i){var o=i[el];o===void 0&&(o=i[el]=new Set);var u=r+"__bubble";o.has(u)||(_E(i,r,2,!1),o.add(u))}function kp(r,i,o){var u=0;i&&(u|=4),_E(o,r,u,i)}var lf="_reactListening"+Math.random().toString(36).slice(2);function Up(r){if(!r[lf]){r[lf]=!0,tl.forEach(function(o){o!=="selectionchange"&&(DR.has(o)||kp(o,!1,r),kp(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[lf]||(i[lf]=!0,kp("selectionchange",!1,i))}}function _E(r,i,o,u){switch(FE(i)){case 2:var h=n1;break;case 8:h=r1;break;default:h=Zp}o=h.bind(null,i,o,r),h=void 0,!Hn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),u?h!==void 0?r.addEventListener(i,o,{capture:!0,passive:h}):r.addEventListener(i,o,!0):h!==void 0?r.addEventListener(i,o,{passive:h}):r.addEventListener(i,o,!1)}function Bp(r,i,o,u,h){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var S=u.stateNode.containerInfo;if(S===h)break;if(T===4)for(T=u.return;T!==null;){var N=T.tag;if((N===3||N===4)&&T.stateNode.containerInfo===h)return;T=T.return}for(;S!==null;){if(T=Yr(S),T===null)return;if(N=T.tag,N===5||N===6||N===26||N===27){u=m=T;continue e}S=S.parentNode}}u=u.return}uc(function(){var F=m,Q=Fn(o),Z=[];e:{var H=Jy.get(r);if(H!==void 0){var j=xa,we=r;switch(r){case"keypress":if(Ar(o)===0)break e;case"keydown":case"keyup":j=Ua;break;case"focusin":we="focus",j=Va;break;case"focusout":we="blur",j=Va;break;case"beforeblur":case"afterblur":j=Va;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=jn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=fd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=yc;break;case Qy:case Wy:case Xy:j=La;break;case Zy:j=vc;break;case"scroll":case"scrollend":j=cc;break;case"wheel":j=Ba;break;case"copy":case"cut":case"paste":j=ka;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=dl;break;case"toggle":case"beforetoggle":j=bc}var Ee=(i&4)!==0,nt=!Ee&&(r==="scroll"||r==="scrollend"),B=Ee?H!==null?H+"Capture":null:H;Ee=[];for(var k=F,q;k!==null;){var W=k;if(q=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||q===null||B===null||(W=Ls(k,B),W!=null&&Ee.push(jl(k,W,q))),nt)break;k=k.return}0<Ee.length&&(H=new j(H,we,null,o,Q),Z.push({event:H,listeners:Ee}))}}if((i&7)===0){e:{if(H=r==="mouseover"||r==="pointerover",j=r==="mouseout"||r==="pointerout",H&&o!==Xr&&(we=o.relatedTarget||o.fromElement)&&(Yr(we)||we[zn]))break e;if((j||H)&&(H=Q.window===Q?Q:(H=Q.ownerDocument)?H.defaultView||H.parentWindow:window,j?(we=o.relatedTarget||o.toElement,j=F,we=we?Yr(we):null,we!==null&&(nt=l(we),Ee=we.tag,we!==nt||Ee!==5&&Ee!==27&&Ee!==6)&&(we=null)):(j=null,we=F),j!==we)){if(Ee=jn,W="onMouseLeave",B="onMouseEnter",k="mouse",(r==="pointerout"||r==="pointerover")&&(Ee=dl,W="onPointerLeave",B="onPointerEnter",k="pointer"),nt=j==null?H:Er(j),q=we==null?H:Er(we),H=new Ee(W,k+"leave",j,o,Q),H.target=nt,H.relatedTarget=q,W=null,Yr(Q)===F&&(Ee=new Ee(B,k+"enter",we,o,Q),Ee.target=q,Ee.relatedTarget=nt,W=Ee),nt=W,j&&we)t:{for(Ee=j,B=we,k=0,q=Ee;q;q=co(q))k++;for(q=0,W=B;W;W=co(W))q++;for(;0<k-q;)Ee=co(Ee),k--;for(;0<q-k;)B=co(B),q--;for(;k--;){if(Ee===B||B!==null&&Ee===B.alternate)break t;Ee=co(Ee),B=co(B)}Ee=null}else Ee=null;j!==null&&vE(Z,H,j,Ee,!1),we!==null&&nt!==null&&vE(Z,nt,we,Ee,!0)}}e:{if(H=F?Er(F):window,j=H.nodeName&&H.nodeName.toLowerCase(),j==="select"||j==="input"&&H.type==="file")var pe=Uy;else if(Mt(H))if(By)pe=FI;else{pe=zI;var Ne=BI}else j=H.nodeName,!j||j.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?F&&al(F.elementType)&&(pe=Uy):pe=qI;if(pe&&(pe=pe(r,F))){ni(Z,pe,o,Q);break e}Ne&&Ne(r,H,F),r==="focusout"&&F&&H.type==="number"&&F.memoizedProps.value!=null&&Di(H,"number",H.value)}switch(Ne=F?Er(F):window,r){case"focusin":(Mt(Ne)||Ne.contentEditable==="true")&&(za=Ne,gd=F,gl=null);break;case"focusout":gl=gd=za=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,Yy(Z,o,Q);break;case"selectionchange":if(jI)break;case"keydown":case"keyup":Yy(Z,o,Q)}var ge;if(Rr)e:{switch(r){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Ue?G(r,o)&&(Te="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Te="onCompositionStart");Te&&(b&&o.locale!=="ko"&&(Ue||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Ue&&(ge=ll()):(Sr=Q,Oi="value"in Sr?Sr.value:Sr.textContent,Ue=!0)),Ne=uf(F,Te),0<Ne.length&&(Te=new fl(Te,r,null,o,Q),Z.push({event:Te,listeners:Ne}),ge?Te.data=ge:(ge=oe(o),ge!==null&&(Te.data=ge)))),(ge=y?xt(r,o):Be(r,o))&&(Te=uf(F,"onBeforeInput"),0<Te.length&&(Ne=new fl("onBeforeInput","beforeinput",null,o,Q),Z.push({event:Ne,listeners:Te}),Ne.data=ge)),IR(Z,r,F,o,Q)}yE(Z,i)})}function jl(r,i,o){return{instance:r,listener:i,currentTarget:o}}function uf(r,i){for(var o=i+"Capture",u=[];r!==null;){var h=r,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=Ls(r,o),h!=null&&u.unshift(jl(r,h,m)),h=Ls(r,i),h!=null&&u.push(jl(r,h,m))),r.tag===3)return u;r=r.return}return[]}function co(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function vE(r,i,o,u,h){for(var m=i._reactName,T=[];o!==null&&o!==u;){var S=o,N=S.alternate,F=S.stateNode;if(S=S.tag,N!==null&&N===u)break;S!==5&&S!==26&&S!==27||F===null||(N=F,h?(F=Ls(o,m),F!=null&&T.unshift(jl(o,F,N))):h||(F=Ls(o,m),F!=null&&T.push(jl(o,F,N)))),o=o.return}T.length!==0&&r.push({event:i,listeners:T})}var OR=/\r\n?/g,NR=/\u0000|\uFFFD/g;function EE(r){return(typeof r=="string"?r:""+r).replace(OR,`
`).replace(NR,"")}function bE(r,i){return i=EE(i),EE(r)===i}function cf(){}function tt(r,i,o,u,h,m){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||qn(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&qn(r,""+u);break;case"className":br(r,"class",u);break;case"tabIndex":br(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":br(r,o,u);break;case"style":sl(r,u,m);break;case"data":if(i!=="object"){br(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Na(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&tt(r,i,"name",h.name,h,null),tt(r,i,"formEncType",h.formEncType,h,null),tt(r,i,"formMethod",h.formMethod,h,null),tt(r,i,"formTarget",h.formTarget,h,null)):(tt(r,i,"encType",h.encType,h,null),tt(r,i,"method",h.method,h,null),tt(r,i,"target",h.target,h,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Na(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=cf);break;case"onScroll":u!=null&&Me("scroll",r);break;case"onScrollEnd":u!=null&&Me("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(h.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Na(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Me("beforetoggle",r),Me("toggle",r),Ci(r,"popover",u);break;case"xlinkActuate":Gt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Gt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Gt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Gt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Gt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Gt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Gt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Gt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Gt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ci(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ud.get(o)||o,Ci(r,o,u))}}function zp(r,i,o,u,h,m){switch(o){case"style":sl(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(h.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"children":typeof u=="string"?qn(r,u):(typeof u=="number"||typeof u=="bigint")&&qn(r,""+u);break;case"onScroll":u!=null&&Me("scroll",r);break;case"onScrollEnd":u!=null&&Me("scrollend",r);break;case"onClick":u!=null&&(r.onclick=cf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ia.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),i=o.slice(2,h?o.length-7:void 0),m=r[St]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(i,m,h),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,h);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Ci(r,o,u)}}}function Qt(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",r),Me("load",r);var u=!1,h=!1,m;for(m in o)if(o.hasOwnProperty(m)){var T=o[m];if(T!=null)switch(m){case"src":u=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:tt(r,i,m,T,o,null)}}h&&tt(r,i,"srcSet",o.srcSet,o,null),u&&tt(r,i,"src",o.src,o,null);return;case"input":Me("invalid",r);var S=m=T=h=null,N=null,F=null;for(u in o)if(o.hasOwnProperty(u)){var Q=o[u];if(Q!=null)switch(u){case"name":h=Q;break;case"type":T=Q;break;case"checked":N=Q;break;case"defaultChecked":F=Q;break;case"value":m=Q;break;case"defaultValue":S=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:tt(r,i,u,Q,o,null)}}Ms(r,m,S,N,F,T,h,!1),Oa(r);return;case"select":Me("invalid",r),u=T=m=null;for(h in o)if(o.hasOwnProperty(h)&&(S=o[h],S!=null))switch(h){case"value":m=S;break;case"defaultValue":T=S;break;case"multiple":u=S;default:tt(r,i,h,S,o,null)}i=m,o=T,r.multiple=!!u,i!=null?Wr(r,!!u,i,!1):o!=null&&Wr(r,!!u,o,!0);return;case"textarea":Me("invalid",r),m=h=u=null;for(T in o)if(o.hasOwnProperty(T)&&(S=o[T],S!=null))switch(T){case"value":u=S;break;case"defaultValue":h=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:tt(r,i,T,S,o,null)}Ps(r,u,h,m),Oa(r);return;case"option":for(N in o)if(o.hasOwnProperty(N)&&(u=o[N],u!=null))switch(N){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tt(r,i,N,u,o,null)}return;case"dialog":Me("beforetoggle",r),Me("toggle",r),Me("cancel",r),Me("close",r);break;case"iframe":case"object":Me("load",r);break;case"video":case"audio":for(u=0;u<Hl.length;u++)Me(Hl[u],r);break;case"image":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"embed":case"source":case"link":Me("error",r),Me("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in o)if(o.hasOwnProperty(F)&&(u=o[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:tt(r,i,F,u,o,null)}return;default:if(al(i)){for(Q in o)o.hasOwnProperty(Q)&&(u=o[Q],u!==void 0&&zp(r,i,Q,u,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(u=o[S],u!=null&&tt(r,i,S,u,o,null))}function xR(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,T=null,S=null,N=null,F=null,Q=null;for(j in o){var Z=o[j];if(o.hasOwnProperty(j)&&Z!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":N=Z;default:u.hasOwnProperty(j)||tt(r,i,j,null,u,Z)}}for(var H in u){var j=u[H];if(Z=o[H],u.hasOwnProperty(H)&&(j!=null||Z!=null))switch(H){case"type":m=j;break;case"name":h=j;break;case"checked":F=j;break;case"defaultChecked":Q=j;break;case"value":T=j;break;case"defaultValue":S=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,i));break;default:j!==Z&&tt(r,i,H,j,u,Z)}}wn(r,T,S,N,F,Q,m,h);return;case"select":j=T=S=H=null;for(m in o)if(N=o[m],o.hasOwnProperty(m)&&N!=null)switch(m){case"value":break;case"multiple":j=N;default:u.hasOwnProperty(m)||tt(r,i,m,null,u,N)}for(h in u)if(m=u[h],N=o[h],u.hasOwnProperty(h)&&(m!=null||N!=null))switch(h){case"value":H=m;break;case"defaultValue":S=m;break;case"multiple":T=m;default:m!==N&&tt(r,i,h,m,u,N)}i=S,o=T,u=j,H!=null?Wr(r,!!o,H,!1):!!u!=!!o&&(i!=null?Wr(r,!!o,i,!0):Wr(r,!!o,o?[]:"",!1));return;case"textarea":j=H=null;for(S in o)if(h=o[S],o.hasOwnProperty(S)&&h!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:tt(r,i,S,null,u,h)}for(T in u)if(h=u[T],m=o[T],u.hasOwnProperty(T)&&(h!=null||m!=null))switch(T){case"value":H=h;break;case"defaultValue":j=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==m&&tt(r,i,T,h,u,m)}Je(r,H,j);return;case"option":for(var we in o)if(H=o[we],o.hasOwnProperty(we)&&H!=null&&!u.hasOwnProperty(we))switch(we){case"selected":r.selected=!1;break;default:tt(r,i,we,null,u,H)}for(N in u)if(H=u[N],j=o[N],u.hasOwnProperty(N)&&H!==j&&(H!=null||j!=null))switch(N){case"selected":r.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:tt(r,i,N,H,u,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in o)H=o[Ee],o.hasOwnProperty(Ee)&&H!=null&&!u.hasOwnProperty(Ee)&&tt(r,i,Ee,null,u,H);for(F in u)if(H=u[F],j=o[F],u.hasOwnProperty(F)&&H!==j&&(H!=null||j!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:tt(r,i,F,H,u,j)}return;default:if(al(i)){for(var nt in o)H=o[nt],o.hasOwnProperty(nt)&&H!==void 0&&!u.hasOwnProperty(nt)&&zp(r,i,nt,void 0,u,H);for(Q in u)H=u[Q],j=o[Q],!u.hasOwnProperty(Q)||H===j||H===void 0&&j===void 0||zp(r,i,Q,H,u,j);return}}for(var B in o)H=o[B],o.hasOwnProperty(B)&&H!=null&&!u.hasOwnProperty(B)&&tt(r,i,B,null,u,H);for(Z in u)H=u[Z],j=o[Z],!u.hasOwnProperty(Z)||H===j||H==null&&j==null||tt(r,i,Z,H,u,j)}var qp=null,Fp=null;function ff(r){return r.nodeType===9?r:r.ownerDocument}function TE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function SE(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Hp(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var jp=null;function MR(){var r=window.event;return r&&r.type==="popstate"?r===jp?!1:(jp=r,!0):(jp=null,!1)}var AE=typeof setTimeout=="function"?setTimeout:void 0,PR=typeof clearTimeout=="function"?clearTimeout:void 0,wE=typeof Promise=="function"?Promise:void 0,VR=typeof queueMicrotask=="function"?queueMicrotask:typeof wE<"u"?function(r){return wE.resolve(null).then(r).catch(LR)}:AE;function LR(r){setTimeout(function(){throw r})}function $i(r){return r==="head"}function IE(r,i){var o=i,u=0,h=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var T=r.ownerDocument;if(o&1&&Gl(T.documentElement),o&2&&Gl(T.body),o&4)for(o=T.head,Gl(o),T=o.firstChild;T;){var S=T.nextSibling,N=T.nodeName;T[Ds]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&T.rel.toLowerCase()==="stylesheet"||o.removeChild(T),T=S}}if(h===0){r.removeChild(m),Jl(i);return}h--}else o==="$"||o==="$?"||o==="$!"?h++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);Jl(i)}function Gp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Gp(o),Ri(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function kR(r,i,o,u){for(;r.nodeType===1;){var h=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Ds])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==h.rel||r.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||r.getAttribute("title")!==(h.title==null?null:h.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(h.src==null?null:h.src)||r.getAttribute("type")!==(h.type==null?null:h.type)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=cr(r.nextSibling),r===null)break}return null}function UR(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=cr(r.nextSibling),r===null))return null;return r}function $p(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function BR(r,i){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function cr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return r}var Yp=null;function RE(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return r;i--}else o==="/$"&&i++}r=r.previousSibling}return null}function CE(r,i,o){switch(i=ff(o),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Gl(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Ri(r)}var Xn=new Map,DE=new Set;function hf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var mi=ue.d;ue.d={f:zR,r:qR,D:FR,C:HR,L:jR,m:GR,X:YR,S:$R,M:KR};function zR(){var r=mi.f(),i=nf();return r||i}function qR(r){var i=vr(r);i!==null&&i.tag===5&&i.type==="form"?Q_(i):mi.r(r)}var fo=typeof document>"u"?null:document;function OE(r,i,o){var u=fo;if(u&&typeof i=="string"&&i){var h=At(i);h='link[rel="'+r+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),DE.has(h)||(DE.add(h),r={rel:r,crossOrigin:o,href:i},u.querySelector(h)===null&&(i=u.createElement("link"),Qt(i,"link",r),yt(i),u.head.appendChild(i)))}}function FR(r){mi.D(r),OE("dns-prefetch",r,null)}function HR(r,i){mi.C(r,i),OE("preconnect",r,i)}function jR(r,i,o){mi.L(r,i,o);var u=fo;if(u&&r&&i){var h='link[rel="preload"][as="'+At(i)+'"]';i==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+At(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+At(o.imageSizes)+'"]')):h+='[href="'+At(r)+'"]';var m=h;switch(i){case"style":m=ho(r);break;case"script":m=po(r)}Xn.has(m)||(r=_({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),Xn.set(m,r),u.querySelector(h)!==null||i==="style"&&u.querySelector($l(m))||i==="script"&&u.querySelector(Yl(m))||(i=u.createElement("link"),Qt(i,"link",r),yt(i),u.head.appendChild(i)))}}function GR(r,i){mi.m(r,i);var o=fo;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+At(u)+'"][href="'+At(r)+'"]',m=h;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=po(r)}if(!Xn.has(m)&&(r=_({rel:"modulepreload",href:r},i),Xn.set(m,r),o.querySelector(h)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Yl(m)))return}u=o.createElement("link"),Qt(u,"link",r),yt(u),o.head.appendChild(u)}}}function $R(r,i,o){mi.S(r,i,o);var u=fo;if(u&&r){var h=cn(u).hoistableStyles,m=ho(r);i=i||"default";var T=h.get(m);if(!T){var S={loading:0,preload:null};if(T=u.querySelector($l(m)))S.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":i},o),(o=Xn.get(m))&&Kp(r,o);var N=T=u.createElement("link");yt(N),Qt(N,"link",r),N._p=new Promise(function(F,Q){N.onload=F,N.onerror=Q}),N.addEventListener("load",function(){S.loading|=1}),N.addEventListener("error",function(){S.loading|=2}),S.loading|=4,df(T,i,u)}T={type:"stylesheet",instance:T,count:1,state:S},h.set(m,T)}}}function YR(r,i){mi.X(r,i);var o=fo;if(o&&r){var u=cn(o).hoistableScripts,h=po(r),m=u.get(h);m||(m=o.querySelector(Yl(h)),m||(r=_({src:r,async:!0},i),(i=Xn.get(h))&&Qp(r,i),m=o.createElement("script"),yt(m),Qt(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function KR(r,i){mi.M(r,i);var o=fo;if(o&&r){var u=cn(o).hoistableScripts,h=po(r),m=u.get(h);m||(m=o.querySelector(Yl(h)),m||(r=_({src:r,async:!0,type:"module"},i),(i=Xn.get(h))&&Qp(r,i),m=o.createElement("script"),yt(m),Qt(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function NE(r,i,o,u){var h=(h=be.current)?hf(h):null;if(!h)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=ho(o.href),o=cn(h).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=ho(o.href);var m=cn(h).hoistableStyles,T=m.get(r);if(T||(h=h.ownerDocument||h,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,T),(m=h.querySelector($l(r)))&&!m._p&&(T.instance=m,T.state.loading=5),Xn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Xn.set(r,o),m||QR(h,r,o,T.state))),i&&u===null)throw Error(s(528,""));return T}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=po(o),o=cn(h).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function ho(r){return'href="'+At(r)+'"'}function $l(r){return'link[rel="stylesheet"]['+r+"]"}function xE(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function QR(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Qt(i,"link",o),yt(i),r.head.appendChild(i))}function po(r){return'[src="'+At(r)+'"]'}function Yl(r){return"script[async]"+r}function ME(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+At(o.href)+'"]');if(u)return i.instance=u,yt(u),u;var h=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),yt(u),Qt(u,"style",h),df(u,o.precedence,r),i.instance=u;case"stylesheet":h=ho(o.href);var m=r.querySelector($l(h));if(m)return i.state.loading|=4,i.instance=m,yt(m),m;u=xE(o),(h=Xn.get(h))&&Kp(u,h),m=(r.ownerDocument||r).createElement("link"),yt(m);var T=m;return T._p=new Promise(function(S,N){T.onload=S,T.onerror=N}),Qt(m,"link",u),i.state.loading|=4,df(m,o.precedence,r),i.instance=m;case"script":return m=po(o.src),(h=r.querySelector(Yl(m)))?(i.instance=h,yt(h),h):(u=o,(h=Xn.get(m))&&(u=_({},o),Qp(u,h)),r=r.ownerDocument||r,h=r.createElement("script"),yt(h),Qt(h,"link",u),r.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,df(u,o.precedence,r));return i.instance}function df(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=u.length?u[u.length-1]:null,m=h,T=0;T<u.length;T++){var S=u[T];if(S.dataset.precedence===i)m=S;else if(m!==h)break}m?m.parentNode.insertBefore(r,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Kp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Qp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var pf=null;function PE(r,i,o){if(pf===null){var u=new Map,h=pf=new Map;h.set(o,u)}else h=pf,u=h.get(o),u||(u=new Map,h.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),h=0;h<o.length;h++){var m=o[h];if(!(m[Ds]||m[Nt]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var T=m.getAttribute(i)||"";T=r+T;var S=u.get(T);S?S.push(m):u.set(T,[m])}}return u}function VE(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function WR(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function LE(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Kl=null;function XR(){}function ZR(r,i,o){if(Kl===null)throw Error(s(475));var u=Kl;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=ho(o.href),m=r.querySelector($l(h));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=mf.bind(u),r.then(u,u)),i.state.loading|=4,i.instance=m,yt(m);return}m=r.ownerDocument||r,o=xE(o),(h=Xn.get(h))&&Kp(o,h),m=m.createElement("link"),yt(m);var T=m;T._p=new Promise(function(S,N){T.onload=S,T.onerror=N}),Qt(m,"link",o),i.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=mf.bind(u),r.addEventListener("load",i),r.addEventListener("error",i))}}function JR(){if(Kl===null)throw Error(s(475));var r=Kl;return r.stylesheets&&r.count===0&&Wp(r,r.stylesheets),0<r.count?function(i){var o=setTimeout(function(){if(r.stylesheets&&Wp(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=i,function(){r.unsuspend=null,clearTimeout(o)}}:null}function mf(){if(this.count--,this.count===0){if(this.stylesheets)Wp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var gf=null;function Wp(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,gf=new Map,i.forEach(e1,r),gf=null,mf.call(r))}function e1(r,i){if(!(i.state.loading&4)){var o=gf.get(r);if(o)var u=o.get(null);else{o=new Map,gf.set(r,o);for(var h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var T=h[m];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),u=T)}u&&o.set(null,u)}h=i.instance,T=h.getAttribute("data-precedence"),m=o.get(T)||u,m===u&&o.set(null,h),o.set(T,h),this.count++,u=mf.bind(this),h.addEventListener("load",u),h.addEventListener("error",u),m?m.parentNode.insertBefore(h,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(h,r.firstChild)),i.state.loading|=4}}var Ql={$$typeof:te,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function t1(r,i,o,u,h,m,T,S){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gr(0),this.hiddenUpdates=Gr(null),this.identifierPrefix=u,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function kE(r,i,o,u,h,m,T,S,N,F,Q,Z){return r=new t1(r,i,o,T,S,N,F,Z),i=1,m===!0&&(i|=24),m=Rn(3,null,null,i),r.current=m,m.stateNode=r,i=Nd(),i.refCount++,r.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:i},Vd(m),r}function UE(r){return r?(r=ja,r):ja}function BE(r,i,o,u,h,m){h=UE(h),u.context===null?u.context=h:u.pendingContext=h,u=Mi(i),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Pi(r,u,i),o!==null&&(xn(o,r,i),wl(o,r,i))}function zE(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function Xp(r,i){zE(r,i),(r=r.alternate)&&zE(r,i)}function qE(r){if(r.tag===13){var i=Ha(r,67108864);i!==null&&xn(i,r,67108864),Xp(r,67108864)}}var yf=!0;function n1(r,i,o,u){var h=K.T;K.T=null;var m=ue.p;try{ue.p=2,Zp(r,i,o,u)}finally{ue.p=m,K.T=h}}function r1(r,i,o,u){var h=K.T;K.T=null;var m=ue.p;try{ue.p=8,Zp(r,i,o,u)}finally{ue.p=m,K.T=h}}function Zp(r,i,o,u){if(yf){var h=Jp(u);if(h===null)Bp(r,i,u,_f,o),HE(r,u);else if(s1(h,r,i,o,u))u.stopPropagation();else if(HE(r,u),i&4&&-1<i1.indexOf(r)){for(;h!==null;){var m=vr(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var T=sr(m.pendingLanes);if(T!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;T;){var N=1<<31-tn(T);S.entanglements[1]|=N,T&=~N}Mr(m),(We&6)===0&&(ef=Bn()+500,Fl(0))}}break;case 13:S=Ha(m,2),S!==null&&xn(S,m,2),nf(),Xp(m,2)}if(m=Jp(u),m===null&&Bp(r,i,u,_f,o),m===h)break;h=m}h!==null&&u.stopPropagation()}else Bp(r,i,u,null,o)}}function Jp(r){return r=Fn(r),em(r)}var _f=null;function em(r){if(_f=null,r=Yr(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return _f=r,null}function FE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rd()){case Yo:return 2;case Ta:return 8;case As:case id:return 32;case Sa:return 268435456;default:return 32}default:return 32}}var tm=!1,Yi=null,Ki=null,Qi=null,Wl=new Map,Xl=new Map,Wi=[],i1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function HE(r,i){switch(r){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Ki=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":Wl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(i.pointerId)}}function Zl(r,i,o,u,h,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[h]},i!==null&&(i=vr(i),i!==null&&qE(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),r)}function s1(r,i,o,u,h){switch(i){case"focusin":return Yi=Zl(Yi,r,i,o,u,h),!0;case"dragenter":return Ki=Zl(Ki,r,i,o,u,h),!0;case"mouseover":return Qi=Zl(Qi,r,i,o,u,h),!0;case"pointerover":var m=h.pointerId;return Wl.set(m,Zl(Wl.get(m)||null,r,i,o,u,h)),!0;case"gotpointercapture":return m=h.pointerId,Xl.set(m,Zl(Xl.get(m)||null,r,i,o,u,h)),!0}return!1}function jE(r){var i=Yr(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,nc(r.priority,function(){if(o.tag===13){var u=Nn();u=Ai(u);var h=Ha(o,u);h!==null&&xn(h,o,u),Xp(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function vf(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Jp(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Xr=u,o.target.dispatchEvent(u),Xr=null}else return i=vr(o),i!==null&&qE(i),r.blockedOn=o,!1;i.shift()}return!0}function GE(r,i,o){vf(r)&&o.delete(i)}function a1(){tm=!1,Yi!==null&&vf(Yi)&&(Yi=null),Ki!==null&&vf(Ki)&&(Ki=null),Qi!==null&&vf(Qi)&&(Qi=null),Wl.forEach(GE),Xl.forEach(GE)}function Ef(r,i){r.blockedOn===i&&(r.blockedOn=null,tm||(tm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,a1)))}var bf=null;function $E(r){bf!==r&&(bf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){bf===r&&(bf=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],h=r[i+2];if(typeof u!="function"){if(em(u||o)===null)continue;break}var m=vr(o);m!==null&&(r.splice(i,3),i-=3,ep(m,{pending:!0,data:h,method:o.method,action:u},u,h))}}))}function Jl(r){function i(N){return Ef(N,r)}Yi!==null&&Ef(Yi,r),Ki!==null&&Ef(Ki,r),Qi!==null&&Ef(Qi,r),Wl.forEach(i),Xl.forEach(i);for(var o=0;o<Wi.length;o++){var u=Wi[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Wi.length&&(o=Wi[0],o.blockedOn===null);)jE(o),o.blockedOn===null&&Wi.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var h=o[u],m=o[u+1],T=h[St]||null;if(typeof m=="function")T||$E(o);else if(T){var S=null;if(m&&m.hasAttribute("formAction")){if(h=m,T=m[St]||null)S=T.formAction;else if(em(h)!==null)continue}else S=T.action;typeof S=="function"?o[u+1]=S:(o.splice(u,3),u-=3),$E(o)}}}function nm(r){this._internalRoot=r}Tf.prototype.render=nm.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,u=Nn();BE(o,u,r,i,null,null)},Tf.prototype.unmount=nm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;BE(r.current,2,null,r,null,null),nf(),i[zn]=null}};function Tf(r){this._internalRoot=r}Tf.prototype.unstable_scheduleHydration=function(r){if(r){var i=wi();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Wi.length&&i!==0&&i<Wi[o].priority;o++);Wi.splice(o,0,r),o===0&&jE(r)}};var YE=e.version;if(YE!=="19.1.0")throw Error(s(527,YE,"19.1.0"));ue.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=p(i),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var o1={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sf.isDisabled&&Sf.supportsFiber)try{ht=Sf.inject(o1),Qe=Sf}catch{}}return tu.createRoot=function(r,i){if(!a(r))throw Error(s(299));var o=!1,u="",h=uv,m=cv,T=fv,S=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(S=i.unstable_transitionCallbacks)),i=kE(r,1,!1,null,null,o,u,h,m,T,S,null),r[zn]=i.current,Up(r),new nm(i)},tu.hydrateRoot=function(r,i,o){if(!a(r))throw Error(s(299));var u=!1,h="",m=uv,T=cv,S=fv,N=null,F=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(N=o.unstable_transitionCallbacks),o.formState!==void 0&&(F=o.formState)),i=kE(r,1,!0,i,o??null,u,h,m,T,S,N,F),i.context=UE(null),o=i.current,u=Nn(),u=Ai(u),h=Mi(u),h.callback=null,Pi(o,h,u),o=u,i.current.lanes=o,$r(i,o),Mr(i),r[zn]=i.current,Up(r),new Tf(i)},tu.version="19.1.0",tu}var rb;function g1(){if(rb)return sm.exports;rb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sm.exports=m1(),sm.exports}var y1=g1();const _1=()=>{};var ib={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},v1=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},PS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,p=a+2<n.length,g=p?n[a+2]:0,_=l>>2,E=(l&3)<<4|d>>4;let v=(d&15)<<2|g>>6,A=g&63;p||(A=64,c||(v=64)),s.push(t[_],t[E],t[v],t[A])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(MS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):v1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const E=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||g==null||E==null)throw new E1;const v=l<<2|d>>4;if(s.push(v),g!==64){const A=d<<4&240|g>>2;if(s.push(A),E!==64){const O=g<<6&192|E;s.push(O)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class E1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const b1=function(n){const e=MS(n);return PS.encodeByteArray(e,!0)},jf=function(n){return b1(n).replace(/\./g,"")},VS=function(n){try{return PS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=()=>T1().__FIREBASE_DEFAULTS__,A1=()=>{if(typeof process>"u"||typeof ib>"u")return;const n=ib.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},w1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&VS(n[1]);return e&&JSON.parse(e)},Th=()=>{try{return _1()||S1()||A1()||w1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},LS=n=>Th()?.emulatorHosts?.[n],I1=n=>{const e=LS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},kS=()=>Th()?.config,US=n=>Th()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function BS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[jf(JSON.stringify(t)),jf(JSON.stringify(c)),""].join(".")}const fu={};function D1(){const n={prod:[],emulator:[]};for(const e of Object.keys(fu))fu[e]?n.emulator.push(e):n.prod.push(e);return n}function O1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let sb=!1;function zS(n,e){if(typeof window>"u"||typeof document>"u"||!Vo(window.location.host)||fu[n]===e||fu[n]||sb)return;fu[n]=e;function t(v){return`__firebase__banner__${v}`}const s="__firebase__banner",l=D1().prod.length>0;function c(){const v=document.getElementById(s);v&&v.remove()}function d(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function p(v,A){v.setAttribute("width","24"),v.setAttribute("id",A),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function g(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{sb=!0,c()},v}function _(v,A){v.setAttribute("id",A),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function E(){const v=O1(s),A=t("text"),O=document.getElementById(A)||document.createElement("span"),L=t("learnmore"),x=document.getElementById(L)||document.createElement("a"),$=t("preprendIcon"),Y=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const te=v.element;d(te),_(x,L);const ae=g();p(Y,$),te.append(Y,O,x,ae),document.body.appendChild(te)}l?(O.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function N1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function x1(){const n=Th()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function P1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function V1(){const n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function L1(){return!x1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FS(){try{return typeof indexedDB=="object"}catch{return!1}}function HS(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}function k1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="FirebaseError";class gr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=U1,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ga.prototype.create)}}class ga{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?B1(l,s):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new gr(a,d,s)}}function B1(n,e){return n.replace(z1,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const z1=/\{\$([^}]+)}/g;function q1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function cs(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=n[a],c=e[a];if(ab(l)&&ab(c)){if(!cs(l,c))return!1}else if(l!==c)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function ab(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function su(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function au(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function F1(n,e){const t=new H1(n,e);return t.subscribe.bind(t)}class H1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");j1(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=um),a.error===void 0&&(a.error=um),a.complete===void 0&&(a.complete=um);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function j1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function um(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=1e3,$1=2,Y1=4*60*60*1e3,K1=.5;function ob(n,e=G1,t=$1){const s=e*Math.pow(t,n),a=Math.round(K1*s*(Math.random()-.5)*2);return Math.min(Y1,s+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(n){return n&&n._delegate?n._delegate:n}class dr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q1=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new R1;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(X1(e))try{this.getOrInitializeService({instanceIdentifier:sa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sa){return this.instances.has(e)}getOptions(e=sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&c.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:W1(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=sa){return this.component?this.component.multipleInstances?e:sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function W1(n){return n===sa?void 0:n}function X1(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Q1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pe||(Pe={}));const J1={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},eC=Pe.INFO,tC={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},nC=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=tC[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sh{constructor(e){this.name=e,this._logLevel=eC,this._logHandler=nC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?J1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const rC=(n,e)=>e.some(t=>n instanceof t);let lb,ub;function iC(){return lb||(lb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sC(){return ub||(ub=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jS=new WeakMap,km=new WeakMap,GS=new WeakMap,cm=new WeakMap,vg=new WeakMap;function aC(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(is(n.result)),a()},c=()=>{s(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&jS.set(t,n)}).catch(()=>{}),vg.set(e,n),e}function oC(n){if(km.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});km.set(n,e)}let Um={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return km.get(n);if(e==="objectStoreNames")return n.objectStoreNames||GS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return is(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function lC(n){Um=n(Um)}function uC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(fm(this),e,...t);return GS.set(s,e.sort?e.sort():[e]),is(s)}:sC().includes(n)?function(...e){return n.apply(fm(this),e),is(jS.get(this))}:function(...e){return is(n.apply(fm(this),e))}}function cC(n){return typeof n=="function"?uC(n):(n instanceof IDBTransaction&&oC(n),rC(n,iC())?new Proxy(n,Um):n)}function is(n){if(n instanceof IDBRequest)return aC(n);if(cm.has(n))return cm.get(n);const e=cC(n);return e!==n&&(cm.set(n,e),vg.set(e,n)),e}const fm=n=>vg.get(n);function $S(n,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=is(c);return s&&c.addEventListener("upgradeneeded",p=>{s(is(c.result),p.oldVersion,p.newVersion,is(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const fC=["get","getKey","getAll","getAllKeys","count"],hC=["put","add","delete","clear"],hm=new Map;function cb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hm.get(e))return hm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=hC.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||fC.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return hm.set(e,l),l}lC(n=>({...n,get:(e,t,s)=>cb(e,t)||n.get(e,t,s),has:(e,t)=>!!cb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(pC(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function pC(n){return n.getComponent()?.type==="VERSION"}const Bm="@firebase/app",fb="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new Sh("@firebase/app"),mC="@firebase/app-compat",gC="@firebase/analytics-compat",yC="@firebase/analytics",_C="@firebase/app-check-compat",vC="@firebase/app-check",EC="@firebase/auth",bC="@firebase/auth-compat",TC="@firebase/database",SC="@firebase/data-connect",AC="@firebase/database-compat",wC="@firebase/functions",IC="@firebase/functions-compat",RC="@firebase/installations",CC="@firebase/installations-compat",DC="@firebase/messaging",OC="@firebase/messaging-compat",NC="@firebase/performance",xC="@firebase/performance-compat",MC="@firebase/remote-config",PC="@firebase/remote-config-compat",VC="@firebase/storage",LC="@firebase/storage-compat",kC="@firebase/firestore",UC="@firebase/ai",BC="@firebase/firestore-compat",zC="firebase",qC="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="[DEFAULT]",FC={[Bm]:"fire-core",[mC]:"fire-core-compat",[yC]:"fire-analytics",[gC]:"fire-analytics-compat",[vC]:"fire-app-check",[_C]:"fire-app-check-compat",[EC]:"fire-auth",[bC]:"fire-auth-compat",[TC]:"fire-rtdb",[SC]:"fire-data-connect",[AC]:"fire-rtdb-compat",[wC]:"fire-fn",[IC]:"fire-fn-compat",[RC]:"fire-iid",[CC]:"fire-iid-compat",[DC]:"fire-fcm",[OC]:"fire-fcm-compat",[NC]:"fire-perf",[xC]:"fire-perf-compat",[MC]:"fire-rc",[PC]:"fire-rc-compat",[VC]:"fire-gcs",[LC]:"fire-gcs-compat",[kC]:"fire-fst",[BC]:"fire-fst-compat",[UC]:"fire-vertex","fire-js":"fire-js",[zC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=new Map,HC=new Map,qm=new Map;function hb(n,e){try{n.container.addComponent(e)}catch(t){Ei.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fr(n){const e=n.name;if(qm.has(e))return Ei.debug(`There were multiple attempts to register component ${e}.`),!1;qm.set(e,n);for(const t of Gf.values())hb(t,n);for(const t of HC.values())hb(t,n);return!0}function ya(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Jn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ss=new ga("app","Firebase",jC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=qC;function YS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:zm,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw ss.create("bad-app-name",{appName:String(a)});if(t||(t=kS()),!t)throw ss.create("no-options");const l=Gf.get(a);if(l){if(cs(t,l.options)&&cs(s,l.config))return l;throw ss.create("duplicate-app",{appName:a})}const c=new Z1(a);for(const p of qm.values())c.addComponent(p);const d=new GC(t,s,c);return Gf.set(a,d),d}function Eg(n=zm){const e=Gf.get(n);if(!e&&n===zm&&kS())return YS();if(!e)throw ss.create("no-app",{appName:n});return e}function nr(n,e,t){let s=FC[n]??n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ei.warn(c.join(" "));return}Fr(new dr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="firebase-heartbeat-database",YC=1,Eu="firebase-heartbeat-store";let dm=null;function KS(){return dm||(dm=$S($C,YC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Eu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ss.create("idb-open",{originalErrorMessage:n.message})})),dm}async function KC(n){try{const t=(await KS()).transaction(Eu),s=await t.objectStore(Eu).get(QS(n));return await t.done,s}catch(e){if(e instanceof gr)Ei.warn(e.message);else{const t=ss.create("idb-get",{originalErrorMessage:e?.message});Ei.warn(t.message)}}}async function db(n,e){try{const s=(await KS()).transaction(Eu,"readwrite");await s.objectStore(Eu).put(e,QS(n)),await s.done}catch(t){if(t instanceof gr)Ei.warn(t.message);else{const s=ss.create("idb-set",{originalErrorMessage:t?.message});Ei.warn(s.message)}}}function QS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=1024,WC=30;class XC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new JC(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=pb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>WC){const a=eD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ei.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=pb(),{heartbeatsToSend:t,unsentEntries:s}=ZC(this._heartbeatsCache.heartbeats),a=jf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ei.warn(e),""}}}function pb(){return new Date().toISOString().substring(0,10)}function ZC(n,e=QC){const t=[];let s=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),mb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),mb(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class JC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FS()?HS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await KC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return db(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return db(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function mb(n){return jf(JSON.stringify({version:2,heartbeats:n})).length}function eD(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(n){Fr(new dr("platform-logger",e=>new dC(e),"PRIVATE")),Fr(new dr("heartbeat",e=>new XC(e),"PRIVATE")),nr(Bm,fb,n),nr(Bm,fb,"esm2020"),nr("fire-js","")}tD("");var nD="firebase",rD="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr(nD,rD,"app");function WS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iD=WS,XS=new ga("auth","Firebase",WS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=new Sh("@firebase/auth");function sD(n,...e){$f.logLevel<=Pe.WARN&&$f.warn(`Auth (${Lo}): ${n}`,...e)}function Mf(n,...e){$f.logLevel<=Pe.ERROR&&$f.error(`Auth (${Lo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(n,...e){throw bg(n,...e)}function Lr(n,...e){return bg(n,...e)}function ZS(n,e,t){const s={...iD(),[e]:t};return new ga("auth","Firebase",s).create(e,{appName:n.name})}function _i(n){return ZS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bg(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return XS.create(n,...e)}function Se(n,e,...t){if(!n)throw bg(e,...t)}function gi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Mf(e),new Error(e)}function bi(n,e){n||gi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(){return typeof self<"u"&&self.location?.href||""}function aD(){return gb()==="http:"||gb()==="https:"}function gb(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aD()||qS()||"connection"in navigator)?navigator.onLine:!0}function lD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,t){this.shortDelay=e,this.longDelay=t,bi(t>e,"Short delay should be less than long delay!"),this.isMobile=N1()||P1()}get(){return oD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(n,e){bi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fD=new zu(3e4,6e4);function vs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Es(n,e,t,s,a={}){return eA(n,a,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const d=Bu({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...l};return M1()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Vo(n.emulatorConfig.host)&&(g.credentials="include"),JS.fetch()(await tA(n,n.config.apiHost,t,d),g)})}async function eA(n,e,t){n._canInitEmulator=!1;const s={...uD,...e};try{const a=new dD(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Af(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Af(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Af(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Af(n,"user-disabled",c);const _=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw ZS(n,_,g);pr(n,_)}}catch(a){if(a instanceof gr)throw a;pr(n,"network-request-failed",{message:String(a)})}}async function qu(n,e,t,s,a={}){const l=await Es(n,e,t,s,a);return"mfaPendingCredential"in l&&pr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function tA(n,e,t,s){const a=`${e}${t}?${s}`,l=n,c=l.config.emulator?Tg(n.config,a):`${n.config.apiScheme}://${a}`;return cD.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function hD(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Lr(this.auth,"network-request-failed")),fD.get())})}}function Af(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Lr(n,e,s);return a.customData._tokenResponse=t,a}function yb(n){return n!==void 0&&n.enterprise!==void 0}class pD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return hD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mD(n,e){return Es(n,"GET","/v2/recaptchaConfig",vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gD(n,e){return Es(n,"POST","/v1/accounts:delete",e)}async function Yf(n,e){return Es(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yD(n,e=!1){const t=mt(n),s=await t.getIdToken(e),a=Sg(s);Se(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:s,authTime:hu(pm(a.auth_time)),issuedAtTime:hu(pm(a.iat)),expirationTime:hu(pm(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function pm(n){return Number(n)*1e3}function Sg(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Mf("JWT malformed, contained fewer than 3 sections"),null;try{const a=VS(t);return a?JSON.parse(a):(Mf("Failed to decode base64 JWT payload"),null)}catch(a){return Mf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function _b(n){const e=Sg(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof gr&&_D(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function _D({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hu(this.lastLoginAt),this.creationTime=hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kf(n){const e=n.auth,t=await n.getIdToken(),s=await bu(n,Yf(e,{idToken:t}));Se(s?.users.length,e,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?nA(a.providerUserInfo):[],c=bD(n.providerData,l),d=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!c?.length,g=d?p:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Hm(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,_)}async function ED(n){const e=mt(n);await Kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bD(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function nA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(n,e){const t=await eA(n,{},async()=>{const s=Bu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await tA(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:s};return n.emulatorConfig&&Vo(n.emulatorConfig.host)&&(p.credentials="include"),JS.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function SD(n,e){return Es(n,"POST","/v2/accounts:revokeToken",vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_b(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=_b(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await TD(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,c=new Eo;return s&&(Se(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),a&&(Se(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Se(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fr{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new vD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Hm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await bu(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return yD(this,e)}reload(){return ED(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Kf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jn(this.auth.app))return Promise.reject(_i(this.auth));const e=await this.getIdToken();return await bu(this,gD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:v,isAnonymous:A,providerData:O,stsTokenManager:L}=t;Se(E&&L,e,"internal-error");const x=Eo.fromJSON(this.name,L);Se(typeof E=="string",e,"internal-error"),Zi(s,e.name),Zi(a,e.name),Se(typeof v=="boolean",e,"internal-error"),Se(typeof A=="boolean",e,"internal-error"),Zi(l,e.name),Zi(c,e.name),Zi(d,e.name),Zi(p,e.name),Zi(g,e.name),Zi(_,e.name);const $=new fr({uid:E,auth:e,email:a,emailVerified:v,displayName:s,isAnonymous:A,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:x,createdAt:g,lastLoginAt:_});return O&&Array.isArray(O)&&($.providerData=O.map(Y=>({...Y}))),p&&($._redirectEventId=p),$}static async _fromIdTokenResponse(e,t,s=!1){const a=new Eo;a.updateFromServerResponse(t);const l=new fr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Kf(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Se(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?nA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Eo;d.updateFromIdToken(s);const p=new fr({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Hm(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=new Map;function yi(n){bi(n instanceof Function,"Expected a class definition");let e=vb.get(n);return e?(bi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,vb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rA.type="NONE";const Eb=rA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(n,e,t){return`firebase:${n}:${e}:${t}`}class bo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=Pf(this.userKey,a.apiKey,l),this.fullPersistenceKey=Pf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Yf(this.auth,{idToken:e}).catch(()=>{});return t?fr._fromGetAccountInfoResponse(this.auth,t,e):null}return fr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new bo(yi(Eb),e,s);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||yi(Eb);const c=Pf(s,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let E;if(typeof _=="string"){const v=await Yf(e,{idToken:_}).catch(()=>{});if(!v)break;E=await fr._fromGetAccountInfoResponse(e,v,_)}else E=fr._fromJSON(e,_);g!==l&&(d=E),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new bo(l,e,s):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new bo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uA(e))return"Blackberry";if(cA(e))return"Webos";if(sA(e))return"Safari";if((e.includes("chrome/")||aA(e))&&!e.includes("edge/"))return"Chrome";if(lA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function iA(n=ln()){return/firefox\//i.test(n)}function sA(n=ln()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aA(n=ln()){return/crios\//i.test(n)}function oA(n=ln()){return/iemobile/i.test(n)}function lA(n=ln()){return/android/i.test(n)}function uA(n=ln()){return/blackberry/i.test(n)}function cA(n=ln()){return/webos/i.test(n)}function Ag(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function AD(n=ln()){return Ag(n)&&!!window.navigator?.standalone}function wD(){return V1()&&document.documentMode===10}function fA(n=ln()){return Ag(n)||lA(n)||cA(n)||uA(n)||/windows phone/i.test(n)||oA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(n,e=[]){let t;switch(n){case"Browser":t=bb(ln());break;case"Worker":t=`${bb(ln())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Lo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(n,e={}){return Es(n,"GET","/v2/passwordPolicy",vs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=6;class DD{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??CD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tb(this),this.idTokenSubscription=new Tb(this),this.beforeStateQueue=new ID(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Yf(this,{idToken:e}),s=await fr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Jn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(s=d.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Kf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jn(this.app))return Promise.reject(_i(this));const t=e?mt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jn(this.app)?Promise.reject(_i(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jn(this.app)?Promise.reject(_i(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await RD(this),t=new DD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ga("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await SD(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yi(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[yi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&sD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function _a(n){return mt(n)}class Tb{constructor(e){this.auth=e,this.observer=null,this.addObserver=F1(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ND(n){Ah=n}function dA(n){return Ah.loadJS(n)}function xD(){return Ah.recaptchaEnterpriseScript}function MD(){return Ah.gapiScript}function PD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class VD{constructor(){this.enterprise=new LD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class LD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const kD="recaptcha-enterprise",pA="NO_RECAPTCHA";class UD{constructor(e){this.type=kD,this.auth=_a(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{mD(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new pD(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(p=>{d(p)})})}function a(l,c,d){const p=window.grecaptcha;yb(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(pA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new VD().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(d=>{if(!t&&yb(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=xD();p.length!==0&&(p+=d),dA(p).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function Sb(n,e,t,s=!1,a=!1){const l=new UD(n);let c;if(a)c=pA;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Ab(n,e,t,s,a){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Sb(n,e,t,t==="getOobCode");return s(n,l)}else return s(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Sb(n,e,t,t==="getOobCode");return s(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(n,e){const t=ya(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(cs(l,e??{}))return a;pr(a,"already-initialized")}return t.initialize({options:e})}function zD(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(yi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function qD(n,e,t){const s=_a(n);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=mA(e),{host:c,port:d}=FD(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(cs(g,s.config.emulator)&&cs(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,Vo(c)?(BS(`${l}//${c}${p}`),zS("Auth",!0)):HD()}function mA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function FD(n){const e=mA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:wb(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:wb(c)}}}function wb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function HD(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gi("not implemented")}_getIdTokenResponse(e){return gi("not implemented")}_linkToIdToken(e,t){return gi("not implemented")}_getReauthenticationResolver(e){return gi("not implemented")}}async function jD(n,e){return Es(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(n,e){return qu(n,"POST","/v1/accounts:signInWithPassword",vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(n,e){return qu(n,"POST","/v1/accounts:signInWithEmailLink",vs(n,e))}async function YD(n,e){return qu(n,"POST","/v1/accounts:signInWithEmailLink",vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends wg{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Tu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Tu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ab(e,t,"signInWithPassword",GD);case"emailLink":return $D(e,{email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ab(e,s,"signUpPassword",jD);case"emailLink":return YD(e,{idToken:t,email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(n,e){return qu(n,"POST","/v1/accounts:signInWithIdp",vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD="http://localhost";class ca extends wg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ca(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const c=new ca(s,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return To(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,To(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,To(e,t)}buildRequest(){const e={requestUri:KD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Bu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WD(n){const e=su(au(n)).link,t=e?su(au(e)).deep_link_id:null,s=su(au(n)).deep_link_id;return(s?su(au(s)).link:null)||s||t||e||n}class Ig{constructor(e){const t=su(au(e)),s=t.apiKey??null,a=t.oobCode??null,l=QD(t.mode??null);Se(s&&a&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=WD(e);try{return new Ig(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.providerId=ko.PROVIDER_ID}static credential(e,t){return Tu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Ig.parseLink(t);return Se(s,"argument-error"),Tu._fromEmailAndCode(e,s.code,s.tenantId)}}ko.PROVIDER_ID="password";ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends gA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Fu{constructor(){super("facebook.com")}static credential(e){return ca._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ji.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Fu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ca._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return es.credential(t,s)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Fu{constructor(){super("github.com")}static credential(e){return ca._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Fu{constructor(){super("twitter.com")}static credential(e,t){return ca._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ns.credential(t,s)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(n,e){return qu(n,"POST","/v1/accounts:signUp",vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await fr._fromIdTokenResponse(e,s,a),c=Ib(s);return new fs({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=Ib(s);return new fs({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function Ib(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZD(n){if(Jn(n.app))return Promise.reject(_i(n));const e=_a(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new fs({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await XD(e,{returnSecureToken:!0}),s=await fs._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf extends gr{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Qf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Qf(e,t,s,a)}}function yA(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Qf._fromErrorAndOperation(n,l,e,s):l})}async function JD(n,e,t=!1){const s=await bu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return fs._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eO(n,e,t=!1){const{auth:s}=n;if(Jn(s.app))return Promise.reject(_i(s));const a="reauthenticate";try{const l=await bu(n,yA(s,a,e,n),t);Se(l.idToken,s,"internal-error");const c=Sg(l.idToken);Se(c,s,"internal-error");const{sub:d}=c;return Se(n.uid===d,s,"user-mismatch"),fs._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&pr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _A(n,e,t=!1){if(Jn(n.app))return Promise.reject(_i(n));const s="signIn",a=await yA(n,s,e),l=await fs._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(l.user),l}async function tO(n,e){return _A(_a(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(n){const e=_a(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function rO(n,e,t){return Jn(n.app)?Promise.reject(_i(n)):tO(mt(n),ko.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&nO(n),s})}function iO(n,e,t,s){return mt(n).onIdTokenChanged(e,t,s)}function sO(n,e,t){return mt(n).beforeAuthStateChanged(e,t)}function aO(n,e,t,s){return mt(n).onAuthStateChanged(e,t,s)}function vA(n){return mt(n).signOut()}async function oO(n){return mt(n).delete()}const Wf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wf,"1"),this.storage.removeItem(Wf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=1e3,uO=10;class bA extends EA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);wD()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,uO):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},lO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bA.type="LOCAL";const cO=bA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA extends EA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}TA.type="SESSION";const SA=TA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new wh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await fO(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=Rg("",20);a.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:a,onMessage(E){const v=E;if(v.data.eventId===g)switch(v.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(v.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){return window}function dO(n){kr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(){return typeof kr().WorkerGlobalScope<"u"&&typeof kr().importScripts=="function"}async function pO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mO(){return navigator?.serviceWorker?.controller||null}function gO(){return AA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="firebaseLocalStorageDb",yO=1,Xf="firebaseLocalStorage",IA="fbase_key";class Hu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ih(n,e){return n.transaction([Xf],e?"readwrite":"readonly").objectStore(Xf)}function _O(){const n=indexedDB.deleteDatabase(wA);return new Hu(n).toPromise()}function jm(){const n=indexedDB.open(wA,yO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Xf,{keyPath:IA})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Xf)?e(s):(s.close(),await _O(),e(await jm()))})})}async function Rb(n,e,t){const s=Ih(n,!0).put({[IA]:e,value:t});return new Hu(s).toPromise()}async function vO(n,e){const t=Ih(n,!1).get(e),s=await new Hu(t).toPromise();return s===void 0?null:s.value}function Cb(n,e){const t=Ih(n,!0).delete(e);return new Hu(t).toPromise()}const EO=800,bO=3;class RA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>bO)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(gO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await pO(),!this.activeServiceWorker)return;this.sender=new hO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jm();return await Rb(e,Wf,"1"),await Cb(e,Wf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Rb(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>vO(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Cb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Ih(a,!1).getAll();return new Hu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RA.type="LOCAL";const TO=RA;new zu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(n,e){return e?yi(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg extends wg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return To(e,this._buildIdpRequest())}_linkToIdToken(e,t){return To(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return To(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function AO(n){return _A(n.auth,new Cg(n),n.bypassAuthState)}function wO(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),eO(t,new Cg(n),n.bypassAuthState)}async function IO(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),JD(t,new Cg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AO;case"linkViaPopup":case"linkViaRedirect":return IO;case"reauthViaPopup":case"reauthViaRedirect":return wO;default:pr(this.auth,"internal-error")}}resolve(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=new zu(2e3,1e4);class vo extends CA{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,vo.currentPopupAction&&vo.currentPopupAction.cancel(),vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){bi(this.filter.length===1,"Popup operations only handle one event");const e=Rg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RO.get())};e()}}vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO="pendingRedirect",Vf=new Map;class DO extends CA{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Vf.get(this.auth._key());if(!e){try{const s=await OO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Vf.set(this.auth._key(),e)}return this.bypassAuthState||Vf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OO(n,e){const t=MO(e),s=xO(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function NO(n,e){Vf.set(n._key(),e)}function xO(n){return yi(n._redirectPersistence)}function MO(n){return Pf(CO,n.config.apiKey,n.name)}async function PO(n,e,t=!1){if(Jn(n.app))return Promise.reject(_i(n));const s=_a(n),a=SO(s,e),c=await new DO(s,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=10*60*1e3;class LO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!DA(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Lr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Db(e))}saveEventToCache(e){this.cachedEventUids.add(Db(e)),this.lastProcessedEventTime=Date.now()}}function Db(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function DA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function kO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UO(n,e={}){return Es(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zO=/^https?/;async function qO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await UO(n);for(const t of e)try{if(FO(t))return}catch{}pr(n,"unauthorized-domain")}function FO(n){const e=Fm(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!zO.test(t))return!1;if(BO.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new zu(3e4,6e4);function Ob(){const n=kr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function jO(n){return new Promise((e,t)=>{function s(){Ob(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ob(),t(Lr(n,"network-request-failed"))},timeout:HO.get()})}if(kr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(kr().gapi?.load)s();else{const a=PD("iframefcb");return kr()[a]=()=>{gapi.load?s():t(Lr(n,"network-request-failed"))},dA(`${MD()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Lf=null,e})}let Lf=null;function GO(n){return Lf=Lf||jO(n),Lf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=new zu(5e3,15e3),YO="__/auth/iframe",KO="emulator/auth/iframe",QO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XO(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Tg(e,KO):`https://${n.config.authDomain}/${YO}`,s={apiKey:e.apiKey,appName:n.name,v:Lo},a=WO.get(n.config.apiHost);a&&(s.eid=a);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Bu(s).slice(1)}`}async function ZO(n){const e=await GO(n),t=kr().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:XO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QO,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const c=Lr(n,"network-request-failed"),d=kr().setTimeout(()=>{l(c)},$O.get());function p(){kr().clearTimeout(d),a(s)}s.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eN=500,tN=600,nN="_blank",rN="http://localhost";class Nb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iN(n,e,t,s=eN,a=tN){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const p={...JO,width:s.toString(),height:a.toString(),top:l,left:c},g=ln().toLowerCase();t&&(d=aA(g)?nN:t),iA(g)&&(e=e||rN,p.scrollbars="yes");const _=Object.entries(p).reduce((v,[A,O])=>`${v}${A}=${O},`,"");if(AD(g)&&d!=="_self")return sN(e||"",d),new Nb(null);const E=window.open(e||"",d,_);Se(E,n,"popup-blocked");try{E.focus()}catch{}return new Nb(E)}function sN(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="__/auth/handler",oN="emulator/auth/handler",lN=encodeURIComponent("fac");async function xb(n,e,t,s,a,l){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Lo,eventId:a};if(e instanceof gA){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",q1(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof Fu){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),g=p?`#${lN}=${encodeURIComponent(p)}`:"";return`${uN(n)}?${Bu(d).slice(1)}${g}`}function uN({config:n}){return n.emulator?Tg(n,oN):`https://${n.authDomain}/${aN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="webStorageSupport";class cN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SA,this._completeRedirectFn=PO,this._overrideRedirectResult=NO}async _openPopup(e,t,s,a){bi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await xb(e,t,s,Fm(),a);return iN(e,l,Rg())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await xb(e,t,s,Fm(),a);return dO(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(bi(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await ZO(e),s=new LO(e);return t.register("authEvent",a=>(Se(a?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(mm,{type:mm},a=>{const l=a?.[0]?.[mm];l!==void 0&&t(!!l),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=qO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fA()||sA()||Ag()}}const fN=cN;var Mb="@firebase/auth",Pb="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pN(n){Fr(new dr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=s.options;Se(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hA(n)},g=new OD(s,a,l,p);return zD(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Fr(new dr("auth-internal",e=>{const t=_a(e.getProvider("auth").getImmediate());return(s=>new hN(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(Mb,Pb,dN(n)),nr(Mb,Pb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=5*60,gN=US("authIdTokenMaxAge")||mN;let Vb=null;const yN=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>gN)return;const a=t?.token;Vb!==a&&(Vb=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function _N(n=Eg()){const e=ya(n,"auth");if(e.isInitialized())return e.getImmediate();const t=BD(n,{popupRedirectResolver:fN,persistence:[TO,cO,SA]}),s=US("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=yN(l.toString());sO(t,c,()=>c(t.currentUser)),iO(t,d=>c(d))}}const a=LS("auth");return a&&qD(t,`http://${a}`),t}function vN(){return document.getElementsByTagName("head")?.[0]??document}ND({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const l=Lr("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",vN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pN("Browser");var Lb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,OA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,I){function R(){}R.prototype=I.prototype,C.D=I.prototype,C.prototype=new R,C.prototype.constructor=C,C.C=function(M,P,U){for(var D=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)D[ut-2]=arguments[ut];return I.prototype[P].apply(M,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,I,R){R||(R=0);var M=Array(16);if(typeof I=="string")for(var P=0;16>P;++P)M[P]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(P=0;16>P;++P)M[P]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=C.g[0],R=C.g[1],P=C.g[2];var U=C.g[3],D=I+(U^R&(P^U))+M[0]+3614090360&4294967295;I=R+(D<<7&4294967295|D>>>25),D=U+(P^I&(R^P))+M[1]+3905402710&4294967295,U=I+(D<<12&4294967295|D>>>20),D=P+(R^U&(I^R))+M[2]+606105819&4294967295,P=U+(D<<17&4294967295|D>>>15),D=R+(I^P&(U^I))+M[3]+3250441966&4294967295,R=P+(D<<22&4294967295|D>>>10),D=I+(U^R&(P^U))+M[4]+4118548399&4294967295,I=R+(D<<7&4294967295|D>>>25),D=U+(P^I&(R^P))+M[5]+1200080426&4294967295,U=I+(D<<12&4294967295|D>>>20),D=P+(R^U&(I^R))+M[6]+2821735955&4294967295,P=U+(D<<17&4294967295|D>>>15),D=R+(I^P&(U^I))+M[7]+4249261313&4294967295,R=P+(D<<22&4294967295|D>>>10),D=I+(U^R&(P^U))+M[8]+1770035416&4294967295,I=R+(D<<7&4294967295|D>>>25),D=U+(P^I&(R^P))+M[9]+2336552879&4294967295,U=I+(D<<12&4294967295|D>>>20),D=P+(R^U&(I^R))+M[10]+4294925233&4294967295,P=U+(D<<17&4294967295|D>>>15),D=R+(I^P&(U^I))+M[11]+2304563134&4294967295,R=P+(D<<22&4294967295|D>>>10),D=I+(U^R&(P^U))+M[12]+1804603682&4294967295,I=R+(D<<7&4294967295|D>>>25),D=U+(P^I&(R^P))+M[13]+4254626195&4294967295,U=I+(D<<12&4294967295|D>>>20),D=P+(R^U&(I^R))+M[14]+2792965006&4294967295,P=U+(D<<17&4294967295|D>>>15),D=R+(I^P&(U^I))+M[15]+1236535329&4294967295,R=P+(D<<22&4294967295|D>>>10),D=I+(P^U&(R^P))+M[1]+4129170786&4294967295,I=R+(D<<5&4294967295|D>>>27),D=U+(R^P&(I^R))+M[6]+3225465664&4294967295,U=I+(D<<9&4294967295|D>>>23),D=P+(I^R&(U^I))+M[11]+643717713&4294967295,P=U+(D<<14&4294967295|D>>>18),D=R+(U^I&(P^U))+M[0]+3921069994&4294967295,R=P+(D<<20&4294967295|D>>>12),D=I+(P^U&(R^P))+M[5]+3593408605&4294967295,I=R+(D<<5&4294967295|D>>>27),D=U+(R^P&(I^R))+M[10]+38016083&4294967295,U=I+(D<<9&4294967295|D>>>23),D=P+(I^R&(U^I))+M[15]+3634488961&4294967295,P=U+(D<<14&4294967295|D>>>18),D=R+(U^I&(P^U))+M[4]+3889429448&4294967295,R=P+(D<<20&4294967295|D>>>12),D=I+(P^U&(R^P))+M[9]+568446438&4294967295,I=R+(D<<5&4294967295|D>>>27),D=U+(R^P&(I^R))+M[14]+3275163606&4294967295,U=I+(D<<9&4294967295|D>>>23),D=P+(I^R&(U^I))+M[3]+4107603335&4294967295,P=U+(D<<14&4294967295|D>>>18),D=R+(U^I&(P^U))+M[8]+1163531501&4294967295,R=P+(D<<20&4294967295|D>>>12),D=I+(P^U&(R^P))+M[13]+2850285829&4294967295,I=R+(D<<5&4294967295|D>>>27),D=U+(R^P&(I^R))+M[2]+4243563512&4294967295,U=I+(D<<9&4294967295|D>>>23),D=P+(I^R&(U^I))+M[7]+1735328473&4294967295,P=U+(D<<14&4294967295|D>>>18),D=R+(U^I&(P^U))+M[12]+2368359562&4294967295,R=P+(D<<20&4294967295|D>>>12),D=I+(R^P^U)+M[5]+4294588738&4294967295,I=R+(D<<4&4294967295|D>>>28),D=U+(I^R^P)+M[8]+2272392833&4294967295,U=I+(D<<11&4294967295|D>>>21),D=P+(U^I^R)+M[11]+1839030562&4294967295,P=U+(D<<16&4294967295|D>>>16),D=R+(P^U^I)+M[14]+4259657740&4294967295,R=P+(D<<23&4294967295|D>>>9),D=I+(R^P^U)+M[1]+2763975236&4294967295,I=R+(D<<4&4294967295|D>>>28),D=U+(I^R^P)+M[4]+1272893353&4294967295,U=I+(D<<11&4294967295|D>>>21),D=P+(U^I^R)+M[7]+4139469664&4294967295,P=U+(D<<16&4294967295|D>>>16),D=R+(P^U^I)+M[10]+3200236656&4294967295,R=P+(D<<23&4294967295|D>>>9),D=I+(R^P^U)+M[13]+681279174&4294967295,I=R+(D<<4&4294967295|D>>>28),D=U+(I^R^P)+M[0]+3936430074&4294967295,U=I+(D<<11&4294967295|D>>>21),D=P+(U^I^R)+M[3]+3572445317&4294967295,P=U+(D<<16&4294967295|D>>>16),D=R+(P^U^I)+M[6]+76029189&4294967295,R=P+(D<<23&4294967295|D>>>9),D=I+(R^P^U)+M[9]+3654602809&4294967295,I=R+(D<<4&4294967295|D>>>28),D=U+(I^R^P)+M[12]+3873151461&4294967295,U=I+(D<<11&4294967295|D>>>21),D=P+(U^I^R)+M[15]+530742520&4294967295,P=U+(D<<16&4294967295|D>>>16),D=R+(P^U^I)+M[2]+3299628645&4294967295,R=P+(D<<23&4294967295|D>>>9),D=I+(P^(R|~U))+M[0]+4096336452&4294967295,I=R+(D<<6&4294967295|D>>>26),D=U+(R^(I|~P))+M[7]+1126891415&4294967295,U=I+(D<<10&4294967295|D>>>22),D=P+(I^(U|~R))+M[14]+2878612391&4294967295,P=U+(D<<15&4294967295|D>>>17),D=R+(U^(P|~I))+M[5]+4237533241&4294967295,R=P+(D<<21&4294967295|D>>>11),D=I+(P^(R|~U))+M[12]+1700485571&4294967295,I=R+(D<<6&4294967295|D>>>26),D=U+(R^(I|~P))+M[3]+2399980690&4294967295,U=I+(D<<10&4294967295|D>>>22),D=P+(I^(U|~R))+M[10]+4293915773&4294967295,P=U+(D<<15&4294967295|D>>>17),D=R+(U^(P|~I))+M[1]+2240044497&4294967295,R=P+(D<<21&4294967295|D>>>11),D=I+(P^(R|~U))+M[8]+1873313359&4294967295,I=R+(D<<6&4294967295|D>>>26),D=U+(R^(I|~P))+M[15]+4264355552&4294967295,U=I+(D<<10&4294967295|D>>>22),D=P+(I^(U|~R))+M[6]+2734768916&4294967295,P=U+(D<<15&4294967295|D>>>17),D=R+(U^(P|~I))+M[13]+1309151649&4294967295,R=P+(D<<21&4294967295|D>>>11),D=I+(P^(R|~U))+M[4]+4149444226&4294967295,I=R+(D<<6&4294967295|D>>>26),D=U+(R^(I|~P))+M[11]+3174756917&4294967295,U=I+(D<<10&4294967295|D>>>22),D=P+(I^(U|~R))+M[2]+718787259&4294967295,P=U+(D<<15&4294967295|D>>>17),D=R+(U^(P|~I))+M[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+U&4294967295}s.prototype.u=function(C,I){I===void 0&&(I=C.length);for(var R=I-this.blockSize,M=this.B,P=this.h,U=0;U<I;){if(P==0)for(;U<=R;)a(this,C,U),U+=this.blockSize;if(typeof C=="string"){for(;U<I;)if(M[P++]=C.charCodeAt(U++),P==this.blockSize){a(this,M),P=0;break}}else for(;U<I;)if(M[P++]=C[U++],P==this.blockSize){a(this,M),P=0;break}}this.h=P,this.o+=I},s.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;var R=8*this.o;for(I=C.length-8;I<C.length;++I)C[I]=R&255,R/=256;for(this.u(C),C=Array(16),I=R=0;4>I;++I)for(var M=0;32>M;M+=8)C[R++]=this.g[I]>>>M&255;return C};function l(C,I){var R=d;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=I(C)}function c(C,I){this.h=I;for(var R=[],M=!0,P=C.length-1;0<=P;P--){var U=C[P]|0;M&&U==I||(R[P]=U,M=!1)}this.g=R}var d={};function p(C){return-128<=C&&128>C?l(C,function(I){return new c([I|0],0>I?-1:0)}):new c([C|0],0>C?-1:0)}function g(C){if(isNaN(C)||!isFinite(C))return E;if(0>C)return x(g(-C));for(var I=[],R=1,M=0;C>=R;M++)I[M]=C/R|0,R*=4294967296;return new c(I,0)}function _(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return x(_(C.substring(1),I));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=g(Math.pow(I,8)),M=E,P=0;P<C.length;P+=8){var U=Math.min(8,C.length-P),D=parseInt(C.substring(P,P+U),I);8>U?(U=g(Math.pow(I,U)),M=M.j(U).add(g(D))):(M=M.j(R),M=M.add(g(D)))}return M}var E=p(0),v=p(1),A=p(16777216);n=c.prototype,n.m=function(){if(L(this))return-x(this).m();for(var C=0,I=1,R=0;R<this.g.length;R++){var M=this.i(R);C+=(0<=M?M:4294967296+M)*I,I*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(O(this))return"0";if(L(this))return"-"+x(this).toString(C);for(var I=g(Math.pow(C,6)),R=this,M="";;){var P=ae(R,I).g;R=$(R,P.j(I));var U=((0<R.g.length?R.g[0]:R.h)>>>0).toString(C);if(R=P,O(R))return U+M;for(;6>U.length;)U="0"+U;M=U+M}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function O(C){if(C.h!=0)return!1;for(var I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function L(C){return C.h==-1}n.l=function(C){return C=$(this,C),L(C)?-1:O(C)?0:1};function x(C){for(var I=C.g.length,R=[],M=0;M<I;M++)R[M]=~C.g[M];return new c(R,~C.h).add(v)}n.abs=function(){return L(this)?x(this):this},n.add=function(C){for(var I=Math.max(this.g.length,C.g.length),R=[],M=0,P=0;P<=I;P++){var U=M+(this.i(P)&65535)+(C.i(P)&65535),D=(U>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);M=D>>>16,U&=65535,D&=65535,R[P]=D<<16|U}return new c(R,R[R.length-1]&-2147483648?-1:0)};function $(C,I){return C.add(x(I))}n.j=function(C){if(O(this)||O(C))return E;if(L(this))return L(C)?x(this).j(x(C)):x(x(this).j(C));if(L(C))return x(this.j(x(C)));if(0>this.l(A)&&0>C.l(A))return g(this.m()*C.m());for(var I=this.g.length+C.g.length,R=[],M=0;M<2*I;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(var P=0;P<C.g.length;P++){var U=this.i(M)>>>16,D=this.i(M)&65535,ut=C.i(P)>>>16,He=C.i(P)&65535;R[2*M+2*P]+=D*He,Y(R,2*M+2*P),R[2*M+2*P+1]+=U*He,Y(R,2*M+2*P+1),R[2*M+2*P+1]+=D*ut,Y(R,2*M+2*P+1),R[2*M+2*P+2]+=U*ut,Y(R,2*M+2*P+2)}for(M=0;M<I;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=I;M<2*I;M++)R[M]=0;return new c(R,0)};function Y(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function te(C,I){this.g=C,this.h=I}function ae(C,I){if(O(I))throw Error("division by zero");if(O(C))return new te(E,E);if(L(C))return I=ae(x(C),I),new te(x(I.g),x(I.h));if(L(I))return I=ae(C,x(I)),new te(x(I.g),I.h);if(30<C.g.length){if(L(C)||L(I))throw Error("slowDivide_ only works with positive integers.");for(var R=v,M=I;0>=M.l(C);)R=re(R),M=re(M);var P=ie(R,1),U=ie(M,1);for(M=ie(M,2),R=ie(R,2);!O(M);){var D=U.add(M);0>=D.l(C)&&(P=P.add(R),U=D),M=ie(M,1),R=ie(R,1)}return I=$(C,P.j(I)),new te(P,I)}for(P=E;0<=C.l(I);){for(R=Math.max(1,Math.floor(C.m()/I.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),U=g(R),D=U.j(I);L(D)||0<D.l(C);)R-=M,U=g(R),D=U.j(I);O(U)&&(U=v),P=P.add(U),C=$(C,D)}return new te(P,C)}n.A=function(C){return ae(this,C).h},n.and=function(C){for(var I=Math.max(this.g.length,C.g.length),R=[],M=0;M<I;M++)R[M]=this.i(M)&C.i(M);return new c(R,this.h&C.h)},n.or=function(C){for(var I=Math.max(this.g.length,C.g.length),R=[],M=0;M<I;M++)R[M]=this.i(M)|C.i(M);return new c(R,this.h|C.h)},n.xor=function(C){for(var I=Math.max(this.g.length,C.g.length),R=[],M=0;M<I;M++)R[M]=this.i(M)^C.i(M);return new c(R,this.h^C.h)};function re(C){for(var I=C.g.length+1,R=[],M=0;M<I;M++)R[M]=C.i(M)<<1|C.i(M-1)>>>31;return new c(R,C.h)}function ie(C,I){var R=I>>5;I%=32;for(var M=C.g.length-R,P=[],U=0;U<M;U++)P[U]=0<I?C.i(U+R)>>>I|C.i(U+R+1)<<32-I:C.i(U+R);return new c(P,C.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,OA=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,as=c}).apply(typeof Lb<"u"?Lb:typeof self<"u"?self:typeof window<"u"?window:{});var wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var NA,ou,xA,kf,Gm,MA,PA,VA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,y,b){return f==Array.prototype||f==Object.prototype||(f[y]=b.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof wf=="object"&&wf];for(var y=0;y<f.length;++y){var b=f[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var s=t(this);function a(f,y){if(y)e:{var b=s;f=f.split(".");for(var w=0;w<f.length-1;w++){var z=f[w];if(!(z in b))break e;b=b[z]}f=f[f.length-1],w=b[f],y=y(w),y!=w&&y!=null&&e(b,f,{configurable:!0,writable:!0,value:y})}}function l(f,y){f instanceof String&&(f+="");var b=0,w=!1,z={next:function(){if(!w&&b<f.length){var G=b++;return{value:y(G,f[G]),done:!1}}return w=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}a("Array.prototype.values",function(f){return f||function(){return l(this,function(y,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(f){var y=typeof f;return y=y!="object"?y:f?Array.isArray(f)?"array":y:"null",y=="array"||y=="object"&&typeof f.length=="number"}function g(f){var y=typeof f;return y=="object"&&f!=null||y=="function"}function _(f,y,b){return f.call.apply(f.bind,arguments)}function E(f,y,b){if(!f)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,w),f.apply(y,z)}}return function(){return f.apply(y,arguments)}}function v(f,y,b){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,v.apply(null,arguments)}function A(f,y){var b=Array.prototype.slice.call(arguments,1);return function(){var w=b.slice();return w.push.apply(w,arguments),f.apply(this,w)}}function O(f,y){function b(){}b.prototype=y.prototype,f.aa=y.prototype,f.prototype=new b,f.prototype.constructor=f,f.Qb=function(w,z,G){for(var oe=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)oe[Ue-2]=arguments[Ue];return y.prototype[z].apply(w,oe)}}function L(f){const y=f.length;if(0<y){const b=Array(y);for(let w=0;w<y;w++)b[w]=f[w];return b}return[]}function x(f,y){for(let b=1;b<arguments.length;b++){const w=arguments[b];if(p(w)){const z=f.length||0,G=w.length||0;f.length=z+G;for(let oe=0;oe<G;oe++)f[z+oe]=w[oe]}else f.push(w)}}class ${constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Y(f){return/^[\s\xa0]*$/.test(f)}function te(){var f=d.navigator;return f&&(f=f.userAgent)?f:""}function ae(f){return ae[" "](f),f}ae[" "]=function(){};var re=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function ie(f,y,b){for(const w in f)y.call(b,f[w],w,f)}function C(f,y){for(const b in f)y.call(void 0,f[b],b,f)}function I(f){const y={};for(const b in f)y[b]=f[b];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(f,y){let b,w;for(let z=1;z<arguments.length;z++){w=arguments[z];for(b in w)f[b]=w[b];for(let G=0;G<R.length;G++)b=R[G],Object.prototype.hasOwnProperty.call(w,b)&&(f[b]=w[b])}}function P(f){var y=1;f=f.split(":");const b=[];for(;0<y&&f.length;)b.push(f.shift()),y--;return f.length&&b.push(f.join(":")),b}function U(f){d.setTimeout(()=>{throw f},0)}function D(){var f=ke;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}class ut{constructor(){this.h=this.g=null}add(y,b){const w=He.get();w.set(y,b),this.h?this.h.next=w:this.g=w,this.h=w}}var He=new $(()=>new K,f=>f.reset());class K{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,me=!1,ke=new ut,V=()=>{const f=d.Promise.resolve(void 0);ue=()=>{f.then(ee)}};var ee=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(b){U(b)}var y=He;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}me=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const b=()=>{};d.addEventListener("test",b,y),d.removeEventListener("test",b,y)}catch{}return f}();function Ce(f,y){if(se.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var b=this.type=f.type,w=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(re){e:{try{ae(y.nodeName);var z=!0;break e}catch{}z=!1}z||(y=null)}}else b=="mouseover"?y=f.fromElement:b=="mouseout"&&(y=f.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:be[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Ce.aa.h.call(this)}}O(Ce,se);var be={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var gt="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function un(f,y,b,w,z){this.listener=f,this.proxy=null,this.src=y,this.type=b,this.capture=!!w,this.ha=z,this.key=++Ze,this.da=this.fa=!1}function Un(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function yr(f){this.src=f,this.g={},this.h=0}yr.prototype.add=function(f,y,b,w,z){var G=f.toString();f=this.g[G],f||(f=this.g[G]=[],this.h++);var oe=Sn(f,y,w,z);return-1<oe?(y=f[oe],b||(y.fa=!1)):(y=new un(y,this.src,G,!!w,z),y.fa=b,f.push(y)),y};function Tt(f,y){var b=y.type;if(b in f.g){var w=f.g[b],z=Array.prototype.indexOf.call(w,y,void 0),G;(G=0<=z)&&Array.prototype.splice.call(w,z,1),G&&(Un(y),f.g[b].length==0&&(delete f.g[b],f.h--))}}function Sn(f,y,b,w){for(var z=0;z<f.length;++z){var G=f[z];if(!G.da&&G.listener==y&&G.capture==!!b&&G.ha==w)return z}return-1}var Ss="closure_lm_"+(1e6*Math.random()|0),$o={};function Ju(f,y,b,w,z){if(Array.isArray(y)){for(var G=0;G<y.length;G++)Ju(f,y[G],b,w,z);return null}return b=ec(b),f&&f[gt]?f.K(y,b,g(w)?!!w.capture:!1,z):Bn(f,y,b,!1,w,z)}function Bn(f,y,b,w,z,G){if(!y)throw Error("Invalid event type");var oe=g(z)?!!z.capture:!!z,Ue=Sa(f);if(Ue||(f[Ss]=Ue=new yr(f)),b=Ue.add(y,b,w,oe,G),b.proxy)return b;if(w=rd(),b.proxy=w,w.src=f,w.listener=b,f.addEventListener)_e||(z=oe),z===void 0&&(z=!1),f.addEventListener(y.toString(),w,z);else if(f.attachEvent)f.attachEvent(As(y.toString()),w);else if(f.addListener&&f.removeListener)f.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return b}function rd(){function f(b){return y.call(f.src,f.listener,b)}const y=id;return f}function Yo(f,y,b,w,z){if(Array.isArray(y))for(var G=0;G<y.length;G++)Yo(f,y[G],b,w,z);else w=g(w)?!!w.capture:!!w,b=ec(b),f&&f[gt]?(f=f.i,y=String(y).toString(),y in f.g&&(G=f.g[y],b=Sn(G,b,w,z),-1<b&&(Un(G[b]),Array.prototype.splice.call(G,b,1),G.length==0&&(delete f.g[y],f.h--)))):f&&(f=Sa(f))&&(y=f.g[y.toString()],f=-1,y&&(f=Sn(y,b,w,z)),(b=-1<f?y[f]:null)&&Ta(b))}function Ta(f){if(typeof f!="number"&&f&&!f.da){var y=f.src;if(y&&y[gt])Tt(y.i,f);else{var b=f.type,w=f.proxy;y.removeEventListener?y.removeEventListener(b,w,f.capture):y.detachEvent?y.detachEvent(As(b),w):y.addListener&&y.removeListener&&y.removeListener(w),(b=Sa(y))?(Tt(b,f),b.h==0&&(b.src=null,y[Ss]=null)):Un(f)}}}function As(f){return f in $o?$o[f]:$o[f]="on"+f}function id(f,y){if(f.da)f=!0;else{y=new Ce(y,this);var b=f.listener,w=f.ha||f.src;f.fa&&Ta(f),f=b.call(w,y)}return f}function Sa(f){return f=f[Ss],f instanceof yr?f:null}var Ko="__closure_events_fn_"+(1e9*Math.random()>>>0);function ec(f){return typeof f=="function"?f:(f[Ko]||(f[Ko]=function(y){return f.handleEvent(y)}),f[Ko])}function ht(){ce.call(this),this.i=new yr(this),this.M=this,this.F=null}O(ht,ce),ht.prototype[gt]=!0,ht.prototype.removeEventListener=function(f,y,b,w){Yo(this,f,y,b,w)};function Qe(f,y){var b,w=f.F;if(w)for(b=[];w;w=w.F)b.push(w);if(f=f.M,w=y.type||y,typeof y=="string")y=new se(y,f);else if(y instanceof se)y.target=y.target||f;else{var z=y;y=new se(w,f),M(y,z)}if(z=!0,b)for(var G=b.length-1;0<=G;G--){var oe=y.g=b[G];z=An(oe,w,!0,y)&&z}if(oe=y.g=f,z=An(oe,w,!0,y)&&z,z=An(oe,w,!1,y)&&z,b)for(G=0;G<b.length;G++)oe=y.g=b[G],z=An(oe,w,!1,y)&&z}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var f=this.i,y;for(y in f.g){for(var b=f.g[y],w=0;w<b.length;w++)Un(b[w]);delete f.g[y],f.h--}}this.F=null},ht.prototype.K=function(f,y,b,w){return this.i.add(String(f),y,!1,b,w)},ht.prototype.L=function(f,y,b,w){return this.i.add(String(f),y,!0,b,w)};function An(f,y,b,w){if(y=f.i.g[String(y)],!y)return!0;y=y.concat();for(var z=!0,G=0;G<y.length;++G){var oe=y[G];if(oe&&!oe.da&&oe.capture==b){var Ue=oe.listener,xt=oe.ha||oe.src;oe.fa&&Tt(f.i,oe),z=Ue.call(xt,w)!==!1&&z}}return z&&!w.defaultPrevented}function tn(f,y,b){if(typeof f=="function")b&&(f=v(f,b));else if(f&&typeof f.handleEvent=="function")f=v(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(f,y||0)}function tc(f){f.g=tn(()=>{f.g=null,f.i&&(f.i=!1,tc(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}class sd extends ce{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:tc(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ws(f){ce.call(this),this.h=f,this.g={}}O(ws,ce);var Is=[];function Rs(f){ie(f.g,function(y,b){this.g.hasOwnProperty(b)&&Ta(y)},f),f.g={}}ws.prototype.N=function(){ws.aa.N.call(this),Rs(this)},ws.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sr=d.JSON.stringify,Aa=d.JSON.parse,Cs=class{stringify(f){return d.JSON.stringify(f,void 0)}parse(f){return d.JSON.parse(f,void 0)}};function Qo(){}Qo.prototype.h=null;function Wo(f){return f.h||(f.h=f.i())}function Xo(){}var Gr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $r(){se.call(this,"d")}O($r,se);function Zo(){se.call(this,"c")}O(Zo,se);var _r={},Jo=null;function Ai(){return Jo=Jo||new ht}_r.La="serverreachability";function wa(f){se.call(this,_r.La,f)}O(wa,se);function wi(f){const y=Ai();Qe(y,new wa(y))}_r.STAT_EVENT="statevent";function nc(f,y){se.call(this,_r.STAT_EVENT,f),this.stat=y}O(nc,se);function ot(f){const y=Ai();Qe(y,new nc(y,f))}_r.Ma="timingevent";function Nt(f,y){se.call(this,_r.Ma,f),this.size=y}O(Nt,se);function St(f,y){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){f()},y)}function zn(){this.g=!0}zn.prototype.xa=function(){this.g=!1};function el(f,y,b,w,z,G){f.info(function(){if(f.g)if(G)for(var oe="",Ue=G.split("&"),xt=0;xt<Ue.length;xt++){var Be=Ue[xt].split("=");if(1<Be.length){var Ut=Be[0];Be=Be[1];var Mt=Ut.split("_");oe=2<=Mt.length&&Mt[1]=="type"?oe+(Ut+"="+Be+"&"):oe+(Ut+"=redacted&")}}else oe=null;else oe=G;return"XMLHTTP REQ ("+w+") [attempt "+z+"]: "+y+`
`+b+`
`+oe})}function ad(f,y,b,w,z,G,oe){f.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+z+"]: "+y+`
`+b+`
`+G+" "+oe})}function Ii(f,y,b,w){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ds(f,b)+(w?" "+w:"")})}function rc(f,y){f.info(function(){return"TIMEOUT: "+y})}zn.prototype.info=function(){};function Ds(f,y){if(!f.g)return y;if(!y)return null;try{var b=JSON.parse(y);if(b){for(f=0;f<b.length;f++)if(Array.isArray(b[f])){var w=b[f];if(!(2>w.length)){var z=w[1];if(Array.isArray(z)&&!(1>z.length)){var G=z[0];if(G!="noop"&&G!="stop"&&G!="close")for(var oe=1;oe<z.length;oe++)z[oe]=""}}}}return sr(b)}catch{return y}}var Ri={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vr;function Er(){}O(Er,Qo),Er.prototype.g=function(){return new XMLHttpRequest},Er.prototype.i=function(){return{}},vr=new Er;function cn(f,y,b,w){this.j=f,this.i=y,this.l=b,this.R=w||1,this.U=new ws(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yt}function yt(){this.i=null,this.g="",this.h=!1}var tl={},Ia={};function ar(f,y,b){f.L=1,f.v=Ps(wn(y)),f.m=b,f.P=!0,Kr(f,null)}function Kr(f,y){f.F=Date.now(),Os(f),f.A=wn(f.v);var b=f.A,w=f.R;Array.isArray(w)||(w=[String(w)]),ol(b.i,"t",w),f.C=0,b=f.j.J,f.h=new yt,f.g=vc(f.j,b?y:null,!f.m),0<f.O&&(f.M=new sd(v(f.Y,f,f.g),f.O)),y=f.U,b=f.g,w=f.ca;var z="readystatechange";Array.isArray(z)||(z&&(Is[0]=z.toString()),z=Is);for(var G=0;G<z.length;G++){var oe=Ju(b,z[G],w||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=f.H?I(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),wi(),el(f.i,f.u,f.A,f.l,f.R,f.m)}cn.prototype.ca=function(f){f=f.target;const y=this.M;y&&jn(f)==3?y.j():this.Y(f)},cn.prototype.Y=function(f){try{if(f==this.g)e:{const Mt=jn(this.g);var y=this.g.Ba();const ni=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||fc(this.g)))){this.J||Mt!=4||y==7||(y==8||0>=ni?wi(3):wi(2)),Ci(this);var b=this.g.Z();this.X=b;t:if(ic(this)){var w=fc(this.g);f="";var z=w.length,G=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gt(this),br(this);var oe="";break t}this.h.i=new d.TextDecoder}for(y=0;y<z;y++)this.h.h=!0,f+=this.h.i.decode(w[y],{stream:!(G&&y==z-1)});w.length=0,this.h.g+=f,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=b==200,ad(this.i,this.u,this.A,this.l,this.R,Mt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,xt=this.g;if((Ue=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Ue)){var Be=Ue;break t}}Be=null}if(b=Be)Ii(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ns(this,b);else{this.o=!1,this.s=3,ot(12),Gt(this),br(this);break e}}if(this.P){b=!0;let $t;for(;!this.J&&this.C<oe.length;)if($t=sc(this,oe),$t==Ia){Mt==4&&(this.s=4,ot(14),b=!1),Ii(this.i,this.l,null,"[Incomplete Response]");break}else if($t==tl){this.s=4,ot(15),Ii(this.i,this.l,oe,"[Invalid Chunk]"),b=!1;break}else Ii(this.i,this.l,$t,null),Ns(this,$t);if(ic(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||oe.length!=0||this.h.h||(this.s=1,ot(16),b=!1),this.o=this.o&&b,!b)Ii(this.i,this.l,oe,"[Invalid Chunked Response]"),Gt(this),br(this);else if(0<oe.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Fs(Ut),Ut.M=!0,ot(11))}}else Ii(this.i,this.l,oe,null),Ns(this,oe);Mt==4&&Gt(this),this.o&&!this.J&&(Mt==4?gc(this.j,this):(this.o=!1,Os(this)))}else fd(this.g),b==400&&0<oe.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),Gt(this),br(this)}}}catch{}finally{}};function ic(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function sc(f,y){var b=f.C,w=y.indexOf(`
`,b);return w==-1?Ia:(b=Number(y.substring(b,w)),isNaN(b)?tl:(w+=1,w+b>y.length?Ia:(y=y.slice(w,w+b),f.C=w+b,y)))}cn.prototype.cancel=function(){this.J=!0,Gt(this)};function Os(f){f.S=Date.now()+f.I,ac(f,f.I)}function ac(f,y){if(f.B!=null)throw Error("WatchDog timer not null");f.B=St(v(f.ba,f),y)}function Ci(f){f.B&&(d.clearTimeout(f.B),f.B=null)}cn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(rc(this.i,this.A),this.L!=2&&(wi(),ot(17)),Gt(this),this.s=2,br(this)):ac(this,this.S-f)};function br(f){f.j.G==0||f.J||gc(f.j,f)}function Gt(f){Ci(f);var y=f.M;y&&typeof y.ma=="function"&&y.ma(),f.M=null,Rs(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function Ns(f,y){try{var b=f.j;if(b.G!=0&&(b.g==f||nl(b.h,f))){if(!f.K&&nl(b.h,f)&&b.G==3){try{var w=b.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var z=w;if(z[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<f.F)Ua(b),La(b);else break e;hl(b),ot(18)}}else b.za=z[1],0<b.za-b.T&&37500>z[2]&&b.F&&b.v==0&&!b.C&&(b.C=St(v(b.Za,b),6e3));if(1>=Ca(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else ti(b,11)}else if((f.K||b.g==f)&&Ua(b),!Y(y))for(z=b.Da.g.parse(y),y=0;y<z.length;y++){let Be=z[y];if(b.T=Be[0],Be=Be[1],b.G==2)if(Be[0]=="c"){b.K=Be[1],b.ia=Be[2];const Ut=Be[3];Ut!=null&&(b.la=Ut,b.j.info("VER="+b.la));const Mt=Be[4];Mt!=null&&(b.Aa=Mt,b.j.info("SVER="+b.Aa));const ni=Be[5];ni!=null&&typeof ni=="number"&&0<ni&&(w=1.5*ni,b.L=w,b.j.info("backChannelRequestTimeoutMs_="+w)),w=b;const $t=f.g;if($t){const Cr=$t.g?$t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cr){var G=w.h;G.g||Cr.indexOf("spdy")==-1&&Cr.indexOf("quic")==-1&&Cr.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Da(G,G.h),G.h=null))}if(w.D){const pl=$t.g?$t.g.getResponseHeader("X-HTTP-Session-Id"):null;pl&&(w.ya=pl,Je(w.I,w.D,pl))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-f.F,b.j.info("Handshake RTT: "+b.R+"ms")),w=b;var oe=f;if(w.qa=_c(w,w.J?w.ia:null,w.W),oe.K){fn(w.h,oe);var Ue=oe,xt=w.L;xt&&(Ue.I=xt),Ue.B&&(Ci(Ue),Os(Ue)),w.g=oe}else pc(w);0<b.i.length&&ka(b)}else Be[0]!="stop"&&Be[0]!="close"||ti(b,7);else b.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?ti(b,7):cl(b):Be[0]!="noop"&&b.l&&b.l.ta(Be),b.v=0)}}wi(4)}catch{}}var oc=class{constructor(f,y){this.g=f,this.map=y}};function Qr(f){this.l=f||10,d.PerformanceNavigationTiming?(f=d.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ra(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ca(f){return f.h?1:f.g?f.g.size:0}function nl(f,y){return f.h?f.h==y:f.g?f.g.has(y):!1}function Da(f,y){f.g?f.g.add(y):f.h=y}function fn(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}Qr.prototype.cancel=function(){if(this.i=rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function rl(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let y=f.i;for(const b of f.g.values())y=y.concat(b.D);return y}return L(f.i)}function od(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(p(f)){for(var y=[],b=f.length,w=0;w<b;w++)y.push(f[w]);return y}y=[],b=0;for(w in f)y[b++]=f[w];return y}function Oa(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(p(f)||typeof f=="string"){var y=[];f=f.length;for(var b=0;b<f;b++)y.push(b);return y}y=[],b=0;for(const w in f)y[b++]=w;return y}}}function il(f,y){if(f.forEach&&typeof f.forEach=="function")f.forEach(y,void 0);else if(p(f)||typeof f=="string")Array.prototype.forEach.call(f,y,void 0);else for(var b=Oa(f),w=od(f),z=w.length,G=0;G<z;G++)y.call(void 0,w[G],b&&b[G],f)}var xs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ld(f,y){if(f){f=f.split("&");for(var b=0;b<f.length;b++){var w=f[b].indexOf("="),z=null;if(0<=w){var G=f[b].substring(0,w);z=f[b].substring(w+1)}else G=f[b];y(G,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function At(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof At){this.h=f.h,Ms(this,f.j),this.o=f.o,this.g=f.g,Di(this,f.s),this.l=f.l;var y=f.i,b=new Xr;b.i=y.i,y.g&&(b.g=new Map(y.g),b.h=y.h),Wr(this,b),this.m=f.m}else f&&(y=String(f).match(xs))?(this.h=!1,Ms(this,y[1]||"",!0),this.o=qn(y[2]||""),this.g=qn(y[3]||"",!0),Di(this,y[4]),this.l=qn(y[5]||"",!0),Wr(this,y[6]||"",!0),this.m=qn(y[7]||"")):(this.h=!1,this.i=new Xr(null,this.h))}At.prototype.toString=function(){var f=[],y=this.j;y&&f.push(Vs(y,sl,!0),":");var b=this.g;return(b||y=="file")&&(f.push("//"),(y=this.o)&&f.push(Vs(y,sl,!0),"@"),f.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&f.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&f.push("/"),f.push(Vs(b,b.charAt(0)=="/"?ud:al,!0))),(b=this.i.toString())&&f.push("?",b),(b=this.m)&&f.push("#",Vs(b,Na)),f.join("")};function wn(f){return new At(f)}function Ms(f,y,b){f.j=b?qn(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function Di(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function Wr(f,y,b){y instanceof Xr?(f.i=y,uc(f.i,f.h)):(b||(y=Vs(y,cd)),f.i=new Xr(y,f.h))}function Je(f,y,b){f.i.set(y,b)}function Ps(f){return Je(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function qn(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Vs(f,y,b){return typeof f=="string"?(f=encodeURI(f).replace(y,lc),b&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function lc(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var sl=/[#\/\?@]/g,al=/[#\?:]/g,ud=/[#\?]/g,cd=/[#\?@]/g,Na=/#/g;function Xr(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function Fn(f){f.g||(f.g=new Map,f.h=0,f.i&&ld(f.i,function(y,b){f.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}n=Xr.prototype,n.add=function(f,y){Fn(this),this.i=null,f=Tr(this,f);var b=this.g.get(f);return b||this.g.set(f,b=[]),b.push(y),this.h+=1,this};function Zr(f,y){Fn(f),y=Tr(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function Jr(f,y){return Fn(f),y=Tr(f,y),f.g.has(y)}n.forEach=function(f,y){Fn(this),this.g.forEach(function(b,w){b.forEach(function(z){f.call(y,z,w,this)},this)},this)},n.na=function(){Fn(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),b=[];for(let w=0;w<y.length;w++){const z=f[w];for(let G=0;G<z.length;G++)b.push(y[w])}return b},n.V=function(f){Fn(this);let y=[];if(typeof f=="string")Jr(this,f)&&(y=y.concat(this.g.get(Tr(this,f))));else{f=Array.from(this.g.values());for(let b=0;b<f.length;b++)y=y.concat(f[b])}return y},n.set=function(f,y){return Fn(this),this.i=null,f=Tr(this,f),Jr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f?(f=this.V(f),0<f.length?String(f[0]):y):y};function ol(f,y,b){Zr(f,y),0<b.length&&(f.i=null,f.g.set(Tr(f,y),L(b)),f.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var b=0;b<y.length;b++){var w=y[b];const G=encodeURIComponent(String(w)),oe=this.V(w);for(w=0;w<oe.length;w++){var z=G;oe[w]!==""&&(z+="="+encodeURIComponent(String(oe[w]))),f.push(z)}}return this.i=f.join("&")};function Tr(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function uc(f,y){y&&!f.j&&(Fn(f),f.i=null,f.g.forEach(function(b,w){var z=w.toLowerCase();w!=z&&(Zr(this,w),ol(this,z,b))},f)),f.j=y}function Ls(f,y){const b=new zn;if(d.Image){const w=new Image;w.onload=A(Hn,b,"TestLoadImage: loaded",!0,y,w),w.onerror=A(Hn,b,"TestLoadImage: error",!1,y,w),w.onabort=A(Hn,b,"TestLoadImage: abort",!1,y,w),w.ontimeout=A(Hn,b,"TestLoadImage: timeout",!1,y,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=f}else y(!1)}function or(f,y){const b=new zn,w=new AbortController,z=setTimeout(()=>{w.abort(),Hn(b,"TestPingServer: timeout",!1,y)},1e4);fetch(f,{signal:w.signal}).then(G=>{clearTimeout(z),G.ok?Hn(b,"TestPingServer: ok",!0,y):Hn(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),Hn(b,"TestPingServer: error",!1,y)})}function Hn(f,y,b,w,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),w(b)}catch{}}function ks(){this.g=new Cs}function Sr(f,y,b){const w=b||"";try{il(f,function(z,G){let oe=z;g(z)&&(oe=sr(z)),y.push(w+G+"="+encodeURIComponent(oe))})}catch(z){throw y.push(w+"type="+encodeURIComponent("_badmap")),z}}function Oi(f){this.l=f.Ub||null,this.j=f.eb||!1}O(Oi,Qo),Oi.prototype.g=function(){return new ei(this.l,this.j)},Oi.prototype.i=function(f){return function(){return f}}({});function ei(f,y){ht.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(ei,ht),n=ei.prototype,n.open=function(f,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,wr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ar(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,wr(this)),this.g&&(this.readyState=3,wr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ll(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function ll(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?Ar(this):wr(this),this.readyState==3&&ll(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Ar(this))},n.Qa=function(f){this.g&&(this.response=f,Ar(this))},n.ga=function(){this.g&&Ar(this)};function Ar(f){f.readyState=4,f.l=null,f.j=null,f.v=null,wr(f)}n.setRequestHeader=function(f,y){this.u.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,f.push(b[0]+": "+b[1]),b=y.next();return f.join(`\r
`)};function wr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(ei.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ul(f){let y="";return ie(f,function(b,w){y+=w,y+=":",y+=b,y+=`\r
`}),y}function kt(f,y,b){e:{for(w in b){var w=!1;break e}w=!0}w||(b=ul(b),typeof f=="string"?b!=null&&encodeURIComponent(String(b)):Je(f,y,b))}function $e(f){ht.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O($e,ht);var xa=/^https?$/i,Us=["POST","PUT"];n=$e.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,y,b,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vr.g(),this.v=this.o?Wo(this.o):Wo(vr),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(G){cc(this,G);return}if(f=b||"",b=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var z in w)b.set(z,w[z]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const G of w.keys())b.set(G,w.get(G));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(b.keys()).find(G=>G.toLowerCase()=="content-type"),z=d.FormData&&f instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Us,y,void 0))||w||z||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,oe]of b)this.g.setRequestHeader(G,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bs(this),this.u=!0,this.g.send(f),this.u=!1}catch(G){cc(this,G)}};function cc(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,Ma(f),Ir(f)}function Ma(f){f.A||(f.A=!0,Qe(f,"complete"),Qe(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Qe(this,"complete"),Qe(this,"abort"),Ir(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ir(this,!0)),$e.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Pa(this):this.bb())},n.bb=function(){Pa(this)};function Pa(f){if(f.h&&typeof c<"u"&&(!f.v[1]||jn(f)!=4||f.Z()!=2)){if(f.u&&jn(f)==4)tn(f.Ea,0,f);else if(Qe(f,"readystatechange"),jn(f)==4){f.h=!1;try{const oe=f.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var w;if(w=oe===0){var z=String(f.D).match(xs)[1]||null;!z&&d.self&&d.self.location&&(z=d.self.location.protocol.slice(0,-1)),w=!xa.test(z?z.toLowerCase():"")}b=w}if(b)Qe(f,"complete"),Qe(f,"success");else{f.m=6;try{var G=2<jn(f)?f.g.statusText:""}catch{G=""}f.l=G+" ["+f.Z()+"]",Ma(f)}}finally{Ir(f)}}}}function Ir(f,y){if(f.g){Bs(f);const b=f.g,w=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||Qe(f,"ready");try{b.onreadystatechange=w}catch{}}}function Bs(f){f.I&&(d.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function jn(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&y.indexOf(f)==0&&(y=y.substring(f.length)),Aa(y)}};function fc(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function fd(f){const y={};f=(f.g&&2<=jn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<f.length;w++){if(Y(f[w]))continue;var b=P(f[w]);const z=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const G=y[z]||[];y[z]=G,G.push(b)}C(y,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zs(f,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[f]||y}function Va(f){this.Aa=0,this.i=[],this.j=new zn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zs("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zs("baseRetryDelayMs",5e3,f),this.cb=zs("retryDelaySeedMs",1e4,f),this.Wa=zs("forwardChannelMaxRetries",2,f),this.wa=zs("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Qr(f&&f.concurrentRequestLimit),this.Da=new ks,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Va.prototype,n.la=8,n.G=1,n.connect=function(f,y,b,w){ot(0),this.W=f,this.H=y||{},b&&w!==void 0&&(this.H.OSID=b,this.H.OAID=w),this.F=this.X,this.I=_c(this,null,this.W),ka(this)};function cl(f){if(hc(f),f.G==3){var y=f.U++,b=wn(f.I);if(Je(b,"SID",f.K),Je(b,"RID",y),Je(b,"TYPE","terminate"),qs(f,b),y=new cn(f,f.j,y),y.L=2,y.v=Ps(wn(b)),b=!1,d.navigator&&d.navigator.sendBeacon)try{b=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!b&&d.Image&&(new Image().src=y.v,b=!0),b||(y.g=vc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Os(y)}yc(f)}function La(f){f.g&&(Fs(f),f.g.cancel(),f.g=null)}function hc(f){La(f),f.u&&(d.clearTimeout(f.u),f.u=null),Ua(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&d.clearTimeout(f.s),f.s=null)}function ka(f){if(!Ra(f.h)&&!f.s){f.s=!0;var y=f.Ga;ue||V(),me||(ue(),me=!0),ke.add(y,f),f.B=0}}function hd(f,y){return Ca(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=y.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=St(v(f.Ga,f,y),dl(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const z=new cn(this,this.j,f);let G=this.o;if(this.S&&(G?(G=I(G),M(G,this.S)):G=this.S),this.m!==null||this.O||(z.H=G,G=null),this.P)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var w=this.i[b];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=dc(this,z,y),b=wn(this.I),Je(b,"RID",f),Je(b,"CVER",22),this.D&&Je(b,"X-HTTP-Session-Id",this.D),qs(this,b),G&&(this.O?y="headers="+encodeURIComponent(String(ul(G)))+"&"+y:this.m&&kt(b,this.m,G)),Da(this.h,z),this.Ua&&Je(b,"TYPE","init"),this.P?(Je(b,"$req",y),Je(b,"SID","null"),z.T=!0,ar(z,b,null)):ar(z,b,y),this.G=2}}else this.G==3&&(f?fl(this,f):this.i.length==0||Ra(this.h)||fl(this))};function fl(f,y){var b;y?b=y.l:b=f.U++;const w=wn(f.I);Je(w,"SID",f.K),Je(w,"RID",b),Je(w,"AID",f.T),qs(f,w),f.m&&f.o&&kt(w,f.m,f.o),b=new cn(f,f.j,b,f.B+1),f.m===null&&(b.H=f.o),y&&(f.i=y.D.concat(f.i)),y=dc(f,b,1e3),b.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Da(f.h,b),ar(b,w,y)}function qs(f,y){f.H&&ie(f.H,function(b,w){Je(y,w,b)}),f.l&&il({},function(b,w){Je(y,w,b)})}function dc(f,y,b){b=Math.min(f.i.length,b);var w=f.l?v(f.l.Na,f.l,f):null;e:{var z=f.i;let G=-1;for(;;){const oe=["count="+b];G==-1?0<b?(G=z[0].g,oe.push("ofs="+G)):G=0:oe.push("ofs="+G);let Ue=!0;for(let xt=0;xt<b;xt++){let Be=z[xt].g;const Ut=z[xt].map;if(Be-=G,0>Be)G=Math.max(0,z[xt].g-100),Ue=!1;else try{Sr(Ut,oe,"req"+Be+"_")}catch{w&&w(Ut)}}if(Ue){w=oe.join("&");break e}}}return f=f.i.splice(0,b),y.D=f,w}function pc(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;ue||V(),me||(ue(),me=!0),ke.add(y,f),f.v=0}}function hl(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=St(v(f.Fa,f),dl(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,mc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=St(v(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),La(this),mc(this))};function Fs(f){f.A!=null&&(d.clearTimeout(f.A),f.A=null)}function mc(f){f.g=new cn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var y=wn(f.qa);Je(y,"RID","rpc"),Je(y,"SID",f.K),Je(y,"AID",f.T),Je(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&Je(y,"TO",f.ja),Je(y,"TYPE","xmlhttp"),qs(f,y),f.m&&f.o&&kt(y,f.m,f.o),f.L&&(f.g.I=f.L);var b=f.g;f=f.ia,b.L=1,b.v=Ps(wn(y)),b.m=null,b.P=!0,Kr(b,f)}n.Za=function(){this.C!=null&&(this.C=null,La(this),hl(this),ot(19))};function Ua(f){f.C!=null&&(d.clearTimeout(f.C),f.C=null)}function gc(f,y){var b=null;if(f.g==y){Ua(f),Fs(f),f.g=null;var w=2}else if(nl(f.h,y))b=y.D,fn(f.h,y),w=1;else return;if(f.G!=0){if(y.o)if(w==1){b=y.m?y.m.length:0,y=Date.now()-y.F;var z=f.B;w=Ai(),Qe(w,new Nt(w,b)),ka(f)}else pc(f);else if(z=y.s,z==3||z==0&&0<y.X||!(w==1&&hd(f,y)||w==2&&hl(f)))switch(b&&0<b.length&&(y=f.h,y.i=y.i.concat(b)),z){case 1:ti(f,5);break;case 4:ti(f,10);break;case 3:ti(f,6);break;default:ti(f,2)}}}function dl(f,y){let b=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(b*=2),b*y}function ti(f,y){if(f.j.info("Error code "+y),y==2){var b=v(f.fb,f),w=f.Xa;const z=!w;w=new At(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ms(w,"https"),Ps(w),z?Ls(w.toString(),b):or(w.toString(),b)}else ot(2);f.G=0,f.l&&f.l.sa(y),yc(f),hc(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function yc(f){if(f.G=0,f.ka=[],f.l){const y=rl(f.h);(y.length!=0||f.i.length!=0)&&(x(f.ka,y),x(f.ka,f.i),f.h.i.length=0,L(f.i),f.i.length=0),f.l.ra()}}function _c(f,y,b){var w=b instanceof At?wn(b):new At(b);if(w.g!="")y&&(w.g=y+"."+w.g),Di(w,w.s);else{var z=d.location;w=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;var G=new At(null);w&&Ms(G,w),y&&(G.g=y),z&&Di(G,z),b&&(G.l=b),w=G}return b=f.D,y=f.ya,b&&y&&Je(w,b,y),Je(w,"VER",f.la),qs(f,w),w}function vc(f,y,b){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=f.Ca&&!f.pa?new $e(new Oi({eb:b})):new $e(f.pa),y.Ha(f.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ec(){}n=Ec.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ba(){}Ba.prototype.g=function(f,y){return new hn(f,y)};function hn(f,y){ht.call(this),this.g=new Va(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!Y(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!Y(y)&&(this.g.D=y,f=this.h,f!==null&&y in f&&(f=this.h,y in f&&delete f[y])),this.j=new Rr(this)}O(hn,ht),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){cl(this.g)},hn.prototype.o=function(f){var y=this.g;if(typeof f=="string"){var b={};b.__data__=f,f=b}else this.u&&(b={},b.__data__=sr(f),f=b);y.i.push(new oc(y.Ya++,f)),y.G==3&&ka(y)},hn.prototype.N=function(){this.g.l=null,delete this.j,cl(this.g),delete this.g,hn.aa.N.call(this)};function bc(f){$r.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(const b in y){f=b;break e}f=void 0}(this.i=f)&&(f=this.i,y=y!==null&&f in y?y[f]:void 0),this.data=y}else this.data=f}O(bc,$r);function Tc(){Zo.call(this),this.status=1}O(Tc,Zo);function Rr(f){this.g=f}O(Rr,Ec),Rr.prototype.ua=function(){Qe(this.g,"a")},Rr.prototype.ta=function(f){Qe(this.g,new bc(f))},Rr.prototype.sa=function(f){Qe(this.g,new Tc)},Rr.prototype.ra=function(){Qe(this.g,"b")},Ba.prototype.createWebChannel=Ba.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,VA=function(){return new Ba},PA=function(){return Ai()},MA=_r,Gm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ri.NO_ERROR=0,Ri.TIMEOUT=8,Ri.HTTP_ERROR=6,kf=Ri,Yr.COMPLETE="complete",xA=Yr,Xo.EventType=Gr,Gr.OPEN="a",Gr.CLOSE="b",Gr.ERROR="c",Gr.MESSAGE="d",ht.prototype.listen=ht.prototype.K,ou=Xo,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,NA=$e}).apply(typeof wf<"u"?wf:typeof self<"u"?self:typeof window<"u"?window:{});const kb="@firebase/firestore",Ub="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new Sh("@firebase/firestore");function mo(){return fa.logLevel}function de(n,...e){if(fa.logLevel<=Pe.DEBUG){const t=e.map(Dg);fa.debug(`Firestore (${Uo}): ${n}`,...t)}}function Ti(n,...e){if(fa.logLevel<=Pe.ERROR){const t=e.map(Dg);fa.error(`Firestore (${Uo}): ${n}`,...t)}}function wo(n,...e){if(fa.logLevel<=Pe.WARN){const t=e.map(Dg);fa.warn(`Firestore (${Uo}): ${n}`,...t)}}function Dg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,LA(n,s,t)}function LA(n,e,t){let s=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Ti(s),new Error(s)}function Ke(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||LA(e,a,s)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends gr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(an.UNAUTHENTICATED))}shutdown(){}}class bN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class TN{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let s=this.i;const a=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new vi,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await a(this.currentUser)})},d=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new vi)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ke(typeof s.accessToken=="string",31837,{l:s}),new kA(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new an(e)}}class SN{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=an.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AN{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new SN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const s=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const a=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Bb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Bb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=IN(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function Ve(n,e){return n<e?-1:n>e?1:0}function $m(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const a=n.charAt(s),l=e.charAt(s);if(a!==l)return gm(a)===gm(l)?Ve(a,l):gm(a)?1:-1}return Ve(n.length,e.length)}const RN=55296,CN=57343;function gm(n){const e=n.charCodeAt(0);return e>=RN&&e<=CN}function Io(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="__name__";class Pr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ae(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Pr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pr?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=Pr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ve(e.length,t.length)}static compareSegments(e,t){const s=Pr.isNumericId(e),a=Pr.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Pr.extractNumericId(e).compare(Pr.extractNumericId(t)):$m(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return as.fromString(e.substring(4,e.length-2))}}class st extends Pr{construct(e,t,s){return new st(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new st(t)}static emptyPath(){return new st([])}}const DN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Pr{construct(e,t,s){return new Xt(e,t,s)}static isValidIdentifier(e){return DN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zb}static keyField(){return new Xt([zb])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new he(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new he(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(s+=d,a++):(l(),a++)}if(l(),c)throw new he(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(st.fromString(e))}static fromName(e){return new ve(st.fromString(e).popFirst(5))}static empty(){return new ve(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(n,e,t){if(!t)throw new he(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ON(n,e,t,s){if(e===!0&&s===!0)throw new he(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qb(n){if(!ve.isDocumentKey(n))throw new he(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fb(n){if(ve.isDocumentKey(n))throw new he(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function BA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Rh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function Hr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rh(n);throw new he(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n,e){const t={typeString:n};return e&&(t.value=e),t}function ju(n,e){if(!BA(n))throw new he(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(a&&typeof c!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new he(X.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb=-62135596800,jb=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*jb);return new at(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Hb)throw new he(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jb}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ju(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Hb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:Dt("string",at._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new at(0,0))}static max(){return new Ie(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=-1;function NN(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=Ie.fromTimestamp(s===1e9?new at(t+1,0):new at(t,s));return new hs(a,ve.empty(),e)}function xN(n){return new hs(n.readTime,n.key,Su)}class hs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new hs(Ie.min(),ve.empty(),Su)}static max(){return new hs(Ie.max(),ve.empty(),Su)}}function MN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==PN)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,s)=>{t(e)})}static reject(e){return new J((t,s)=>{s(e)})}static waitFor(e){return new J((t,s)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&t()},p=>s(p))}),c=!0,l===a&&t()})}static or(e){let t=J.resolve(!1);for(const s of e)t=t.next(a=>a?J.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}static mapArray(e,t){return new J((s,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next(_=>{c[g]=_,++d,d===l&&s(c)},_=>a(_))}})}static doWhile(e,t){return new J((s,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):s()};l()})}}function LN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ch.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng=-1;function Dh(n){return n==null}function Zf(n){return n===0&&1/n==-1/0}function kN(n){return typeof n=="number"&&Number.isInteger(n)&&!Zf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="";function UN(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Gb(e)),e=BN(n.get(t),e);return Gb(e)}function BN(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case zA:t+="";break;default:t+=l}}return t}function Gb(n){return n+zA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function qA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new If(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new If(this.root,e,this.comparator,!1)}getReverseIterator(){return new If(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new If(this.root,e,this.comparator,!0)}}class If{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Wt.RED,this.left=a??Wt.EMPTY,this.right=l??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Wt(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Wt.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new Wt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yb(this.data.getIterator())}getIteratorFrom(e){return new Yb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Lt(this.comparator);return t.data=e,t}}class Yb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new Mn([])}unionWith(e){let t=new Lt(Xt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Mn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Io(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new FA("Invalid base64 string: "+l):l}}(e);return new en(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const zN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ds(n){if(Ke(!!n,39018),typeof n=="string"){let e=0;const t=zN.exec(n);if(Ke(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Et(n.seconds),nanos:Et(n.nanos)}}function Et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ps(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="server_timestamp",jA="__type__",GA="__previous_value__",$A="__local_write_time__";function xg(n){return(n?.mapValue?.fields||{})[jA]?.stringValue===HA}function Oh(n){const e=n.mapValue.fields[GA];return xg(e)?Oh(e):e}function Au(n){const e=ds(n.mapValue.fields[$A].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,t,s,a,l,c,d,p,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_}}const Jf="(default)";class wu{constructor(e,t){this.projectId=e,this.database=t||Jf}static empty(){return new wu("","")}get isDefaultDatabase(){return this.database===Jf}isEqual(e){return e instanceof wu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="__type__",FN="__max__",Rf={mapValue:{}},KA="__vector__",eh="value";function ms(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xg(n)?4:jN(n)?9007199254740991:HN(n)?10:11:Ae(28295,{value:n})}function jr(n,e){if(n===e)return!0;const t=ms(n);if(t!==ms(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Au(n).isEqual(Au(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ds(a.timestampValue),d=ds(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,l){return ps(a.bytesValue).isEqual(ps(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return Et(a.geoPointValue.latitude)===Et(l.geoPointValue.latitude)&&Et(a.geoPointValue.longitude)===Et(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Et(a.integerValue)===Et(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Et(a.doubleValue),d=Et(l.doubleValue);return c===d?Zf(c)===Zf(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return Io(n.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if($b(c)!==$b(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!jr(c[p],d[p])))return!1;return!0}(n,e);default:return Ae(52216,{left:n})}}function Iu(n,e){return(n.values||[]).find(t=>jr(t,e))!==void 0}function Ro(n,e){if(n===e)return 0;const t=ms(n),s=ms(e);if(t!==s)return Ve(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return function(l,c){const d=Et(l.integerValue||l.doubleValue),p=Et(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return Kb(n.timestampValue,e.timestampValue);case 4:return Kb(Au(n),Au(e));case 5:return $m(n.stringValue,e.stringValue);case 6:return function(l,c){const d=ps(l),p=ps(c);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const _=Ve(d[g],p[g]);if(_!==0)return _}return Ve(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const d=Ve(Et(l.latitude),Et(c.latitude));return d!==0?d:Ve(Et(l.longitude),Et(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Qb(n.arrayValue,e.arrayValue);case 10:return function(l,c){const d=l.fields||{},p=c.fields||{},g=d[eh]?.arrayValue,_=p[eh]?.arrayValue,E=Ve(g?.values?.length||0,_?.values?.length||0);return E!==0?E:Qb(g,_)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===Rf.mapValue&&c===Rf.mapValue)return 0;if(l===Rf.mapValue)return 1;if(c===Rf.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const v=$m(p[E],_[E]);if(v!==0)return v;const A=Ro(d[p[E]],g[_[E]]);if(A!==0)return A}return Ve(p.length,_.length)}(n.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function Kb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=ds(n),s=ds(e),a=Ve(t.seconds,s.seconds);return a!==0?a:Ve(t.nanos,s.nanos)}function Qb(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=Ro(t[a],s[a]);if(l)return l}return Ve(t.length,s.length)}function Co(n){return Ym(n)}function Ym(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const s=ds(t);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ps(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ve.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=Ym(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of s)l?l=!1:a+=",",a+=`${c}:${Ym(t.fields[c])}`;return a+"}"}(n.mapValue):Ae(61005,{value:n})}function Uf(n){switch(ms(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Oh(n);return e?16+Uf(e):16;case 5:return 2*n.stringValue.length;case 6:return ps(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,l)=>a+Uf(l),0)}(n.arrayValue);case 10:case 11:return function(s){let a=0;return bs(s.fields,(l,c)=>{a+=l.length+Uf(c)}),a}(n.mapValue);default:throw Ae(13486,{value:n})}}function Wb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Km(n){return!!n&&"integerValue"in n}function Mg(n){return!!n&&"arrayValue"in n}function Xb(n){return!!n&&"nullValue"in n}function Zb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bf(n){return!!n&&"mapValue"in n}function HN(n){return(n?.mapValue?.fields||{})[YA]?.stringValue===KA}function du(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return bs(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=du(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=du(n.arrayValue.values[t]);return e}return{...n}}function jN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===FN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Bf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=du(t)}setAll(e){let t=Xt.emptyPath(),s={},a=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,s,a),s={},a=[],t=d.popLast()}c?s[d.lastSegment()]=du(c):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());Bf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Bf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){bs(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new En(du(this.value))}}function QA(n){const e=[];return bs(n.fields,(t,s)=>{const a=new Xt([t]);if(Bf(s)){const l=QA(s.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new Mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,s,a,l,c,d){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new on(e,0,Ie.min(),Ie.min(),Ie.min(),En.empty(),0)}static newFoundDocument(e,t,s,a){return new on(e,1,t,Ie.min(),s,a,0)}static newNoDocument(e,t){return new on(e,2,t,Ie.min(),Ie.min(),En.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Ie.min(),Ie.min(),En.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t){this.position=e,this.inclusive=t}}function Jb(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?s=ve.comparator(ve.fromName(c.referenceValue),t.key):s=Ro(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function eT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,t="asc"){this.field=e,this.dir=t}}function GN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{}class Ct extends WA{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new YN(e,t,s):t==="array-contains"?new WN(e,s):t==="in"?new XN(e,s):t==="not-in"?new ZN(e,s):t==="array-contains-any"?new JN(e,s):new Ct(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new KN(e,s):new QN(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ro(t,this.value)):t!==null&&ms(this.value)===ms(t)&&this.matchesComparison(Ro(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mr extends WA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new mr(e,t)}matches(e){return XA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function XA(n){return n.op==="and"}function ZA(n){return $N(n)&&XA(n)}function $N(n){for(const e of n.filters)if(e instanceof mr)return!1;return!0}function Qm(n){if(n instanceof Ct)return n.field.canonicalString()+n.op.toString()+Co(n.value);if(ZA(n))return n.filters.map(e=>Qm(e)).join(",");{const e=n.filters.map(t=>Qm(t)).join(",");return`${n.op}(${e})`}}function JA(n,e){return n instanceof Ct?function(s,a){return a instanceof Ct&&s.op===a.op&&s.field.isEqual(a.field)&&jr(s.value,a.value)}(n,e):n instanceof mr?function(s,a){return a instanceof mr&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((l,c,d)=>l&&JA(c,a.filters[d]),!0):!1}(n,e):void Ae(19439)}function e0(n){return n instanceof Ct?function(t){return`${t.field.canonicalString()} ${t.op} ${Co(t.value)}`}(n):n instanceof mr?function(t){return t.op.toString()+" {"+t.getFilters().map(e0).join(" ,")+"}"}(n):"Filter"}class YN extends Ct{constructor(e,t,s){super(e,t,s),this.key=ve.fromName(s.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class KN extends Ct{constructor(e,t){super(e,"in",t),this.keys=t0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class QN extends Ct{constructor(e,t){super(e,"not-in",t),this.keys=t0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function t0(n,e){return(e.arrayValue?.values||[]).map(t=>ve.fromName(t.referenceValue))}class WN extends Ct{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mg(t)&&Iu(t.arrayValue,this.value)}}class XN extends Ct{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Iu(this.value.arrayValue,t)}}class ZN extends Ct{constructor(e,t){super(e,"not-in",t)}matches(e){if(Iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Iu(this.value.arrayValue,t)}}class JN extends Ct{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Iu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,t=null,s=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function tT(n,e=null,t=[],s=[],a=null,l=null,c=null){return new e2(n,e,t,s,a,l,c)}function Pg(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Qm(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),Dh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Co(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Co(s)).join(",")),e.Te=t}return e.Te}function Vg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!GN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!JA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eT(n.startAt,e.startAt)&&eT(n.endAt,e.endAt)}function Wm(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,t=null,s=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function t2(n,e,t,s,a,l,c,d){return new Gu(n,e,t,s,a,l,c,d)}function Lg(n){return new Gu(n)}function nT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function n0(n){return n.collectionGroup!==null}function pu(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Lt(Xt.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new nh(l,s))}),t.has(Xt.keyField().canonicalString())||e.Ie.push(new nh(Xt.keyField(),s))}return e.Ie}function Ur(n){const e=Re(n);return e.Ee||(e.Ee=n2(e,pu(n))),e.Ee}function n2(n,e){if(n.limitType==="F")return tT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new nh(a.field,l)});const t=n.endAt?new th(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new th(n.startAt.position,n.startAt.inclusive):null;return tT(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Xm(n,e){const t=n.filters.concat([e]);return new Gu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zm(n,e,t){return new Gu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nh(n,e){return Vg(Ur(n),Ur(e))&&n.limitType===e.limitType}function r0(n){return`${Pg(Ur(n))}|lt:${n.limitType}`}function go(n){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(a=>e0(a)).join(", ")}]`),Dh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(a=>Co(a)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(a=>Co(a)).join(",")),`Target(${s})`}(Ur(n))}; limitType=${n.limitType})`}function xh(n,e){return e.isFoundDocument()&&function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ve.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(n,e)&&function(s,a){for(const l of pu(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0}(n,e)&&function(s,a){return!(s.startAt&&!function(c,d,p){const g=Jb(c,d,p);return c.inclusive?g<=0:g<0}(s.startAt,pu(s),a)||s.endAt&&!function(c,d,p){const g=Jb(c,d,p);return c.inclusive?g>=0:g>0}(s.endAt,pu(s),a))}(n,e)}function r2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function i0(n){return(e,t)=>{let s=!1;for(const a of pu(n)){const l=i2(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function i2(n,e,t){const s=n.field.isKeyField()?ve.comparator(e.key,t.key):function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Ro(p,g):Ae(42886)}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){bs(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return qA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=new ft(ve.comparator);function Si(){return s2}const s0=new ft(ve.comparator);function lu(...n){let e=s0;for(const t of n)e=e.insert(t.key,t);return e}function a0(n){let e=s0;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function oa(){return mu()}function o0(){return mu()}function mu(){return new va(n=>n.toString(),(n,e)=>n.isEqual(e))}const a2=new ft(ve.comparator),o2=new Lt(ve.comparator);function Le(...n){let e=o2;for(const t of n)e=e.add(t);return e}const l2=new Lt(Ve);function u2(){return l2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zf(e)?"-0":e}}function l0(n){return{integerValue:""+n}}function c2(n,e){return kN(e)?l0(e):kg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(){this._=void 0}}function f2(n,e,t){return n instanceof Ru?function(a,l){const c={fields:{[jA]:{stringValue:HA},[$A]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&xg(l)&&(l=Oh(l)),l&&(c.fields[GA]=l),{mapValue:c}}(t,e):n instanceof Cu?c0(n,e):n instanceof Du?f0(n,e):function(a,l){const c=u0(a,l),d=rT(c)+rT(a.Ae);return Km(c)&&Km(a.Ae)?l0(d):kg(a.serializer,d)}(n,e)}function h2(n,e,t){return n instanceof Cu?c0(n,e):n instanceof Du?f0(n,e):t}function u0(n,e){return n instanceof rh?function(s){return Km(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class Ru extends Mh{}class Cu extends Mh{constructor(e){super(),this.elements=e}}function c0(n,e){const t=h0(e);for(const s of n.elements)t.some(a=>jr(a,s))||t.push(s);return{arrayValue:{values:t}}}class Du extends Mh{constructor(e){super(),this.elements=e}}function f0(n,e){let t=h0(e);for(const s of n.elements)t=t.filter(a=>!jr(a,s));return{arrayValue:{values:t}}}class rh extends Mh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function rT(n){return Et(n.integerValue||n.doubleValue)}function h0(n){return Mg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,t){this.field=e,this.transform=t}}function p2(n,e){return n.field.isEqual(e.field)&&function(s,a){return s instanceof Cu&&a instanceof Cu||s instanceof Du&&a instanceof Du?Io(s.elements,a.elements,jr):s instanceof rh&&a instanceof rh?jr(s.Ae,a.Ae):s instanceof Ru&&a instanceof Ru}(n.transform,e.transform)}class m2{constructor(e,t){this.version=e,this.transformResults=t}}class bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ph{}function d0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Vh(n.key,bn.none()):new $u(n.key,n.data,bn.none());{const t=n.data,s=En.empty();let a=new Lt(Xt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),a=a.add(l)}return new Ts(n.key,s,new Mn(a.toArray()),bn.none())}}function g2(n,e,t){n instanceof $u?function(a,l,c){const d=a.value.clone(),p=sT(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Ts?function(a,l,c){if(!zf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=sT(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(p0(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function gu(n,e,t,s){return n instanceof $u?function(l,c,d,p){if(!zf(l.precondition,c))return d;const g=l.value.clone(),_=aT(l.fieldTransforms,p,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,e,t,s):n instanceof Ts?function(l,c,d,p){if(!zf(l.precondition,c))return d;const g=aT(l.fieldTransforms,p,c),_=c.data;return _.setAll(p0(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(E=>E.field))}(n,e,t,s):function(l,c,d){return zf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function y2(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=u0(s.transform,a||null);l!=null&&(t===null&&(t=En.empty()),t.set(s.field,l))}return t||null}function iT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Io(s,a,(l,c)=>p2(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class $u extends Ph{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ts extends Ph{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function p0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function sT(n,e,t){const s=new Map;Ke(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);s.set(l.field,h2(c,d,t[a]))}return s}function aT(n,e,t){const s=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);s.set(a.field,f2(l,c,e))}return s}class Vh extends Ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _2 extends Ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&g2(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=gu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=gu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=o0();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=d0(c,d);p!==null&&s.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(Ie.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&Io(this.mutations,e.mutations,(t,s)=>iT(t,s))&&Io(this.baseMutations,e.baseMutations,(t,s)=>iT(t,s))}}class Ug{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){Ke(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=function(){return a2}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,s[c].version);return new Ug(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt,qe;function T2(n){switch(n){case X.OK:return Ae(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Ae(15467,{code:n})}}function m0(n){if(n===void 0)return Ti("GRPC error has no .code"),X.UNKNOWN;switch(n){case Rt.OK:return X.OK;case Rt.CANCELLED:return X.CANCELLED;case Rt.UNKNOWN:return X.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return X.INTERNAL;case Rt.UNAVAILABLE:return X.UNAVAILABLE;case Rt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Rt.NOT_FOUND:return X.NOT_FOUND;case Rt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Rt.ABORTED:return X.ABORTED;case Rt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Rt.DATA_LOSS:return X.DATA_LOSS;default:return Ae(39323,{code:n})}}(qe=Rt||(Rt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=new as([4294967295,4294967295],0);function oT(n){const e=S2().encode(n),t=new OA;return t.update(e),new Uint8Array(t.digest())}function lT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new as([t,s],0),new as([a,l],0)]}class Bg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new uu(`Invalid padding: ${t}`);if(s<0)throw new uu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new uu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new uu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=as.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(as.fromNumber(s)));return a.compare(A2)===1&&(a=new as([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=oT(e),[s,a]=lT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,a,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Bg(l,a,t);return s.forEach(d=>c.insert(d)),c}insert(e){if(this.ge===0)return;const t=oT(e),[s,a]=lT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Yu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Lh(Ie.min(),a,new ft(Ve),Si(),Le())}}class Yu{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Yu(s,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class g0{constructor(e,t){this.targetId=e,this.Ce=t}}class y0{constructor(e,t,s=en.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class uT{constructor(){this.ve=0,this.Fe=cT(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),t=Le(),s=Le();return this.Fe.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Ae(38017,{changeType:l})}}),new Yu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=cT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class w2{constructor(e){this.Ge=e,this.ze=new Map,this.je=Si(),this.Je=Cf(),this.He=Cf(),this.Ye=new ft(Ve)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((s,a)=>{this.rt(a)&&t(a)})}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Wm(l))if(s===0){const c=new ve(l.path);this.et(t,c,on.newNoDocument(c,Ie.min()))}else Ke(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=ps(s).toUint8Array()}catch(p){if(p instanceof FA)return wo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Bg(c,a,l)}catch(p){return wo(p instanceof uu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach(l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)}),a}Tt(e){const t=new Map;this.ze.forEach((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Wm(d.target)){const p=new ve(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,on.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}});let s=Le();this.He.forEach((l,c)=>{let d=!0;c.forEachWhile(p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(s=s.add(l))}),this.je.forEach((l,c)=>c.setReadTime(e));const a=new Lh(e,t,this.Ye,this.je,s);return this.je=Si(),this.Je=Cf(),this.He=Cf(),this.Ye=new ft(Ve),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new uT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Lt(Ve),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Lt(Ve),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new uT),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Cf(){return new ft(ve.comparator)}function cT(){return new ft(ve.comparator)}const I2={asc:"ASCENDING",desc:"DESCENDING"},R2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C2={and:"AND",or:"OR"};class D2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jm(n,e){return n.useProto3Json||Dh(e)?e:{value:e}}function ih(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function O2(n,e){return ih(n,e.toTimestamp())}function Br(n){return Ke(!!n,49232),Ie.fromTimestamp(function(t){const s=ds(t);return new at(s.seconds,s.nanos)}(n))}function zg(n,e){return eg(n,e).canonicalString()}function eg(n,e){const t=function(a){return new st(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function v0(n){const e=st.fromString(n);return Ke(A0(e),10190,{key:e.toString()}),e}function tg(n,e){return zg(n.databaseId,e.path)}function ym(n,e){const t=v0(e);if(t.get(1)!==n.databaseId.projectId)throw new he(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(b0(t))}function E0(n,e){return zg(n.databaseId,e)}function N2(n){const e=v0(n);return e.length===4?st.emptyPath():b0(e)}function ng(n){return new st(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function b0(n){return Ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function fT(n,e,t){return{name:tg(n,e),fields:t.value.mapValue.fields}}function x2(n,e){let t;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ae(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(g,_){return g.useProto3Json?(Ke(_===void 0||typeof _=="string",58123),en.fromBase64String(_||"")):(Ke(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),en.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(g){const _=g.code===void 0?X.UNKNOWN:m0(g.code);return new he(_,g.message||"")}(c);t=new y0(s,a,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=ym(n,s.document.name),l=Br(s.document.updateTime),c=s.document.createTime?Br(s.document.createTime):Ie.min(),d=new En({mapValue:{fields:s.document.fields}}),p=on.newFoundDocument(a,l,c,d),g=s.targetIds||[],_=s.removedTargetIds||[];t=new qf(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=ym(n,s.document),l=s.readTime?Br(s.readTime):Ie.min(),c=on.newNoDocument(a,l),d=s.removedTargetIds||[];t=new qf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=ym(n,s.document),l=s.removedTargetIds||[];t=new qf([],l,a,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,c=new b2(a,l),d=s.targetId;t=new g0(d,c)}}return t}function M2(n,e){let t;if(e instanceof $u)t={update:fT(n,e.key,e.value)};else if(e instanceof Vh)t={delete:tg(n,e.key)};else if(e instanceof Ts)t={update:fT(n,e.key,e.data),updateMask:F2(e.fieldMask)};else{if(!(e instanceof _2))return Ae(16599,{Vt:e.type});t={verify:tg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,c){const d=c.transform;if(d instanceof Ru)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Cu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Du)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof rh)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ae(20930,{transform:c.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:O2(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae(27497)}(n,e.precondition)),t}function P2(n,e){return n&&n.length>0?(Ke(e!==void 0,14353),n.map(t=>function(a,l){let c=a.updateTime?Br(a.updateTime):Br(l);return c.isEqual(Ie.min())&&(c=Br(l)),new m2(c,a.transformResults||[])}(t,e))):[]}function V2(n,e){return{documents:[E0(n,e.path)]}}function L2(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=E0(n,a);const l=function(g){if(g.length!==0)return S0(mr.create(g,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(g){if(g.length!==0)return g.map(_=>function(v){return{field:yo(v.field),direction:B2(v.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Jm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ft:t,parent:a}}function k2(n){let e=N2(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){Ke(s===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(E){const v=T0(E);return v instanceof mr&&ZA(v)?v.getFilters():[v]}(t.where));let c=[];t.orderBy&&(c=function(E){return E.map(v=>function(O){return new nh(_o(O.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(v))}(t.orderBy));let d=null;t.limit&&(d=function(E){let v;return v=typeof E=="object"?E.value:E,Dh(v)?null:v}(t.limit));let p=null;t.startAt&&(p=function(E){const v=!!E.before,A=E.values||[];return new th(A,v)}(t.startAt));let g=null;return t.endAt&&(g=function(E){const v=!E.before,A=E.values||[];return new th(A,v)}(t.endAt)),t2(e,a,c,l,d,"F",p,g)}function U2(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function T0(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=_o(t.unaryFilter.field);return Ct.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=_o(t.unaryFilter.field);return Ct.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=_o(t.unaryFilter.field);return Ct.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=_o(t.unaryFilter.field);return Ct.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}}(n):n.fieldFilter!==void 0?function(t){return Ct.create(_o(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return mr.create(t.compositeFilter.filters.map(s=>T0(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}}(t.compositeFilter.op))}(n):Ae(30097,{filter:n})}function B2(n){return I2[n]}function z2(n){return R2[n]}function q2(n){return C2[n]}function yo(n){return{fieldPath:n.canonicalString()}}function _o(n){return Xt.fromServerFormat(n.fieldPath)}function S0(n){return n instanceof Ct?function(t){if(t.op==="=="){if(Zb(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NAN"}};if(Xb(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Zb(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NAN"}};if(Xb(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(t.field),op:z2(t.op),value:t.value}}}(n):n instanceof mr?function(t){const s=t.getFilters().map(a=>S0(a));return s.length===1?s[0]:{compositeFilter:{op:q2(t.op),filters:s}}}(n):Ae(54877,{filter:n})}function F2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function A0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,t,s,a,l=Ie.min(),c=Ie.min(),d=en.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.yt=e}}function j2(n){const e=k2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(){this.Cn=new $2}addToCollectionParentIndex(e,t){return this.Cn.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(hs.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(hs.min())}updateCollectionGroup(e,t,s){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class $2{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Lt(st.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Lt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},w0=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(w0,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Do(0)}static cr(){return new Do(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="LruGarbageCollector",Y2=1048576;function pT([n,e],[t,s]){const a=Ve(n,t);return a===0?Ve(e,s):a}class K2{constructor(e){this.Ir=e,this.buffer=new Lt(pT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();pT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Q2{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(dT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zo(t)?de(dT,"Ignoring IndexedDB error during garbage collection: ",t):await Bo(t)}await this.Vr(3e5)})}}class W2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return J.resolve(Ch.ce);const s=new K2(t);return this.mr.forEachTarget(e,a=>s.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>s.Ar(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(hT)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hT):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,l,c,d,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a))).next(E=>(s=E,d=Date.now(),this.removeTargets(e,s,t))).next(E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(E=>(g=Date.now(),mo()<=Pe.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E})))}}function X2(n,e){return new W2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.changes=new va(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?J.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(s!==null&&gu(s.mutation,a,Mn.empty(),at.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Le()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Le()){const a=oa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(l=>{let c=lu();return l.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const s=oa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Le()))}populateOverlays(e,t,s){const a=[];return s.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,s,a){let l=Si();const c=mu(),d=function(){return mu()}();return t.forEach((p,g)=>{const _=s.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof Ts)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),gu(_.mutation,g,_.mutation.getFieldMask(),at.now())):c.set(g.key,Mn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((g,_)=>c.set(g,_)),t.forEach((g,_)=>d.set(g,new J2(_,c.get(g)??null))),d))}recalculateAndSaveOverlays(e,t){const s=mu();let a=new ft((c,d)=>c-d),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(p=>{const g=t.get(p);if(g===null)return;let _=s.get(p)||Mn.empty();_=d.applyToLocalView(g,_),s.set(p,_);const E=(a.get(d.batchId)||Le()).add(p);a=a.insert(d.batchId,E)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,_=p.value,E=o0();_.forEach(v=>{if(!l.has(v)){const A=d0(t.get(v),s.get(v));A!==null&&E.set(v,A),l=l.add(v)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return J.waitFor(c)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,a){return function(c){return ve.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):n0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):J.resolve(oa());let d=Su,p=l;return c.next(g=>J.forEach(g,(_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(_)?J.resolve():this.remoteDocumentCache.getEntry(e,_).next(v=>{p=p.insert(_,v)}))).next(()=>this.populateOverlays(e,g,l)).next(()=>this.computeViews(e,p,g,Le())).next(_=>({batchId:d,changes:a0(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(s=>{let a=lu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let c=lu();return this.indexManager.getCollectionParents(e,l).next(d=>J.forEach(d,p=>{const g=function(E,v){return new Gu(v,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,s,a).next(_=>{_.forEach((E,v)=>{c=c.insert(E,v)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a))).next(c=>{l.forEach((p,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,on.newInvalidDocument(_)))});let d=lu();return c.forEach((p,g)=>{const _=l.get(p);_!==void 0&&gu(_.mutation,g,Mn.empty(),at.now()),xh(t,g)&&(d=d.insert(p,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return J.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Br(a.createTime)}}(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(a){return{name:a.name,query:j2(a.bundledQuery),readTime:Br(a.readTime)}}(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.overlays=new ft(ve.comparator),this.qr=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const s=oa();return J.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,l)=>{this.St(e,t,l)}),J.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.qr.delete(s)),J.resolve()}getOverlaysForCollection(e,t,s){const a=oa(),l=t.length+1,c=new ve(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>s&&a.set(p.getKey(),p)}return J.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new ft((g,_)=>g-_);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let _=l.get(g.largestBatchId);_===null&&(_=oa(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=oa(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,_)=>d.set(g,_)),!(d.size()>=a)););return J.resolve(d)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new E2(t,s));let l=this.qr.get(t);l===void 0&&(l=Le(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(){this.Qr=new Lt(Ft.$r),this.Ur=new Lt(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Ft(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Gr(new Ft(e,t))}zr(e,t){e.forEach(s=>this.removeReference(s,t))}jr(e){const t=new ve(new st([])),s=new Ft(t,e),a=new Ft(t,e+1),l=[];return this.Ur.forEachInRange([s,a],c=>{this.Gr(c),l.push(c.key)}),l}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ve(new st([])),s=new Ft(t,e),a=new Ft(t,e+1);let l=Le();return this.Ur.forEachInRange([s,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Ft(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ft{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||Ve(e.Yr,t.Yr)}static Kr(e,t){return Ve(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Lt(Ft.$r)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new v2(l,t,s,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new Ft(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return J.resolve(c)}lookupMutationBatch(e,t){return J.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),l=a<0?0:a;return J.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?Ng:this.tr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ft(t,0),a=new Ft(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],c=>{const d=this.Xr(c.Yr);l.push(d)}),J.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Lt(Ve);return t.forEach(a=>{const l=new Ft(a,0),c=new Ft(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],d=>{s=s.add(d.Yr)})}),J.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;ve.isDocumentKey(l)||(l=l.child(""));const c=new Ft(new ve(l),0);let d=new Lt(Ve);return this.Zr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Yr)),!0)},c),J.resolve(this.ti(d))}ti(e){const t=[];return e.forEach(s=>{const a=this.Xr(s);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){Ke(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return J.forEach(t.mutations,a=>{const l=new Ft(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,t){const s=new Ft(t,0),a=this.Zr.firstAfterOrEqual(s);return J.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.ri=e,this.docs=function(){return new ft(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return J.resolve(s?s.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let s=Si();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():on.newInvalidDocument(a))}),J.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=Si();const c=t.path,d=new ve(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||MN(xN(_),s)<=0||(a.has(_.key)||xh(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return J.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Ae(9500)}ii(e,t){return J.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new ax(this)}getSize(e){return J.resolve(this.size)}}class ax extends Z2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)}),J.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.persistence=e,this.si=new va(t=>Pg(t),Vg),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new qg,this.targetCount=0,this.ai=Do.ur()}forEachTarget(e,t){return this.si.forEach((s,a)=>t(a)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),J.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Do(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.Pr(t),J.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.si.forEach((c,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),J.waitFor(l).next(()=>a)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return J.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),J.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),J.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return J.resolve(s)}containsKey(e,t){return J.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ch(0),this.li=!1,this.li=!0,this.hi=new rx,this.referenceDelegate=e(this),this.Pi=new ox(this),this.indexManager=new G2,this.remoteDocumentCache=function(a){return new sx(a)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new H2(t),this.Ii=new tx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new ix(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){de("MemoryPersistence","Starting transaction:",e);const a=new lx(this.ci.next());return this.referenceDelegate.Ei(),s(a).next(l=>this.referenceDelegate.di(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ai(e,t){return J.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,t)))}}class lx extends VN{constructor(e){super(),this.currentSequenceNumber=e}}class Fg{constructor(e){this.persistence=e,this.Ri=new qg,this.Vi=null}static mi(e){return new Fg(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),J.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),J.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(a=>this.fi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.fi.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.fi,s=>{const a=ve.fromPath(s);return this.gi(e,a).next(l=>{l||t.removeEntry(a,Ie.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return J.or([()=>J.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class sh{constructor(e,t){this.persistence=e,this.pi=new va(s=>UN(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=X2(this,t)}static mi(e,t){return new sh(e,t)}Ei(){}di(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}wr(e){let t=0;return this.pr(e,s=>{t++}).next(()=>t)}pr(e,t){return J.forEach(this.pi,(s,a)=>this.br(e,s,a).next(l=>l?J.resolve():t(a)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,c=>this.br(e,c,t).next(d=>{d||(s++,l.removeEntry(c,Ie.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),J.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),J.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Uf(e.data.value)),t}br(e,t,s){return J.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return J.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=Le(),a=Le();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Hg(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return L1()?8:LN(ln())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ys(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ws(e,t,a,s).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new ux;return this.Ss(e,t,c).next(d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)})}).next(()=>l.result)}bs(e,t,s,a){return s.documentReadCount<this.fs?(mo()<=Pe.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",go(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),J.resolve()):(mo()<=Pe.DEBUG&&de("QueryEngine","Query:",go(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(mo()<=Pe.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",go(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ur(t))):J.resolve())}ys(e,t){if(nT(t))return J.resolve(null);let s=Ur(t);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Zm(t,null,"F"),s=Ur(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const c=Le(...l);return this.ps.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.Ds(t,d);return this.Cs(t,g,c,p.readTime)?this.ys(e,Zm(t,null,"F")):this.vs(e,g,t,p)}))})))}ws(e,t,s,a){return nT(t)||a.isEqual(Ie.min())?J.resolve(null):this.ps.getDocuments(e,s).next(l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,a)?J.resolve(null):(mo()<=Pe.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),go(t)),this.vs(e,c,t,NN(a,Su)).next(d=>d))})}Ds(e,t){let s=new Lt(i0(e));return t.forEach((a,l)=>{xh(e,l)&&(s=s.add(l))}),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,s){return mo()<=Pe.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",go(t)),this.ps.getDocumentsMatchingQuery(e,t,hs.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="LocalStore",fx=3e8;class hx{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new ft(Ve),this.xs=new va(l=>Pg(l),Vg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ex(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function dx(n,e,t,s){return new hx(n,e,t,s)}async function R0(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const c=[],d=[];let p=Le();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(s,p).next(g=>({Ls:g,removedBatchIds:c,addedBatchIds:d}))})})}function px(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return function(d,p,g,_){const E=g.batch,v=E.keys();let A=J.resolve();return v.forEach(O=>{A=A.next(()=>_.getEntry(p,O)).next(L=>{const x=g.docVersions.get(O);Ke(x!==null,48541),L.version.compareTo(x)<0&&(E.applyToRemoteDocument(L,g),L.isValidDocument()&&(L.setReadTime(g.commitVersion),_.addEntry(L)))})}),A.next(()=>d.mutationQueue.removeMutationBatch(p,E))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(d){let p=Le();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function C0(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function mx(n,e){const t=Re(n),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach((_,E)=>{const v=a.get(E);if(!v)return;d.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,E).next(()=>t.Pi.addMatchingKeys(l,_.addedDocuments,E)));let A=v.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?A=A.withResumeToken(en.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,s)),a=a.insert(E,A),function(L,x,$){return L.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=fx?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(v,A,_)&&d.push(t.Pi.updateTargetData(l,A))});let p=Si(),g=Le();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(gx(l,c,e.documentUpdates).next(_=>{p=_.ks,g=_.qs})),!s.isEqual(Ie.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next(E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s));d.push(_)}return J.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,g)).next(()=>p)}).then(l=>(t.Ms=a,l))}function gx(n,e,t){let s=Le(),a=Le();return t.forEach(l=>s=s.add(l)),e.getEntries(n,s).next(l=>{let c=Si();return t.forEach((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Ie.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):de(jg,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)}),{ks:c,qs:a}})}function yx(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Ng),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function _x(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Pi.getTargetData(s,e).next(l=>l?(a=l,J.resolve(a)):t.Pi.allocateTargetId(s).next(c=>(a=new rs(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s})}async function rg(n,e,t){const s=Re(n),a=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,c=>s.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!zo(c))throw c;de(jg,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function mT(n,e,t){const s=Re(n);let a=Ie.min(),l=Le();return s.persistence.runTransaction("Execute query","readwrite",c=>function(p,g,_){const E=Re(p),v=E.xs.get(_);return v!==void 0?J.resolve(E.Ms.get(v)):E.Pi.getTargetData(g,_)}(s,c,Ur(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,d.targetId).next(p=>{l=p})}).next(()=>s.Fs.getDocumentsMatchingQuery(c,e,t?a:Ie.min(),t?l:Le())).next(d=>(vx(s,r2(e),d),{documents:d,Qs:l})))}function vx(n,e,t){let s=n.Os.get(e)||Ie.min();t.forEach((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),n.Os.set(e,s)}class gT{constructor(){this.activeTargetIds=u2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ex{constructor(){this.Mo=new gT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gT,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="ConnectivityMonitor";class _T{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(yT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(yT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Df=null;function ig(){return Df===null?Df=function(){return 268435456+Math.round(2147483648*Math.random())}():Df++,"0x"+Df.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="RestConnection",Tx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Sx{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Jf?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,l){const c=ig(),d=this.zo(e,t.toUriEncodedString());de(_m,`Sending RPC '${e}' ${c}:`,d,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,l);const{host:g}=new URL(d),_=Vo(g);return this.Jo(e,d,p,s,_).then(E=>(de(_m,`Received RPC '${e}' ${c}: `,E),E),E=>{throw wo(_m,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",s),E})}Ho(e,t,s,a,l,c){return this.Go(e,t,s,a,l)}jo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}zo(e,t){const s=Tx[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class wx extends Sx{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const c=ig();return new Promise((d,p)=>{const g=new NA;g.setWithCredentials(!0),g.listenOnce(xA.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case kf.NO_ERROR:const E=g.getResponseJson();de(sn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case kf.TIMEOUT:de(sn,`RPC '${e}' ${c} timed out`),p(new he(X.DEADLINE_EXCEEDED,"Request time out"));break;case kf.HTTP_ERROR:const v=g.getStatus();if(de(sn,`RPC '${e}' ${c} failed with status:`,v,"response text:",g.getResponseText()),v>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const O=A?.error;if(O&&O.status&&O.message){const L=function($){const Y=$.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(Y)>=0?Y:X.UNKNOWN}(O.status);p(new he(L,O.message))}else p(new he(X.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new he(X.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{de(sn,`RPC '${e}' ${c} completed.`)}});const _=JSON.stringify(a);de(sn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,s,15)})}T_(e,t,s){const a=ig(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=VA(),d=PA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const _=l.join("");de(sn,`Creating RPC '${e}' stream ${a}: ${_}`,p);const E=c.createWebChannel(_,p);this.I_(E);let v=!1,A=!1;const O=new Ax({Yo:x=>{A?de(sn,`Not sending because RPC '${e}' stream ${a} is closed:`,x):(v||(de(sn,`Opening RPC '${e}' stream ${a} transport.`),E.open(),v=!0),de(sn,`RPC '${e}' stream ${a} sending:`,x),E.send(x))},Zo:()=>E.close()}),L=(x,$,Y)=>{x.listen($,te=>{try{Y(te)}catch(ae){setTimeout(()=>{throw ae},0)}})};return L(E,ou.EventType.OPEN,()=>{A||(de(sn,`RPC '${e}' stream ${a} transport opened.`),O.o_())}),L(E,ou.EventType.CLOSE,()=>{A||(A=!0,de(sn,`RPC '${e}' stream ${a} transport closed`),O.a_(),this.E_(E))}),L(E,ou.EventType.ERROR,x=>{A||(A=!0,wo(sn,`RPC '${e}' stream ${a} transport errored. Name:`,x.name,"Message:",x.message),O.a_(new he(X.UNAVAILABLE,"The operation could not be completed")))}),L(E,ou.EventType.MESSAGE,x=>{if(!A){const $=x.data[0];Ke(!!$,16349);const Y=$,te=Y?.error||Y[0]?.error;if(te){de(sn,`RPC '${e}' stream ${a} received error:`,te);const ae=te.status;let re=function(I){const R=Rt[I];if(R!==void 0)return m0(R)}(ae),ie=te.message;re===void 0&&(re=X.INTERNAL,ie="Unknown error status: "+ae+" with message "+te.message),A=!0,O.a_(new he(re,ie)),E.close()}else de(sn,`RPC '${e}' stream ${a} received:`,$),O.u_($)}}),L(d,MA.STAT_EVENT,x=>{x.stat===Gm.PROXY?de(sn,`RPC '${e}' stream ${a} detected buffering proxy`):x.stat===Gm.NOPROXY&&de(sn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{O.__()},0),O}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(n){return new D2(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&de("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="PersistentStream";class O0{constructor(e,t,s,a,l,c,d,p){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new D0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(Ti(t.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.D_===t&&this.G_(s,a)},s=>{e(()=>{const a=new he(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)})})}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{s(()=>this.z_(a))}),this.stream.onMessage(a=>{s(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return de(vT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(de(vT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ix extends O0{constructor(e,t,s,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=x2(this.serializer,e),s=function(l){if(!("targetChange"in l))return Ie.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ie.min():c.readTime?Br(c.readTime):Ie.min()}(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=ng(this.serializer),t.addTarget=function(l,c){let d;const p=c.target;if(d=Wm(p)?{documents:V2(l,p)}:{query:L2(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=_0(l,c.resumeToken);const g=Jm(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ie.min())>0){d.readTime=ih(l,c.snapshotVersion.toTimestamp());const g=Jm(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,e);const s=U2(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=ng(this.serializer),t.removeTarget=e,this.q_(t)}}class Rx extends O0{constructor(e,t,s,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=P2(e.writeResults,e.commitTime),s=Br(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=ng(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>M2(this.serializer,s))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{}class Dx extends Cx{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new he(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Go(e,eg(t,s),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(X.UNKNOWN,l.toString())})}Ho(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Ho(e,eg(t,s),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(X.UNKNOWN,c.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Ox{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ti(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="RemoteStore";class Nx{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo(c=>{s.enqueueAndForget(async()=>{Ea(this)&&(de(ha,"Restarting streams for network reachability change."),await async function(p){const g=Re(p);g.Ea.add(4),await Ku(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Uh(g)}(this))})}),this.Ra=new Ox(s,a)}}async function Uh(n){if(Ea(n))for(const e of n.da)await e(!0)}async function Ku(n){for(const e of n.da)await e(!1)}function N0(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Kg(t)?Yg(t):qo(t).O_()&&$g(t,e))}function Gg(n,e){const t=Re(n),s=qo(t);t.Ia.delete(e),s.O_()&&x0(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ea(t)&&t.Ra.set("Unknown"))}function $g(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qo(n).Y_(e)}function x0(n,e){n.Va.Ue(e),qo(n).Z_(e)}function Yg(n){n.Va=new w2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),qo(n).start(),n.Ra.ua()}function Kg(n){return Ea(n)&&!qo(n).x_()&&n.Ia.size>0}function Ea(n){return Re(n).Ea.size===0}function M0(n){n.Va=void 0}async function xx(n){n.Ra.set("Online")}async function Mx(n){n.Ia.forEach((e,t)=>{$g(n,e)})}async function Px(n,e){M0(n),Kg(n)?(n.Ra.ha(e),Yg(n)):n.Ra.set("Unknown")}async function Vx(n,e,t){if(n.Ra.set("Online"),e instanceof y0&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))}(n,e)}catch(s){de(ha,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ah(n,s)}else if(e instanceof qf?n.Va.Ze(e):e instanceof g0?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ie.min()))try{const s=await C0(n.localStore);t.compareTo(s)>=0&&await function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,g)=>{const _=l.Ia.get(p);if(!_)return;l.Ia.set(p,_.withResumeToken(en.EMPTY_BYTE_STRING,_.snapshotVersion)),x0(l,p);const E=new rs(_.target,p,g,_.sequenceNumber);$g(l,E)}),l.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(s){de(ha,"Failed to raise snapshot:",s),await ah(n,s)}}async function ah(n,e,t){if(!zo(e))throw e;n.Ea.add(1),await Ku(n),n.Ra.set("Offline"),t||(t=()=>C0(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{de(ha,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Uh(n)})}function P0(n,e){return e().catch(t=>ah(n,t,e))}async function Bh(n){const e=Re(n),t=gs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ng;for(;Lx(e);)try{const a=await yx(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,kx(e,a)}catch(a){await ah(e,a)}V0(e)&&L0(e)}function Lx(n){return Ea(n)&&n.Ta.length<10}function kx(n,e){n.Ta.push(e);const t=gs(n);t.O_()&&t.X_&&t.ea(e.mutations)}function V0(n){return Ea(n)&&!gs(n).x_()&&n.Ta.length>0}function L0(n){gs(n).start()}async function Ux(n){gs(n).ra()}async function Bx(n){const e=gs(n);for(const t of n.Ta)e.ea(t.mutations)}async function zx(n,e,t){const s=n.Ta.shift(),a=Ug.from(s,e,t);await P0(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await Bh(n)}async function qx(n,e){e&&gs(n).X_&&await async function(s,a){if(function(c){return T2(c)&&c!==X.ABORTED}(a.code)){const l=s.Ta.shift();gs(s).B_(),await P0(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Bh(s)}}(n,e),V0(n)&&L0(n)}async function ET(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),de(ha,"RemoteStore received new credentials");const s=Ea(t);t.Ea.add(3),await Ku(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Uh(t)}async function Fx(n,e){const t=Re(n);e?(t.Ea.delete(2),await Uh(t)):e||(t.Ea.add(2),await Ku(t),t.Ra.set("Unknown"))}function qo(n){return n.ma||(n.ma=function(t,s,a){const l=Re(t);return l.sa(),new Ix(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{Xo:xx.bind(null,n),t_:Mx.bind(null,n),r_:Px.bind(null,n),H_:Vx.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Kg(n)?Yg(n):n.Ra.set("Unknown")):(await n.ma.stop(),M0(n))})),n.ma}function gs(n){return n.fa||(n.fa=function(t,s,a){const l=Re(t);return l.sa(),new Rx(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ux.bind(null,n),r_:qx.bind(null,n),ta:Bx.bind(null,n),na:zx.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Bh(n)):(await n.fa.stop(),n.Ta.length>0&&(de(ha,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const c=Date.now()+s,d=new Qg(e,t,c,a,l);return d.start(s),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wg(n,e){if(Ti("AsyncQueue",`${e}: ${n}`),zo(n))return new he(X.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{static emptySet(e){return new So(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ve.comparator(t.key,s.key):(t,s)=>ve.comparator(t.key,s.key),this.keyedMap=lu(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof So)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new So;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(){this.ga=new ft(ve.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,s)=>{e.push(s)}),e}}class Oo{constructor(e,t,s,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,a,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new Oo(e,t,So.emptySet(t),c,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class jx{constructor(){this.queries=TT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=Re(t),l=a.queries;a.queries=TT(),l.forEach((c,d)=>{for(const p of d.Sa)p.onError(s)})})(this,new he(X.ABORTED,"Firestore shutting down"))}}function TT(){return new va(n=>r0(n),Nh)}async function k0(n,e){const t=Re(n);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new Hx,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=Wg(c,`Initialization of query '${go(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Xg(t)}async function U0(n,e){const t=Re(n),s=e.query;let a=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Gx(n,e){const t=Re(n);let s=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(s=!0);c.wa=a}}s&&Xg(t)}function $x(n,e,t){const s=Re(n),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);s.queries.delete(e)}function Xg(n){n.Ca.forEach(e=>{e.next()})}var sg,ST;(ST=sg||(sg={})).Ma="default",ST.Cache="cache";class B0{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Oo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e){this.key=e}}class q0{constructor(e){this.key=e}}class Yx{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=i0(e),this.tu=new So(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new bT,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((_,E)=>{const v=a.get(_),A=xh(this.query,E)?E:null,O=!!v&&this.mutatedKeys.has(v.key),L=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let x=!1;v&&A?v.data.isEqual(A.data)?O!==L&&(s.track({type:3,doc:A}),x=!0):this.su(v,A)||(s.track({type:2,doc:A}),x=!0,(p&&this.eu(A,p)>0||g&&this.eu(A,g)<0)&&(d=!0)):!v&&A?(s.track({type:0,doc:A}),x=!0):v&&!A&&(s.track({type:1,doc:v}),x=!0,(p||g)&&(d=!0)),x&&(A?(c=c.add(A),l=L?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),s.track({type:1,doc:_})}return{tu:c,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort((_,E)=>function(A,O){const L=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:x})}};return L(A)-L(O)}(_.type,E.type)||this.eu(_.doc,E.doc)),this.ou(s),a=a??!1;const d=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,g=p!==this.Za;return this.Za=p,c.length!==0||g?{snapshot:new Oo(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const t=[];return e.forEach(s=>{this.Xa.has(s)||t.push(new q0(s))}),this.Xa.forEach(s=>{e.has(s)||t.push(new z0(s))}),t}cu(e){this.Ya=e.Qs,this.Xa=Le();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Oo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zg="SyncEngine";class Kx{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Qx{constructor(e){this.key=e,this.hu=!1}}class Wx{constructor(e,t,s,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new va(d=>r0(d),Nh),this.Iu=new Map,this.Eu=new Set,this.du=new ft(ve.comparator),this.Au=new Map,this.Ru=new qg,this.Vu={},this.mu=new Map,this.fu=Do.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Xx(n,e,t=!0){const s=Y0(n);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await F0(s,e,t,!0),a}async function Zx(n,e){const t=Y0(n);await F0(t,e,!0,!1)}async function F0(n,e,t,s){const a=await _x(n.localStore,Ur(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await Jx(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&N0(n.remoteStore,a),d}async function Jx(n,e,t,s,a){n.pu=(E,v,A)=>async function(L,x,$,Y){let te=x.view.ru($);te.Cs&&(te=await mT(L.localStore,x.query,!1).then(({documents:C})=>x.view.ru(C,te)));const ae=Y&&Y.targetChanges.get(x.targetId),re=Y&&Y.targetMismatches.get(x.targetId)!=null,ie=x.view.applyChanges(te,L.isPrimaryClient,ae,re);return wT(L,x.targetId,ie.au),ie.snapshot}(n,E,v,A);const l=await mT(n.localStore,e,!0),c=new Yx(e,l.Qs),d=c.ru(l.documents),p=Yu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),g=c.applyChanges(d,n.isPrimaryClient,p);wT(n,t,g.au);const _=new Kx(e,t,c);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function eM(n,e,t){const s=Re(n),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter(c=>!Nh(c,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await rg(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Gg(s.remoteStore,a.targetId),ag(s,a.targetId)}).catch(Bo)):(ag(s,a.targetId),await rg(s.localStore,a.targetId,!0))}async function tM(n,e){const t=Re(n),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Gg(t.remoteStore,s.targetId))}async function nM(n,e,t){const s=uM(n);try{const a=await function(c,d){const p=Re(c),g=at.now(),_=d.reduce((A,O)=>A.add(O.key),Le());let E,v;return p.persistence.runTransaction("Locally write mutations","readwrite",A=>{let O=Si(),L=Le();return p.Ns.getEntries(A,_).next(x=>{O=x,O.forEach(($,Y)=>{Y.isValidDocument()||(L=L.add($))})}).next(()=>p.localDocuments.getOverlayedDocuments(A,O)).next(x=>{E=x;const $=[];for(const Y of d){const te=y2(Y,E.get(Y.key).overlayedDocument);te!=null&&$.push(new Ts(Y.key,te,QA(te.value.mapValue),bn.exists(!0)))}return p.mutationQueue.addMutationBatch(A,g,$,d)}).next(x=>{v=x;const $=x.applyToLocalDocumentSet(E,L);return p.documentOverlayCache.saveOverlays(A,x.batchId,$)})}).then(()=>({batchId:v.batchId,changes:a0(E)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(c,d,p){let g=c.Vu[c.currentUser.toKey()];g||(g=new ft(Ve)),g=g.insert(d,p),c.Vu[c.currentUser.toKey()]=g}(s,a.batchId,t),await Qu(s,a.changes),await Bh(s.remoteStore)}catch(a){const l=Wg(a,"Failed to persist write");t.reject(l)}}async function H0(n,e){const t=Re(n);try{const s=await mx(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t.Au.get(l);c&&(Ke(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Ke(c.hu,14607):a.removedDocuments.size>0&&(Ke(c.hu,42227),c.hu=!1))}),await Qu(t,s,e)}catch(s){await Bo(s)}}function AT(n,e,t){const s=Re(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const p=Re(c);p.onlineState=d;let g=!1;p.queries.forEach((_,E)=>{for(const v of E.Sa)v.va(d)&&(g=!0)}),g&&Xg(p)}(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function rM(n,e,t){const s=Re(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let c=new ft(ve.comparator);c=c.insert(l,on.newNoDocument(l,Ie.min()));const d=Le().add(l),p=new Lh(Ie.min(),new Map,new ft(Ve),c,d);await H0(s,p),s.du=s.du.remove(l),s.Au.delete(e),Jg(s)}else await rg(s.localStore,e,!1).then(()=>ag(s,e,t)).catch(Bo)}async function iM(n,e){const t=Re(n),s=e.batch.batchId;try{const a=await px(t.localStore,e);G0(t,s,null),j0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Qu(t,a)}catch(a){await Bo(a)}}async function sM(n,e,t){const s=Re(n);try{const a=await function(c,d){const p=Re(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return p.mutationQueue.lookupMutationBatch(g,d).next(E=>(Ke(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(g,E))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>p.localDocuments.getDocuments(g,_))})}(s.localStore,e);G0(s,e,t),j0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Qu(s,a)}catch(a){await Bo(a)}}function j0(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function G0(n,e,t){const s=Re(n);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function ag(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(s=>{n.Ru.containsKey(s)||$0(n,s)})}function $0(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Gg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Jg(n))}function wT(n,e,t){for(const s of t)s instanceof z0?(n.Ru.addReference(s.key,e),aM(n,s)):s instanceof q0?(de(Zg,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||$0(n,s.key)):Ae(19791,{wu:s})}function aM(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(de(Zg,"New document in limbo: "+t),n.Eu.add(s),Jg(n))}function Jg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ve(st.fromString(e)),s=n.fu.next();n.Au.set(s,new Qx(t)),n.du=n.du.insert(t,s),N0(n.remoteStore,new rs(Ur(Lg(t.path)),s,"TargetPurposeLimboResolution",Ch.ce))}}async function Qu(n,e,t){const s=Re(n),a=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach((d,p)=>{c.push(s.pu(p,e,t).then(g=>{if((g||t)&&s.isPrimaryClient){const _=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(g){a.push(g);const _=Hg.As(p.targetId,g);l.push(_)}}))}),await Promise.all(c),s.Pu.H_(a),await async function(p,g){const _=Re(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>J.forEach(g,v=>J.forEach(v.Es,A=>_.persistence.referenceDelegate.addReference(E,v.targetId,A)).next(()=>J.forEach(v.ds,A=>_.persistence.referenceDelegate.removeReference(E,v.targetId,A)))))}catch(E){if(!zo(E))throw E;de(jg,"Failed to update sequence numbers: "+E)}for(const E of g){const v=E.targetId;if(!E.fromCache){const A=_.Ms.get(v),O=A.snapshotVersion,L=A.withLastLimboFreeSnapshotVersion(O);_.Ms=_.Ms.insert(v,L)}}}(s.localStore,l))}async function oM(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){de(Zg,"User change. New user:",e.toKey());const s=await R0(t.localStore,e);t.currentUser=e,function(l,c){l.mu.forEach(d=>{d.forEach(p=>{p.reject(new he(X.CANCELLED,c))})}),l.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Qu(t,s.Ls)}}function lM(n,e){const t=Re(n),s=t.Au.get(e);if(s&&s.hu)return Le().add(s.key);{let a=Le();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function Y0(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=H0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rM.bind(null,e),e.Pu.H_=Gx.bind(null,e.eventManager),e.Pu.yu=$x.bind(null,e.eventManager),e}function uM(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sM.bind(null,e),e}class oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return dx(this.persistence,new cx,e.initialUser,this.serializer)}Cu(e){return new I0(Fg.mi,this.serializer)}Du(e){return new Ex}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oh.provider={build:()=>new oh};class cM extends oh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ke(this.persistence.referenceDelegate instanceof sh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Q2(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new I0(s=>sh.mi(s,t),this.serializer)}}class og{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>AT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=oM.bind(null,this.syncEngine),await Fx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new jx}()}createDatastore(e){const t=kh(e.databaseInfo.databaseId),s=function(l){return new wx(l)}(e.databaseInfo);return function(l,c,d,p){return new Dx(l,c,d,p)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,a,l,c,d){return new Nx(s,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>AT(this.syncEngine,t,0),function(){return _T.v()?new _T:new bx}())}createSyncEngine(e,t){return function(a,l,c,d,p,g,_){const E=new Wx(a,l,c,d,p,g);return _&&(E.gu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(t){const s=Re(t);de(ha,"RemoteStore shutting down."),s.Ea.add(5),await Ku(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}og.provider={build:()=>new og};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ti("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="FirestoreClient";class fM{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=an.UNAUTHENTICATED,this.clientId=Og.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async c=>{de(ys,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(s,c=>(de(ys,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Wg(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Em(n,e){n.asyncQueue.verifyOperationInProgress(),de(ys,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(async a=>{s.isEqual(a)||(await R0(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function IT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await hM(n);de(ys,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(s=>ET(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,a)=>ET(e.remoteStore,a)),n._onlineComponents=e}async function hM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(ys,"Using user provided OfflineComponentProvider");try{await Em(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===X.FAILED_PRECONDITION||a.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;wo("Error using user provided cache. Falling back to memory cache: "+t),await Em(n,new oh)}}else de(ys,"Using default OfflineComponentProvider"),await Em(n,new cM(void 0));return n._offlineComponents}async function Q0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(ys,"Using user provided OnlineComponentProvider"),await IT(n,n._uninitializedComponentsProvider._online)):(de(ys,"Using default OnlineComponentProvider"),await IT(n,new og))),n._onlineComponents}function dM(n){return Q0(n).then(e=>e.syncEngine)}async function W0(n){const e=await Q0(n),t=e.eventManager;return t.onListen=Xx.bind(null,e.syncEngine),t.onUnlisten=eM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Zx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tM.bind(null,e.syncEngine),t}function pM(n,e,t={}){const s=new vi;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,p,g){const _=new K0({next:v=>{_.Nu(),c.enqueueAndForget(()=>U0(l,E));const A=v.docs.has(d);!A&&v.fromCache?g.reject(new he(X.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&v.fromCache&&p&&p.source==="server"?g.reject(new he(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(v)},error:v=>g.reject(v)}),E=new B0(Lg(d.path),_,{includeMetadataChanges:!0,qa:!0});return k0(l,E)}(await W0(n),n.asyncQueue,e,t,s)),s.promise}function mM(n,e,t={}){const s=new vi;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,p,g){const _=new K0({next:v=>{_.Nu(),c.enqueueAndForget(()=>U0(l,E)),v.fromCache&&p.source==="server"?g.reject(new he(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(v)},error:v=>g.reject(v)}),E=new B0(d,_,{includeMetadataChanges:!0,qa:!0});return k0(l,E)}(await W0(n),n.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="firestore.googleapis.com",CT=!0;class DT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Z0,this.ssl=CT}else this.host=e.host,this.ssl=e.ssl??CT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=w0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Y2)throw new he(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ON("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=X0(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zh{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new EN;switch(s.type){case"firstParty":return new AN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=RT.get(t);s&&(de("ComponentProvider","Removing Datastore"),RT.delete(t),s.terminate())}(this),Promise.resolve()}}function gM(n,e,t,s={}){n=Hr(n,zh);const a=Vo(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;a&&(BS(`https://${d}`),zS("Firestore",!0)),l.host!==Z0&&l.host!==d&&wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:a,emulatorOptions:s};if(!cs(p,c)&&(n._setSettings(p),s.mockUserToken)){let g,_;if(typeof s.mockUserToken=="string")g=s.mockUserToken,_=an.MOCK_USER;else{g=C1(s.mockUserToken,n._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new he(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new an(E)}n._authCredentials=new bN(new kA(g,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Fo(this.firestore,e,this._query)}}class Ot{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(ju(t,Ot._jsonSchema))return new Ot(e,s||null,new ve(st.fromString(t.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Dt("string",Ot._jsonSchemaVersion),referencePath:Dt("string")};class os extends Fo{constructor(e,t,s){super(e,t,Lg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new ve(e))}withConverter(e){return new os(this.firestore,e,this._path)}}function Ou(n,e,...t){if(n=mt(n),UA("collection","path",e),n instanceof zh){const s=st.fromString(e,...t);return Fb(s),new os(n,null,s)}{if(!(n instanceof Ot||n instanceof os))throw new he(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(st.fromString(e,...t));return Fb(s),new os(n.firestore,null,s)}}function rr(n,e,...t){if(n=mt(n),arguments.length===1&&(e=Og.newId()),UA("doc","path",e),n instanceof zh){const s=st.fromString(e,...t);return qb(s),new Ot(n,null,new ve(s))}{if(!(n instanceof Ot||n instanceof os))throw new he(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(st.fromString(e,...t));return qb(s),new Ot(n.firestore,n instanceof os?n.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="AsyncQueue";class NT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new D0(this,"async_queue_retry"),this._c=()=>{const s=vm();s&&de(OT,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=vm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=vm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new vi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zo(e))throw e;de(OT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Ti("INTERNAL UNHANDLED ERROR: ",xT(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Qg.createAndSchedule(this,e,t,s,l=>this.hc(l));return this.tc.push(a),a}uc(){this.nc&&Ae(47125,{Pc:xT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function xT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ba extends zh{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new NT,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new NT(e),this._firestoreClient=void 0,await e}}}function yM(n,e){const t=typeof n=="object"?n:Eg(),s=typeof n=="string"?n:Jf,a=ya(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=I1("firestore");l&&gM(a,...l)}return a}function qh(n){if(n._terminated)throw new he(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_M(n),n._firestoreClient}function _M(n){const e=n._freezeSettings(),t=function(a,l,c,d){return new qN(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,X0(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new fM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new er(en.fromBase64String(e))}catch(t){throw new he(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new er(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:er._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ju(e,er._jsonSchema))return er.fromBase64String(e.bytes)}}er._jsonSchemaVersion="firestore/bytes/1.0",er._jsonSchema={type:Dt("string",er._jsonSchemaVersion),bytes:Dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zr._jsonSchemaVersion}}static fromJSON(e){if(ju(e,zr._jsonSchema))return new zr(e.latitude,e.longitude)}}zr._jsonSchemaVersion="firestore/geoPoint/1.0",zr._jsonSchema={type:Dt("string",zr._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:qr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ju(e,qr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new qr(e.vectorValues);throw new he(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qr._jsonSchemaVersion="firestore/vectorValue/1.0",qr._jsonSchema={type:Dt("string",qr._jsonSchemaVersion),vectorValues:Dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=/^__.*__$/;class EM{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new $u(e,this.data,t,this.fieldTransforms)}}class J0{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ew(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:n})}}class ey{constructor(e,t,s,a,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ey({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return lh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ew(this.Ac)&&vM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class bM{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||kh(e)}Cc(e,t,s,a=!1){return new ey({Ac:e,methodName:t,Dc:s,path:Xt.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jh(n){const e=n._freezeSettings(),t=kh(n._databaseId);return new bM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ty(n,e,t,s,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);ry("Data must be an object, but it was:",c,s);const d=tw(s,c);let p,g;if(l.merge)p=new Mn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const v=lg(e,E,t);if(!c.contains(v))throw new he(X.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);rw(_,v)||_.push(v)}p=new Mn(_),g=c.fieldTransforms.filter(E=>p.covers(E.field))}else p=null,g=c.fieldTransforms;return new EM(new En(d),p,g)}class Gh extends Hh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gh}}class ny extends Hh{_toFieldTransform(e){return new d2(e.path,new Ru)}isEqual(e){return e instanceof ny}}function TM(n,e,t,s){const a=n.Cc(1,e,t);ry("Data must be an object, but it was:",a,s);const l=[],c=En.empty();bs(s,(p,g)=>{const _=iy(e,p,t);g=mt(g);const E=a.yc(_);if(g instanceof Gh)l.push(_);else{const v=Wu(g,E);v!=null&&(l.push(_),c.set(_,v))}});const d=new Mn(l);return new J0(c,d,a.fieldTransforms)}function SM(n,e,t,s,a,l){const c=n.Cc(1,e,t),d=[lg(e,s,t)],p=[a];if(l.length%2!=0)throw new he(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<l.length;v+=2)d.push(lg(e,l[v])),p.push(l[v+1]);const g=[],_=En.empty();for(let v=d.length-1;v>=0;--v)if(!rw(g,d[v])){const A=d[v];let O=p[v];O=mt(O);const L=c.yc(A);if(O instanceof Gh)g.push(A);else{const x=Wu(O,L);x!=null&&(g.push(A),_.set(A,x))}}const E=new Mn(g);return new J0(_,E,c.fieldTransforms)}function AM(n,e,t,s=!1){return Wu(t,n.Cc(s?4:3,e))}function Wu(n,e){if(nw(n=mt(n)))return ry("Unsupported field value:",e,n),tw(n,e);if(n instanceof Hh)return function(s,a){if(!ew(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,a){const l=[];let c=0;for(const d of s){let p=Wu(d,a.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}}(n,e)}return function(s,a){if((s=mt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return c2(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=at.fromDate(s);return{timestampValue:ih(a.serializer,l)}}if(s instanceof at){const l=new at(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ih(a.serializer,l)}}if(s instanceof zr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof er)return{bytesValue:_0(a.serializer,s._byteString)};if(s instanceof Ot){const l=a.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:zg(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof qr)return function(c,d){return{mapValue:{fields:{[YA]:{stringValue:KA},[eh]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return kg(d.serializer,g)})}}}}}}(s,a);throw a.Sc(`Unsupported field value: ${Rh(s)}`)}(n,e)}function tw(n,e){const t={};return qA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bs(n,(s,a)=>{const l=Wu(a,e.mc(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function nw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof at||n instanceof zr||n instanceof er||n instanceof Ot||n instanceof Hh||n instanceof qr)}function ry(n,e,t){if(!nw(t)||!BA(t)){const s=Rh(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function lg(n,e,t){if((e=mt(e))instanceof Fh)return e._internalPath;if(typeof e=="string")return iy(n,e);throw lh("Field path arguments must be of type string or ",n,!1,void 0,t)}const wM=new RegExp("[~\\*/\\[\\]]");function iy(n,e,t){if(e.search(wM)>=0)throw lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fh(...e.split("."))._internalPath}catch{throw lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lh(n,e,t,s,a){const l=s&&!s.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${s}`),c&&(p+=` in document ${a}`),p+=")"),new he(X.INVALID_ARGUMENT,d+n+p)}function rw(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class IM extends iw{data(){return super.data()}}function sy(n,e){return typeof e=="string"?iy(n,e):e instanceof Fh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ay{}class CM extends ay{}function DM(n,e,...t){let s=[];e instanceof ay&&s.push(e),s=s.concat(t),function(l){const c=l.filter(p=>p instanceof oy).length,d=l.filter(p=>p instanceof $h).length;if(c>1||c>0&&d>0)throw new he(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)n=a._apply(n);return n}class $h extends CM{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new $h(e,t,s)}_apply(e){const t=this._parse(e);return sw(e._query,t),new Fo(e.firestore,e.converter,Xm(e._query,t))}_parse(e){const t=jh(e.firestore);return function(l,c,d,p,g,_,E){let v;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new he(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){PT(E,_);const O=[];for(const L of E)O.push(MT(p,l,L));v={arrayValue:{values:O}}}else v=MT(p,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||PT(E,_),v=AM(d,c,E,_==="in"||_==="not-in");return Ct.create(g,_,v)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function OM(n,e,t){const s=e,a=sy("where",n);return $h._create(a,s,t)}class oy extends ay{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new oy(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:mr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const p of d)sw(c,p),c=Xm(c,p)}(e._query,t),new Fo(e.firestore,e.converter,Xm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function MT(n,e,t){if(typeof(t=mt(t))=="string"){if(t==="")throw new he(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!n0(e)&&t.indexOf("/")!==-1)throw new he(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(st.fromString(t));if(!ve.isDocumentKey(s))throw new he(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Wb(n,new ve(s))}if(t instanceof Ot)return Wb(n,t._key);throw new he(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rh(t)}.`)}function PT(n,e){if(!Array.isArray(n)||n.length===0)throw new he(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sw(n,e){const t=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new he(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class NM{convertValue(e,t="none"){switch(ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return bs(e,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertVectorValue(e){const t=e.fields?.[eh].arrayValue?.values?.map(s=>Et(s.doubleValue));return new qr(t)}convertGeoPoint(e){return new zr(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Oh(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Au(e));default:return null}}convertTimestamp(e){const t=ds(e);return new at(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=st.fromString(e);Ke(A0(s),9688,{name:e});const a=new wu(s.get(1),s.get(3)),l=new ve(s.popFirst(5));return a.isEqual(t)||Ti(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class cu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ua extends iw{constructor(e,t,s,a,l,c){super(e,t,s,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ff(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(sy("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ua._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ua._jsonSchemaVersion="firestore/documentSnapshot/1.0",ua._jsonSchema={type:Dt("string",ua._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class Ff extends ua{data(e={}){return super.data(e)}}class Ao{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new cu(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Ff(this._firestore,this._userDataWriter,s.key,s,new cu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const p=new Ff(a._firestore,a._userDataWriter,d.doc.key,d.doc,new cu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const p=new Ff(a._firestore,a._userDataWriter,d.doc.key,d.doc,new cu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:xM(d.type),doc:p,oldIndex:g,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ao._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Og.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(n){n=Hr(n,Ot);const e=Hr(n.firestore,ba);return pM(qh(e),n._key).then(t=>VM(e,n,t))}Ao._jsonSchemaVersion="firestore/querySnapshot/1.0",Ao._jsonSchema={type:Dt("string",Ao._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class aw extends NM{constructor(e){super(),this.firestore=e}convertBytes(e){return new er(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}function uh(n){n=Hr(n,Fo);const e=Hr(n.firestore,ba),t=qh(e),s=new aw(e);return RM(n._query),mM(t,n._query).then(a=>new Ao(e,s,n,a))}function ug(n,e,t){n=Hr(n,Ot);const s=Hr(n.firestore,ba),a=ly(n.converter,e,t);return Yh(s,[ty(jh(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,bn.none())])}function MM(n){return Yh(Hr(n.firestore,ba),[new Vh(n._key,bn.none())])}function PM(n,e){const t=Hr(n.firestore,ba),s=rr(n),a=ly(n.converter,e);return Yh(t,[ty(jh(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,bn.exists(!1))]).then(()=>s)}function Yh(n,e){return function(s,a){const l=new vi;return s.asyncQueue.enqueueAndForget(async()=>nM(await dM(s),a,l)),l.promise}(qh(n),e)}function VM(n,e,t){const s=t.docs.get(e._key),a=new aw(n);return new ua(n,a,e._key,s,new cu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=jh(e)}set(e,t,s){this._verifyNotCommitted();const a=bm(e,this._firestore),l=ly(a.converter,t,s),c=ty(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,s);return this._mutations.push(c.toMutation(a._key,bn.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const l=bm(e,this._firestore);let c;return c=typeof(t=mt(t))=="string"||t instanceof Fh?SM(this._dataReader,"WriteBatch.update",l._key,t,s,a):TM(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=bm(e,this._firestore);return this._mutations=this._mutations.concat(new Vh(t._key,bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bm(n,e){if((n=mt(n)).firestore!==e)throw new he(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Nu(){return new ny("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(n){return qh(n=Hr(n,ba)),new LM(n,e=>Yh(n,e))}(function(e,t=!0){(function(a){Uo=a})(Lo),Fr(new dr("firestore",(s,{instanceIdentifier:a,options:l})=>{const c=s.getProvider("app").getImmediate(),d=new ba(new TN(s.getProvider("auth-internal")),new wN(c,s.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new he(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wu(g.options.projectId,_)}(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),nr(kb,Ub,e),nr(kb,Ub,"esm2020")})();const ow="@firebase/installations",uy="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=1e4,uw=`w:${uy}`,cw="FIS_v2",UM="https://firebaseinstallations.googleapis.com/v1",BM=60*60*1e3,zM="installations",qM="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},da=new ga(zM,qM,FM);function fw(n){return n instanceof gr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw({projectId:n}){return`${UM}/projects/${n}/installations`}function dw(n){return{token:n.token,requestStatus:2,expiresIn:jM(n.expiresIn),creationTime:Date.now()}}async function pw(n,e){const s=(await e.json()).error;return da.create("request-failed",{requestName:n,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function mw({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function HM(n,{refreshToken:e}){const t=mw(n);return t.append("Authorization",GM(e)),t}async function gw(n){const e=await n();return e.status>=500&&e.status<600?n():e}function jM(n){return Number(n.replace("s","000"))}function GM(n){return`${cw} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const s=hw(n),a=mw(n),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={fid:t,authVersion:cw,appId:n.appId,sdkVersion:uw},d={method:"POST",headers:a,body:JSON.stringify(c)},p=await gw(()=>fetch(s,d));if(p.ok){const g=await p.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:dw(g.authToken)}}else throw await pw("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=/^[cdef][\w-]{21}$/,cg="";function QM(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=WM(n);return KM.test(t)?t:cg}catch{return cg}}function WM(n){return YM(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w=new Map;function vw(n,e){const t=Kh(n);Ew(t,e),XM(t,e)}function Ew(n,e){const t=_w.get(n);if(t)for(const s of t)s(e)}function XM(n,e){const t=ZM();t&&t.postMessage({key:n,fid:e}),JM()}let la=null;function ZM(){return!la&&"BroadcastChannel"in self&&(la=new BroadcastChannel("[Firebase] FID Change"),la.onmessage=n=>{Ew(n.data.key,n.data.fid)}),la}function JM(){_w.size===0&&la&&(la.close(),la=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP="firebase-installations-database",tP=1,pa="firebase-installations-store";let Tm=null;function cy(){return Tm||(Tm=$S(eP,tP,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(pa)}}})),Tm}async function ch(n,e){const t=Kh(n),a=(await cy()).transaction(pa,"readwrite"),l=a.objectStore(pa),c=await l.get(t);return await l.put(e,t),await a.done,(!c||c.fid!==e.fid)&&vw(n,e.fid),e}async function bw(n){const e=Kh(n),s=(await cy()).transaction(pa,"readwrite");await s.objectStore(pa).delete(e),await s.done}async function Qh(n,e){const t=Kh(n),a=(await cy()).transaction(pa,"readwrite"),l=a.objectStore(pa),c=await l.get(t),d=e(c);return d===void 0?await l.delete(t):await l.put(d,t),await a.done,d&&(!c||c.fid!==d.fid)&&vw(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fy(n){let e;const t=await Qh(n.appConfig,s=>{const a=nP(s),l=rP(n,a);return e=l.registrationPromise,l.installationEntry});return t.fid===cg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function nP(n){const e=n||{fid:QM(),registrationStatus:0};return Tw(e)}function rP(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(da.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=iP(n,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:sP(n)}:{installationEntry:e}}async function iP(n,e){try{const t=await $M(n,e);return ch(n.appConfig,t)}catch(t){throw fw(t)&&t.customData.serverCode===409?await bw(n.appConfig):await ch(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function sP(n){let e=await VT(n.appConfig);for(;e.registrationStatus===1;)await yw(100),e=await VT(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await fy(n);return s||t}return e}function VT(n){return Qh(n,e=>{if(!e)throw da.create("installation-not-found");return Tw(e)})}function Tw(n){return aP(n)?{fid:n.fid,registrationStatus:0}:n}function aP(n){return n.registrationStatus===1&&n.registrationTime+lw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oP({appConfig:n,heartbeatServiceProvider:e},t){const s=lP(n,t),a=HM(n,t),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={installation:{sdkVersion:uw,appId:n.appId}},d={method:"POST",headers:a,body:JSON.stringify(c)},p=await gw(()=>fetch(s,d));if(p.ok){const g=await p.json();return dw(g)}else throw await pw("Generate Auth Token",p)}function lP(n,{fid:e}){return`${hw(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hy(n,e=!1){let t;const s=await Qh(n.appConfig,l=>{if(!Sw(l))throw da.create("not-registered");const c=l.authToken;if(!e&&fP(c))return l;if(c.requestStatus===1)return t=uP(n,e),l;{if(!navigator.onLine)throw da.create("app-offline");const d=dP(l);return t=cP(n,d),d}});return t?await t:s.authToken}async function uP(n,e){let t=await LT(n.appConfig);for(;t.authToken.requestStatus===1;)await yw(100),t=await LT(n.appConfig);const s=t.authToken;return s.requestStatus===0?hy(n,e):s}function LT(n){return Qh(n,e=>{if(!Sw(e))throw da.create("not-registered");const t=e.authToken;return pP(t)?{...e,authToken:{requestStatus:0}}:e})}async function cP(n,e){try{const t=await oP(n,e),s={...e,authToken:t};return await ch(n.appConfig,s),t}catch(t){if(fw(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await bw(n.appConfig);else{const s={...e,authToken:{requestStatus:0}};await ch(n.appConfig,s)}throw t}}function Sw(n){return n!==void 0&&n.registrationStatus===2}function fP(n){return n.requestStatus===2&&!hP(n)}function hP(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+BM}function dP(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function pP(n){return n.requestStatus===1&&n.requestTime+lw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(n){const e=n,{installationEntry:t,registrationPromise:s}=await fy(e);return s?s.catch(console.error):hy(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP(n,e=!1){const t=n;return await yP(t),(await hy(t,e)).token}async function yP(n){const{registrationPromise:e}=await fy(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(n){if(!n||!n.options)throw Sm("App Configuration");if(!n.name)throw Sm("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Sm(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Sm(n){return da.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="installations",vP="installations-internal",EP=n=>{const e=n.getProvider("app").getImmediate(),t=_P(e),s=ya(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},bP=n=>{const e=n.getProvider("app").getImmediate(),t=ya(e,Aw).getImmediate();return{getId:()=>mP(t),getToken:a=>gP(t,a)}};function TP(){Fr(new dr(Aw,EP,"PUBLIC")),Fr(new dr(vP,bP,"PRIVATE"))}TP();nr(ow,uy);nr(ow,uy,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh="analytics",SP="firebase_id",AP="origin",wP=60*1e3,IP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",dy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn=new Sh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Vn=new ga("analytics","Analytics",RP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(n){if(!n.startsWith(dy)){const e=Vn.create("invalid-gtag-resource",{gtagURL:n});return Tn.warn(e.message),""}return n}function ww(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function DP(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function OP(n,e){const t=DP("firebase-js-sdk-policy",{createScriptURL:CP}),s=document.createElement("script"),a=`${dy}?l=${n}&id=${e}`;s.src=t?t?.createScriptURL(a):a,s.async=!0,document.head.appendChild(s)}function NP(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function xP(n,e,t,s,a,l){const c=s[a];try{if(c)await e[c];else{const p=(await ww(t)).find(g=>g.measurementId===a);p&&await e[p.appId]}}catch(d){Tn.error(d)}n("config",a,l)}async function MP(n,e,t,s,a){try{let l=[];if(a&&a.send_to){let c=a.send_to;Array.isArray(c)||(c=[c]);const d=await ww(t);for(const p of c){const g=d.find(E=>E.measurementId===p),_=g&&e[g.appId];if(_)l.push(_);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",s,a||{})}catch(l){Tn.error(l)}}function PP(n,e,t,s){async function a(l,...c){try{if(l==="event"){const[d,p]=c;await MP(n,e,t,d,p)}else if(l==="config"){const[d,p]=c;await xP(n,e,t,s,d,p)}else if(l==="consent"){const[d,p]=c;n("consent",d,p)}else if(l==="get"){const[d,p,g]=c;n("get",d,p,g)}else if(l==="set"){const[d]=c;n("set",d)}else n(l,...c)}catch(d){Tn.error(d)}}return a}function VP(n,e,t,s,a){let l=function(...c){window[s].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=PP(l,n,e,t),{gtagCore:l,wrappedGtag:window[a]}}function LP(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(dy)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP=30,UP=1e3;class BP{constructor(e={},t=UP){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Iw=new BP;function zP(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function qP(n){const{appId:e,apiKey:t}=n,s={method:"GET",headers:zP(t)},a=IP.replace("{app-id}",e),l=await fetch(a,s);if(l.status!==200&&l.status!==304){let c="";try{const d=await l.json();d.error?.message&&(c=d.error.message)}catch{}throw Vn.create("config-fetch-failed",{httpStatus:l.status,responseMessage:c})}return l.json()}async function FP(n,e=Iw,t){const{appId:s,apiKey:a,measurementId:l}=n.options;if(!s)throw Vn.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:s};throw Vn.create("no-api-key")}const c=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new GP;return setTimeout(async()=>{d.abort()},wP),Rw({appId:s,apiKey:a,measurementId:l},c,d,e)}async function Rw(n,{throttleEndTimeMillis:e,backoffCount:t},s,a=Iw){const{appId:l,measurementId:c}=n;try{await HP(s,e)}catch(d){if(c)return Tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:l,measurementId:c};throw d}try{const d=await qP(n);return a.deleteThrottleMetadata(l),d}catch(d){const p=d;if(!jP(p)){if(a.deleteThrottleMetadata(l),c)return Tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:c};throw d}const g=Number(p?.customData?.httpStatus)===503?ob(t,a.intervalMillis,kP):ob(t,a.intervalMillis),_={throttleEndTimeMillis:Date.now()+g,backoffCount:t+1};return a.setThrottleMetadata(l,_),Tn.debug(`Calling attemptFetch again in ${g} millis`),Rw(n,_,s,a)}}function HP(n,e){return new Promise((t,s)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(l),s(Vn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function jP(n){if(!(n instanceof gr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class GP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function $P(n,e,t,s,a){if(a&&a.global){n("event",t,s);return}else{const l=await e,c={...s,send_to:l};n("event",t,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YP(){if(FS())try{await HS()}catch(n){return Tn.warn(Vn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Tn.warn(Vn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function KP(n,e,t,s,a,l,c){const d=FP(n);d.then(v=>{t[v.measurementId]=v.appId,n.options.measurementId&&v.measurementId!==n.options.measurementId&&Tn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Tn.error(v)),e.push(d);const p=YP().then(v=>{if(v)return s.getId()}),[g,_]=await Promise.all([d,p]);LP(l)||OP(l,g.measurementId),a("js",new Date);const E=c?.config??{};return E[AP]="firebase",E.update=!0,_!=null&&(E[SP]=_),a("config",g.measurementId,E),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.app=e}_delete(){return delete yu[this.app.options.appId],Promise.resolve()}}let yu={},kT=[];const UT={};let Am="dataLayer",WP="gtag",BT,Cw,zT=!1;function XP(){const n=[];if(qS()&&n.push("This is a browser extension environment."),k1()||n.push("Cookies are not available."),n.length>0){const e=n.map((s,a)=>`(${a+1}) ${s}`).join(" "),t=Vn.create("invalid-analytics-context",{errorInfo:e});Tn.warn(t.message)}}function ZP(n,e,t){XP();const s=n.options.appId;if(!s)throw Vn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Vn.create("no-api-key");if(yu[s]!=null)throw Vn.create("already-exists",{id:s});if(!zT){NP(Am);const{wrappedGtag:l,gtagCore:c}=VP(yu,kT,UT,Am,WP);Cw=l,BT=c,zT=!0}return yu[s]=KP(n,kT,UT,e,BT,Am,t),new QP(n)}function JP(n=Eg()){n=mt(n);const e=ya(n,fh);return e.isInitialized()?e.getImmediate():eV(n)}function eV(n,e={}){const t=ya(n,fh);if(t.isInitialized()){const a=t.getImmediate();if(cs(e,t.getOptions()))return a;throw Vn.create("already-initialized")}return t.initialize({options:e})}function tV(n,e,t,s){n=mt(n),$P(Cw,yu[n.app.options.appId],e,t,s).catch(a=>Tn.error(a))}const qT="@firebase/analytics",FT="0.10.18";function nV(){Fr(new dr(fh,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return ZP(s,a,t)},"PUBLIC")),Fr(new dr("analytics-internal",n,"PRIVATE")),nr(qT,FT),nr(qT,FT,"esm2020");function n(e){try{const t=e.getProvider(fh).getImmediate();return{logEvent:(s,a,l)=>tV(t,s,a,l)}}catch(t){throw Vn.create("interop-component-reg-failed",{reason:t})}}}nV();const rV={apiKey:"AIzaSyBf2vZcsDfEfa3CARtXhHR-dQaTEzQwiYg",authDomain:"workerschedulingapp.firebaseapp.com",projectId:"workerschedulingapp",storageBucket:"workerschedulingapp.firebasestorage.app",messagingSenderId:"464876880165",appId:"1:464876880165:web:70cf2891f2a92f1d1b5acc",measurementId:"G-W11VXWE91Q"},py=YS(rV);JP(py);const Vr=_N(py),Zt=yM(py),iV=({onSubmit:n})=>{const[e,t]=ne.useState(""),[s,a]=ne.useState(null),[l,c]=ne.useState(!1),d=async p=>{p.preventDefault();const g=e.trim();if(!g){a("Please enter a valid Center ID.");return}a(null),c(!0);try{const _=rr(Zt,"centers",g);(await No(_)).exists()?n(g):a(`Center ID "${g}" does not exist.`)}catch(_){console.error("Error checking center ID:",_),a("Error checking center ID. Please try again.")}c(!1)};return fe.jsxs("div",{className:"center-id",children:[fe.jsx("h1",{children:"Enter Center ID"}),fe.jsxs("form",{onSubmit:d,children:[fe.jsx("input",{type:"text",value:e,onChange:p=>t(p.target.value),placeholder:"Enter Center ID",disabled:l}),fe.jsx("button",{type:"submit",disabled:l,children:l?"Checking...":"Next"})]}),s&&fe.jsx("p",{style:{color:"red",marginTop:"1rem"},children:s})]})};function sV({centerID:n,onLogin:e,onManagerKeyDetected:t}){const[s,a]=ne.useState(""),[l,c]=ne.useState(null),[d,p]=ne.useState(!1),[g,_]=ne.useState(!1);ne.useEffect(()=>{const v=setInterval(()=>{Vr.currentUser&&(console.log("Auth ready:",Vr.currentUser.uid),_(!0),clearInterval(v))},100);return()=>clearInterval(v)},[]),ne.useEffect(()=>{c(null)},[n]);const E=async v=>{if(v.preventDefault(),!s)return c("Please enter your key.");p(!0);try{const A=Vr.currentUser;if(!A)return p(!1),c("Not authenticated.");console.log("Authenticated as:",A.uid);const O=rr(Zt,"keys",s),L=await No(O);if(!L.exists())return p(!1),c("Invalid key.");const x=L.data();if(console.log("Key data:",x),x.centerID!==n)return p(!1),c("This key does not belong to the selected center.");if(x.role==="manager"){await vA(Vr),t(x),p(!1);return}const $=x.uid,Y=x.role||"worker",te=rr(Zt,"auth",A.uid);await ug(te,{uid:$,centerID:n,role:Y,name:"",lastLogin:Nu()},{merge:!0}),console.log("Temporary auth doc written. Now attempting to read /users/",$);const ae=rr(Zt,"users",$),re=await No(ae);if(!re.exists())return p(!1),c("User not found.");const ie=re.data();console.log("User data:",ie),await ug(te,{name:ie.name||"",lastLogin:Nu()},{merge:!0}),console.log("Auth document updated successfully."),e({uid:$,centerID:n,role:Y,name:ie.name})}catch(A){console.error("Login error:",A),c(`Login failed: ${A.message}`)}p(!1)};return fe.jsxs("div",{className:"login",children:[fe.jsxs("h2",{children:["Login for Center: ",n]}),!g&&fe.jsx("p",{children:"Waiting for authentication..."}),l&&fe.jsx("p",{className:"error",children:l}),fe.jsxs("form",{onSubmit:E,children:[fe.jsx("input",{type:"text",placeholder:"Enter your worker key",value:s,onChange:v=>a(v.target.value),disabled:d||!g}),fe.jsx("button",{type:"submit",disabled:d||!g,children:d?"Logging in...":"Login"})]})]})}function HT({refreshKey:n}){const[e,t]=ne.useState({}),[s,a]=ne.useState([]),[l,c]=ne.useState(0),[d,p]=ne.useState(null),[g,_]=ne.useState(!0);return ne.useEffect(()=>{(async()=>{_(!0),p(null);try{const v=Vr.currentUser;if(!v){p("Not authenticated."),_(!1);return}const A=await No(rr(Zt,"auth",v.uid));if(!A.exists()){p("Auth document not found."),_(!1);return}const{centerID:O}=A.data(),L=DM(Ou(Zt,"users"),OM("centerID","==",O)),x=await uh(L),$={},Y=new Set;for(const ie of x.docs){const C=ie.id,I=ie.data();if(I.role!=="worker")continue;const R=I.name||"Unnamed",M=I.lastSubmission?.toMillis?.()||0;(await uh(Ou(Zt,"users",C,"availability"))).forEach(U=>{const D=U.id,ut=U.data();Y.add(D),$[D]||($[D]=[]),$[D].push({name:R,priority:ut.priority??999,lastSubmission:M})})}for(const ie in $)$[ie].sort((C,I)=>C.priority!==I.priority?C.priority-I.priority:C.lastSubmission-I.lastSubmission);const ae=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].filter(ie=>Y.has(ie));a(ae),t($);const re=Math.max(0,...Object.values($).map(ie=>ie.length));c(re)}catch(v){console.error("Schedule error:",v),p("Failed to load schedule.")}_(!1)})()},[n]),fe.jsxs("div",{className:"schedule",children:[fe.jsx("h2",{children:"Worker Schedule"}),g&&fe.jsx("div",{className:"spinner"}),d&&fe.jsx("p",{className:"error",children:d}),!g&&!d&&fe.jsxs("table",{children:[fe.jsx("thead",{children:fe.jsx("tr",{children:s.map(E=>fe.jsx("th",{children:E},E))})}),fe.jsx("tbody",{children:l>0?Array.from({length:l}).map((E,v)=>fe.jsx("tr",{children:s.map(A=>{const L=(e[A]||[])[v];return fe.jsx("td",{children:L?`${L.name} (${L.priority})`:""},A+v)})},v)):fe.jsx("tr",{children:fe.jsx("td",{colSpan:s.length,children:"No availability data submitted yet."})})})]})]})}var my=xS();const aV=NS(my);function mn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var oV=typeof Symbol=="function"&&Symbol.observable||"@@observable",jT=oV,GT=()=>Math.random().toString(36).substring(7).split("").join("."),lV={INIT:`@@redux/INIT${GT()}`,REPLACE:`@@redux/REPLACE${GT()}`},$T=lV;function uV(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function Dw(n,e,t){if(typeof n!="function")throw new Error(mn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(mn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(mn(1));return t(Dw)(n,e)}let s=n,a=e,l=new Map,c=l,d=0,p=!1;function g(){c===l&&(c=new Map,l.forEach((x,$)=>{c.set($,x)}))}function _(){if(p)throw new Error(mn(3));return a}function E(x){if(typeof x!="function")throw new Error(mn(4));if(p)throw new Error(mn(5));let $=!0;g();const Y=d++;return c.set(Y,x),function(){if($){if(p)throw new Error(mn(6));$=!1,g(),c.delete(Y),l=null}}}function v(x){if(!uV(x))throw new Error(mn(7));if(typeof x.type>"u")throw new Error(mn(8));if(typeof x.type!="string")throw new Error(mn(17));if(p)throw new Error(mn(9));try{p=!0,a=s(a,x)}finally{p=!1}return(l=c).forEach(Y=>{Y()}),x}function A(x){if(typeof x!="function")throw new Error(mn(10));s=x,v({type:$T.REPLACE})}function O(){const x=E;return{subscribe($){if(typeof $!="object"||$===null)throw new Error(mn(11));function Y(){const ae=$;ae.next&&ae.next(_())}return Y(),{unsubscribe:x(Y)}},[jT](){return this}}}return v({type:$T.INIT}),{dispatch:v,subscribe:E,getState:_,replaceReducer:A,[jT]:O}}function YT(n,e){return function(...t){return e(n.apply(this,t))}}function KT(n,e){if(typeof n=="function")return YT(n,e);if(typeof n!="object"||n===null)throw new Error(mn(16));const t={};for(const s in n){const a=n[s];typeof a=="function"&&(t[s]=YT(a,e))}return t}function Ow(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...s)=>e(t(...s)))}function cV(...n){return e=>(t,s)=>{const a=e(t,s);let l=()=>{throw new Error(mn(15))};const c={getState:a.getState,dispatch:(p,...g)=>l(p,...g)},d=n.map(p=>p(c));return l=Ow(...d)(a.dispatch),{...a,dispatch:l}}}var wm={exports:{}},Im={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QT;function fV(){if(QT)return Im;QT=1;var n=bh();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var t=typeof Object.is=="function"?Object.is:e,s=n.useSyncExternalStore,a=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;return Im.useSyncExternalStoreWithSelector=function(p,g,_,E,v){var A=a(null);if(A.current===null){var O={hasValue:!1,value:null};A.current=O}else O=A.current;A=c(function(){function x(re){if(!$){if($=!0,Y=re,re=E(re),v!==void 0&&O.hasValue){var ie=O.value;if(v(ie,re))return te=ie}return te=re}if(ie=te,t(Y,re))return ie;var C=E(re);return v!==void 0&&v(ie,C)?(Y=re,ie):(Y=re,te=C)}var $=!1,Y,te,ae=_===void 0?null:_;return[function(){return x(g())},ae===null?void 0:function(){return x(ae())}]},[g,_,E,v]);var L=s(p,A[0],A[1]);return l(function(){O.hasValue=!0,O.value=L},[L]),d(L),L},Im}var WT;function hV(){return WT||(WT=1,wm.exports=fV()),wm.exports}hV();var dV=ne.version.startsWith("19"),pV=Symbol.for(dV?"react.transitional.element":"react.element"),mV=Symbol.for("react.portal"),gV=Symbol.for("react.fragment"),yV=Symbol.for("react.strict_mode"),_V=Symbol.for("react.profiler"),vV=Symbol.for("react.consumer"),EV=Symbol.for("react.context"),Nw=Symbol.for("react.forward_ref"),bV=Symbol.for("react.suspense"),TV=Symbol.for("react.suspense_list"),gy=Symbol.for("react.memo"),SV=Symbol.for("react.lazy"),AV=Nw,wV=gy;function IV(n){if(typeof n=="object"&&n!==null){const{$$typeof:e}=n;switch(e){case pV:switch(n=n.type,n){case gV:case _V:case yV:case bV:case TV:return n;default:switch(n=n&&n.$$typeof,n){case EV:case Nw:case SV:case gy:return n;case vV:return n;default:return e}}case mV:return e}}}function RV(n){return IV(n)===gy}function CV(n,e,t,s,{areStatesEqual:a,areOwnPropsEqual:l,areStatePropsEqual:c}){let d=!1,p,g,_,E,v;function A(Y,te){return p=Y,g=te,_=n(p,g),E=e(s,g),v=t(_,E,g),d=!0,v}function O(){return _=n(p,g),e.dependsOnOwnProps&&(E=e(s,g)),v=t(_,E,g),v}function L(){return n.dependsOnOwnProps&&(_=n(p,g)),e.dependsOnOwnProps&&(E=e(s,g)),v=t(_,E,g),v}function x(){const Y=n(p,g),te=!c(Y,_);return _=Y,te&&(v=t(_,E,g)),v}function $(Y,te){const ae=!l(te,g),re=!a(Y,p,te,g);return p=Y,g=te,ae&&re?O():ae?L():re?x():v}return function(te,ae){return d?$(te,ae):A(te,ae)}}function DV(n,{initMapStateToProps:e,initMapDispatchToProps:t,initMergeProps:s,...a}){const l=e(n,a),c=t(n,a),d=s(n,a);return CV(l,c,d,n,a)}function OV(n,e){const t={};for(const s in n){const a=n[s];typeof a=="function"&&(t[s]=(...l)=>e(a(...l)))}return t}function fg(n){return function(t){const s=n(t);function a(){return s}return a.dependsOnOwnProps=!1,a}}function XT(n){return n.dependsOnOwnProps?!!n.dependsOnOwnProps:n.length!==1}function xw(n,e){return function(s,{displayName:a}){const l=function(d,p){return l.dependsOnOwnProps?l.mapToProps(d,p):l.mapToProps(d,void 0)};return l.dependsOnOwnProps=!0,l.mapToProps=function(d,p){l.mapToProps=n,l.dependsOnOwnProps=XT(n);let g=l(d,p);return typeof g=="function"&&(l.mapToProps=g,l.dependsOnOwnProps=XT(g),g=l(d,p)),g},l}}function yy(n,e){return(t,s)=>{throw new Error(`Invalid value of type ${typeof n} for ${e} argument when connecting component ${s.wrappedComponentName}.`)}}function NV(n){return n&&typeof n=="object"?fg(e=>OV(n,e)):n?typeof n=="function"?xw(n):yy(n,"mapDispatchToProps"):fg(e=>({dispatch:e}))}function xV(n){return n?typeof n=="function"?xw(n):yy(n,"mapStateToProps"):fg(()=>({}))}function MV(n,e,t){return{...t,...n,...e}}function PV(n){return function(t,{displayName:s,areMergedPropsEqual:a}){let l=!1,c;return function(p,g,_){const E=n(p,g,_);return l?a(E,c)||(c=E):(l=!0,c=E),c}}}function VV(n){return n?typeof n=="function"?PV(n):yy(n,"mergeProps"):()=>MV}function LV(n){n()}function kV(){let n=null,e=null;return{clear(){n=null,e=null},notify(){LV(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let s=n;for(;s;)t.push(s),s=s.next;return t},subscribe(t){let s=!0;const a=e={callback:t,next:null,prev:e};return a.prev?a.prev.next=a:n=a,function(){!s||n===null||(s=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:n=a.next)}}}}var ZT={notify(){},get:()=>[]};function Mw(n,e){let t,s=ZT,a=0,l=!1;function c(L){_();const x=s.subscribe(L);let $=!1;return()=>{$||($=!0,x(),E())}}function d(){s.notify()}function p(){O.onStateChange&&O.onStateChange()}function g(){return l}function _(){a++,t||(t=e?e.addNestedSub(p):n.subscribe(p),s=kV())}function E(){a--,t&&a===0&&(t(),t=void 0,s.clear(),s=ZT)}function v(){l||(l=!0,_())}function A(){l&&(l=!1,E())}const O={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:p,isSubscribed:g,trySubscribe:v,tryUnsubscribe:A,getListeners:()=>s};return O}var UV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BV=UV(),zV=()=>typeof navigator<"u"&&navigator.product==="ReactNative",qV=zV(),FV=()=>BV||qV?ne.useLayoutEffect:ne.useEffect,hh=FV();function JT(n,e){return n===e?n!==0||e!==0||1/n===1/e:n!==n&&e!==e}function Rm(n,e){if(JT(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(!Object.prototype.hasOwnProperty.call(e,t[a])||!JT(n[t[a]],e[t[a]]))return!1;return!0}var HV={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},jV={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},GV={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Pw={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},$V={[AV]:GV,[wV]:Pw};function eS(n){return RV(n)?Pw:$V[n.$$typeof]||HV}var YV=Object.defineProperty,KV=Object.getOwnPropertyNames,tS=Object.getOwnPropertySymbols,QV=Object.getOwnPropertyDescriptor,WV=Object.getPrototypeOf,nS=Object.prototype;function hg(n,e){if(typeof e!="string"){if(nS){const l=WV(e);l&&l!==nS&&hg(n,l)}let t=KV(e);tS&&(t=t.concat(tS(e)));const s=eS(n),a=eS(e);for(let l=0;l<t.length;++l){const c=t[l];if(!jV[c]&&!(a&&a[c])&&!(s&&s[c])){const d=QV(e,c);try{YV(n,c,d)}catch{}}}}return n}var XV=Symbol.for("react-redux-context"),ZV=typeof globalThis<"u"?globalThis:{};function JV(){if(!ne.createContext)return{};const n=ZV[XV]??=new Map;let e=n.get(ne.createContext);return e||(e=ne.createContext(null),n.set(ne.createContext,e)),e}var Vw=JV(),eL=[null,null];function tL(n,e,t){hh(()=>n(...e),t)}function nL(n,e,t,s,a,l){n.current=s,t.current=!1,a.current&&(a.current=null,l())}function rL(n,e,t,s,a,l,c,d,p,g,_){if(!n)return()=>{};let E=!1,v=null;const A=()=>{if(E||!d.current)return;const L=e.getState();let x,$;try{x=s(L,a.current)}catch(Y){$=Y,v=Y}$||(v=null),x===l.current?c.current||g():(l.current=x,p.current=x,c.current=!0,_())};return t.onStateChange=A,t.trySubscribe(),A(),()=>{if(E=!0,t.tryUnsubscribe(),t.onStateChange=null,v)throw v}}function iL(n,e){return n===e}function sL(n,e,t,{pure:s,areStatesEqual:a=iL,areOwnPropsEqual:l=Rm,areStatePropsEqual:c=Rm,areMergedPropsEqual:d=Rm,forwardRef:p=!1,context:g=Vw}={}){const _=g,E=xV(n),v=NV(e),A=VV(t),O=!!n;return x=>{const $=x.displayName||x.name||"Component",Y=`Connect(${$})`,te={shouldHandleStateChanges:O,displayName:Y,wrappedComponentName:$,WrappedComponent:x,initMapStateToProps:E,initMapDispatchToProps:v,initMergeProps:A,areStatesEqual:a,areStatePropsEqual:c,areOwnPropsEqual:l,areMergedPropsEqual:d};function ae(C){const[I,R,M]=ne.useMemo(()=>{const{reactReduxForwardedRef:Tt,...Sn}=C;return[C.context,Tt,Sn]},[C]),P=ne.useMemo(()=>{let Tt=_;return I?.Consumer,Tt},[I,_]),U=ne.useContext(P),D=!!C.store&&!!C.store.getState&&!!C.store.dispatch,ut=!!U&&!!U.store,He=D?C.store:U.store,K=ut?U.getServerState:He.getState,ue=ne.useMemo(()=>DV(He.dispatch,te),[He]),[me,ke]=ne.useMemo(()=>{if(!O)return eL;const Tt=Mw(He,D?void 0:U.subscription),Sn=Tt.notifyNestedSubs.bind(Tt);return[Tt,Sn]},[He,D,U]),V=ne.useMemo(()=>D?U:{...U,subscription:me},[D,U,me]),ee=ne.useRef(void 0),ce=ne.useRef(M),se=ne.useRef(void 0),_e=ne.useRef(!1),Ce=ne.useRef(!1),be=ne.useRef(void 0);hh(()=>(Ce.current=!0,()=>{Ce.current=!1}),[]);const gt=ne.useMemo(()=>()=>se.current&&M===ce.current?se.current:ue(He.getState(),M),[He,M]),Ze=ne.useMemo(()=>Sn=>me?rL(O,He,me,ue,ce,ee,_e,Ce,se,ke,Sn):()=>{},[me]);tL(nL,[ce,ee,_e,M,se,ke]);let un;try{un=ne.useSyncExternalStore(Ze,gt,K?()=>ue(K(),M):gt)}catch(Tt){throw be.current&&(Tt.message+=`
The error may be correlated with this previous error:
${be.current.stack}

`),Tt}hh(()=>{be.current=void 0,se.current=void 0,ee.current=un});const Un=ne.useMemo(()=>ne.createElement(x,{...un,ref:R}),[R,x,un]);return ne.useMemo(()=>O?ne.createElement(P.Provider,{value:V},Un):Un,[P,Un,V])}const ie=ne.memo(ae);if(ie.WrappedComponent=x,ie.displayName=ae.displayName=Y,p){const I=ne.forwardRef(function(M,P){return ne.createElement(ie,{...M,reactReduxForwardedRef:P})});return I.displayName=Y,I.WrappedComponent=x,hg(I,x)}return hg(ie,x)}}var Lw=sL;function aL(n){const{children:e,context:t,serverState:s,store:a}=n,l=ne.useMemo(()=>{const p=Mw(a);return{store:a,subscription:p,getServerState:s?()=>s:void 0}},[a,s]),c=ne.useMemo(()=>a.getState(),[a]);hh(()=>{const{subscription:p}=l;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),c!==a.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[l,c]);const d=t||Vw;return ne.createElement(d.Provider,{value:l},e)}var oL=aL,lL="Invariant failed";function uL(n,e){throw new Error(lL)}var hr=function(e){var t=e.top,s=e.right,a=e.bottom,l=e.left,c=s-l,d=a-t,p={top:t,right:s,bottom:a,left:l,width:c,height:d,x:l,y:t,center:{x:(s+l)/2,y:(a+t)/2}};return p},_y=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},rS=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},cL=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},Cm={top:0,right:0,bottom:0,left:0},vy=function(e){var t=e.borderBox,s=e.margin,a=s===void 0?Cm:s,l=e.border,c=l===void 0?Cm:l,d=e.padding,p=d===void 0?Cm:d,g=hr(_y(t,a)),_=hr(rS(t,c)),E=hr(rS(_,p));return{marginBox:g,borderBox:hr(t),paddingBox:_,contentBox:E,margin:a,border:c,padding:p}},Zn=function(e){var t=e.slice(0,-2),s=e.slice(-2);if(s!=="px")return 0;var a=Number(t);return isNaN(a)&&uL(),a},fL=function(){return{x:window.pageXOffset,y:window.pageYOffset}},dh=function(e,t){var s=e.borderBox,a=e.border,l=e.margin,c=e.padding,d=cL(s,t);return vy({borderBox:d,border:a,margin:l,padding:c})},ph=function(e,t){return t===void 0&&(t=fL()),dh(e,t)},kw=function(e,t){var s={top:Zn(t.marginTop),right:Zn(t.marginRight),bottom:Zn(t.marginBottom),left:Zn(t.marginLeft)},a={top:Zn(t.paddingTop),right:Zn(t.paddingRight),bottom:Zn(t.paddingBottom),left:Zn(t.paddingLeft)},l={top:Zn(t.borderTopWidth),right:Zn(t.borderRightWidth),bottom:Zn(t.borderBottomWidth),left:Zn(t.borderLeftWidth)};return vy({borderBox:e,margin:s,padding:a,border:l})},Uw=function(e){var t=e.getBoundingClientRect(),s=window.getComputedStyle(e);return kw(t,s)},xu=function(e){var t=[],s=null,a=function(){for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];t=d,!s&&(s=requestAnimationFrame(function(){s=null,e.apply(void 0,t)}))};return a.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},a};function mh(){return mh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)({}).hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},mh.apply(null,arguments)}function Bw(n,e){}Bw.bind(null,"warn");Bw.bind(null,"error");function ls(){}function hL(n,e){return{...n,...e}}function tr(n,e,t){const s=e.map(a=>{const l=hL(t,a.options);return n.addEventListener(a.eventName,a.fn,l),function(){n.removeEventListener(a.eventName,a.fn,l)}});return function(){s.forEach(l=>{l()})}}const dL="Invariant failed";class gh extends Error{}gh.prototype.toString=function(){return this.message};function le(n,e){throw new gh(dL)}class pL extends bt.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=ls,this.onWindowError=t=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),t.error instanceof gh&&t.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=t=>{this.callbacks=t}}componentDidMount(){this.unbind=tr(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof gh){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const mL=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,yh=n=>n+1,gL=n=>`
  You have lifted an item in position ${yh(n.source.index)}
`,zw=(n,e)=>{const t=n.droppableId===e.droppableId,s=yh(n.index),a=yh(e.index);return t?`
      You have moved the item from position ${s}
      to position ${a}
    `:`
    You have moved the item from position ${s}
    in list ${n.droppableId}
    to list ${e.droppableId}
    in position ${a}
  `},qw=(n,e,t)=>e.droppableId===t.droppableId?`
      The item ${n}
      has been combined with ${t.draggableId}`:`
      The item ${n}
      in list ${e.droppableId}
      has been combined with ${t.draggableId}
      in list ${t.droppableId}
    `,yL=n=>{const e=n.destination;if(e)return zw(n.source,e);const t=n.combine;return t?qw(n.draggableId,n.source,t):"You are over an area that cannot be dropped on"},iS=n=>`
  The item has returned to its starting position
  of ${yh(n.index)}
`,_L=n=>{if(n.reason==="CANCEL")return`
      Movement cancelled.
      ${iS(n.source)}
    `;const e=n.destination,t=n.combine;return e?`
      You have dropped the item.
      ${zw(n.source,e)}
    `:t?`
      You have dropped the item.
      ${qw(n.draggableId,n.source,t)}
    `:`
    The item has been dropped while not over a drop area.
    ${iS(n.source)}
  `},Hf={dragHandleUsageInstructions:mL,onDragStart:gL,onDragUpdate:yL,onDragEnd:_L};function vL(n,e){return!!(n===e||Number.isNaN(n)&&Number.isNaN(e))}function Fw(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!vL(n[t],e[t]))return!1;return!0}function Fe(n,e){const t=ne.useState(()=>({inputs:e,result:n()}))[0],s=ne.useRef(!0),a=ne.useRef(t),c=s.current||!!(e&&a.current.inputs&&Fw(e,a.current.inputs))?a.current:{inputs:e,result:n()};return ne.useEffect(()=>{s.current=!1,a.current=c},[c]),c.result}function ye(n,e){return Fe(()=>n,e)}const jt={x:0,y:0},Jt=(n,e)=>({x:n.x+e.x,y:n.y+e.y}),Pn=(n,e)=>({x:n.x-e.x,y:n.y-e.y}),us=(n,e)=>n.x===e.x&&n.y===e.y,Ho=n=>({x:n.x!==0?-n.x:0,y:n.y!==0?-n.y:0}),ma=(n,e,t=0)=>n==="x"?{x:e,y:t}:{x:t,y:e},Mu=(n,e)=>Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2),sS=(n,e)=>Math.min(...e.map(t=>Mu(n,t))),Hw=n=>e=>({x:n(e.x),y:n(e.y)});var EL=(n,e)=>{const t=hr({top:Math.max(e.top,n.top),right:Math.min(e.right,n.right),bottom:Math.min(e.bottom,n.bottom),left:Math.max(e.left,n.left)});return t.width<=0||t.height<=0?null:t};const Xu=(n,e)=>({top:n.top+e.y,left:n.left+e.x,bottom:n.bottom+e.y,right:n.right+e.x}),aS=n=>[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.left,y:n.bottom},{x:n.right,y:n.bottom}],bL={top:0,right:0,bottom:0,left:0},TL=(n,e)=>e?Xu(n,e.scroll.diff.displacement):n,SL=(n,e,t)=>t&&t.increasedBy?{...n,[e.end]:n[e.end]+t.increasedBy[e.line]}:n,AL=(n,e)=>e&&e.shouldClipSubject?EL(e.pageMarginBox,n):hr(n);var xo=({page:n,withPlaceholder:e,axis:t,frame:s})=>{const a=TL(n.marginBox,s),l=SL(a,t,e),c=AL(l,s);return{page:n,withPlaceholder:e,active:c}},Ey=(n,e)=>{n.frame||le();const t=n.frame,s=Pn(e,t.scroll.initial),a=Ho(s),l={...t,scroll:{initial:t.scroll.initial,current:e,diff:{value:s,displacement:a},max:t.scroll.max}},c=xo({page:n.subject.page,withPlaceholder:n.subject.withPlaceholder,axis:n.axis,frame:l});return{...n,frame:l,subject:c}};function Ht(n,e=Fw){let t=null;function s(...a){if(t&&t.lastThis===this&&e(a,t.lastArgs))return t.lastResult;const l=n.apply(this,a);return t={lastResult:l,lastArgs:a,lastThis:this},l}return s.clear=function(){t=null},s}const jw=Ht(n=>n.reduce((e,t)=>(e[t.descriptor.id]=t,e),{})),Gw=Ht(n=>n.reduce((e,t)=>(e[t.descriptor.id]=t,e),{})),Wh=Ht(n=>Object.values(n)),wL=Ht(n=>Object.values(n));var jo=Ht((n,e)=>wL(e).filter(s=>n===s.descriptor.droppableId).sort((s,a)=>s.descriptor.index-a.descriptor.index));function by(n){return n.at&&n.at.type==="REORDER"?n.at.destination:null}function Xh(n){return n.at&&n.at.type==="COMBINE"?n.at.combine:null}var Zh=Ht((n,e)=>e.filter(t=>t.descriptor.id!==n.descriptor.id)),IL=({isMovingForward:n,draggable:e,destination:t,insideDestination:s,previousImpact:a})=>{if(!t.isCombineEnabled||!by(a))return null;function c(A){const O={type:"COMBINE",combine:{draggableId:A,droppableId:t.descriptor.id}};return{...a,at:O}}const d=a.displaced.all,p=d.length?d[0]:null;if(n)return p?c(p):null;const g=Zh(e,s);if(!p){if(!g.length)return null;const A=g[g.length-1];return c(A.descriptor.id)}const _=g.findIndex(A=>A.descriptor.id===p);_===-1&&le();const E=_-1;if(E<0)return null;const v=g[E];return c(v.descriptor.id)},Go=(n,e)=>n.descriptor.droppableId===e.descriptor.id;const $w={point:jt,value:0},Pu={invisible:{},visible:{},all:[]},RL={displaced:Pu,displacedBy:$w,at:null};var ir=(n,e)=>t=>n<=t&&t<=e,Yw=n=>{const e=ir(n.top,n.bottom),t=ir(n.left,n.right);return s=>{if(e(s.top)&&e(s.bottom)&&t(s.left)&&t(s.right))return!0;const l=e(s.top)||e(s.bottom),c=t(s.left)||t(s.right);if(l&&c)return!0;const p=s.top<n.top&&s.bottom>n.bottom,g=s.left<n.left&&s.right>n.right;return p&&g?!0:p&&c||g&&l}},CL=n=>{const e=ir(n.top,n.bottom),t=ir(n.left,n.right);return s=>e(s.top)&&e(s.bottom)&&t(s.left)&&t(s.right)};const Ty={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Kw={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var DL=n=>e=>{const t=ir(e.top,e.bottom),s=ir(e.left,e.right);return a=>n===Ty?t(a.top)&&t(a.bottom):s(a.left)&&s(a.right)};const OL=(n,e)=>{const t=e.frame?e.frame.scroll.diff.displacement:jt;return Xu(n,t)},NL=(n,e,t)=>e.subject.active?t(e.subject.active)(n):!1,xL=(n,e,t)=>t(e)(n),Sy=({target:n,destination:e,viewport:t,withDroppableDisplacement:s,isVisibleThroughFrameFn:a})=>{const l=s?OL(n,e):n;return NL(l,e,a)&&xL(l,t,a)},ML=n=>Sy({...n,isVisibleThroughFrameFn:Yw}),Qw=n=>Sy({...n,isVisibleThroughFrameFn:CL}),PL=n=>Sy({...n,isVisibleThroughFrameFn:DL(n.destination.axis)}),VL=(n,e,t)=>{if(typeof t=="boolean")return t;if(!e)return!0;const{invisible:s,visible:a}=e;if(s[n])return!1;const l=a[n];return l?l.shouldAnimate:!0};function LL(n,e){const t=n.page.marginBox,s={top:e.point.y,right:0,bottom:0,left:e.point.x};return hr(_y(t,s))}function Vu({afterDragging:n,destination:e,displacedBy:t,viewport:s,forceShouldAnimate:a,last:l}){return n.reduce(function(d,p){const g=LL(p,t),_=p.descriptor.id;if(d.all.push(_),!ML({target:g,destination:e,viewport:s,withDroppableDisplacement:!0}))return d.invisible[p.descriptor.id]=!0,d;const v=VL(_,l,a),A={draggableId:_,shouldAnimate:v};return d.visible[_]=A,d},{all:[],visible:{},invisible:{}})}function kL(n,e){if(!n.length)return 0;const t=n[n.length-1].descriptor.index;return e.inHomeList?t:t+1}function oS({insideDestination:n,inHomeList:e,displacedBy:t,destination:s}){const a=kL(n,{inHomeList:e});return{displaced:Pu,displacedBy:t,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function _h({draggable:n,insideDestination:e,destination:t,viewport:s,displacedBy:a,last:l,index:c,forceShouldAnimate:d}){const p=Go(n,t);if(c==null)return oS({insideDestination:e,inHomeList:p,displacedBy:a,destination:t});const g=e.find(O=>O.descriptor.index===c);if(!g)return oS({insideDestination:e,inHomeList:p,displacedBy:a,destination:t});const _=Zh(n,e),E=e.indexOf(g),v=_.slice(E);return{displaced:Vu({afterDragging:v,destination:t,displacedBy:a,last:l,viewport:s.frame,forceShouldAnimate:d}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:t.descriptor.id,index:c}}}}function _s(n,e){return!!e.effected[n]}var UL=({isMovingForward:n,destination:e,draggables:t,combine:s,afterCritical:a})=>{if(!e.isCombineEnabled)return null;const l=s.draggableId,d=t[l].descriptor.index;return _s(l,a)?n?d:d-1:n?d+1:d},BL=({isMovingForward:n,isInHomeList:e,insideDestination:t,location:s})=>{if(!t.length)return null;const a=s.index,l=n?a+1:a-1,c=t[0].descriptor.index,d=t[t.length-1].descriptor.index,p=e?d:d+1;return l<c||l>p?null:l},zL=({isMovingForward:n,isInHomeList:e,draggable:t,draggables:s,destination:a,insideDestination:l,previousImpact:c,viewport:d,afterCritical:p})=>{const g=c.at;if(g||le(),g.type==="REORDER"){const E=BL({isMovingForward:n,isInHomeList:e,location:g.destination,insideDestination:l});return E==null?null:_h({draggable:t,insideDestination:l,destination:a,viewport:d,last:c.displaced,displacedBy:c.displacedBy,index:E})}const _=UL({isMovingForward:n,destination:a,displaced:c.displaced,draggables:s,combine:g.combine,afterCritical:p});return _==null?null:_h({draggable:t,insideDestination:l,destination:a,viewport:d,last:c.displaced,displacedBy:c.displacedBy,index:_})},qL=({displaced:n,afterCritical:e,combineWith:t,displacedBy:s})=>{const a=!!(n.visible[t]||n.invisible[t]);return _s(t,e)?a?jt:Ho(s.point):a?s.point:jt},FL=({afterCritical:n,impact:e,draggables:t})=>{const s=Xh(e);s||le();const a=s.draggableId,l=t[a].page.borderBox.center,c=qL({displaced:e.displaced,afterCritical:n,combineWith:a,displacedBy:e.displacedBy});return Jt(l,c)};const Ww=(n,e)=>e.margin[n.start]+e.borderBox[n.size]/2,HL=(n,e)=>e.margin[n.end]+e.borderBox[n.size]/2,Ay=(n,e,t)=>e[n.crossAxisStart]+t.margin[n.crossAxisStart]+t.borderBox[n.crossAxisSize]/2,lS=({axis:n,moveRelativeTo:e,isMoving:t})=>ma(n.line,e.marginBox[n.end]+Ww(n,t),Ay(n,e.marginBox,t)),uS=({axis:n,moveRelativeTo:e,isMoving:t})=>ma(n.line,e.marginBox[n.start]-HL(n,t),Ay(n,e.marginBox,t)),jL=({axis:n,moveInto:e,isMoving:t})=>ma(n.line,e.contentBox[n.start]+Ww(n,t),Ay(n,e.contentBox,t));var GL=({impact:n,draggable:e,draggables:t,droppable:s,afterCritical:a})=>{const l=jo(s.descriptor.id,t),c=e.page,d=s.axis;if(!l.length)return jL({axis:d,moveInto:s.page,isMoving:c});const{displaced:p,displacedBy:g}=n,_=p.all[0];if(_){const v=t[_];if(_s(_,a))return uS({axis:d,moveRelativeTo:v.page,isMoving:c});const A=dh(v.page,g.point);return uS({axis:d,moveRelativeTo:A,isMoving:c})}const E=l[l.length-1];if(E.descriptor.id===e.descriptor.id)return c.borderBox.center;if(_s(E.descriptor.id,a)){const v=dh(E.page,Ho(a.displacedBy.point));return lS({axis:d,moveRelativeTo:v,isMoving:c})}return lS({axis:d,moveRelativeTo:E.page,isMoving:c})},dg=(n,e)=>{const t=n.frame;return t?Jt(e,t.scroll.diff.displacement):e};const $L=({impact:n,draggable:e,droppable:t,draggables:s,afterCritical:a})=>{const l=e.page.borderBox.center,c=n.at;return!t||!c?l:c.type==="REORDER"?GL({impact:n,draggable:e,draggables:s,droppable:t,afterCritical:a}):FL({impact:n,draggables:s,afterCritical:a})};var Jh=n=>{const e=$L(n),t=n.droppable;return t?dg(t,e):e},Xw=(n,e)=>{const t=Pn(e,n.scroll.initial),s=Ho(t);return{frame:hr({top:e.y,bottom:e.y+n.frame.height,left:e.x,right:e.x+n.frame.width}),scroll:{initial:n.scroll.initial,max:n.scroll.max,current:e,diff:{value:t,displacement:s}}}};function cS(n,e){return n.map(t=>e[t])}function YL(n,e){for(let t=0;t<e.length;t++){const s=e[t].visible[n];if(s)return s}return null}var KL=({impact:n,viewport:e,destination:t,draggables:s,maxScrollChange:a})=>{const l=Xw(e,Jt(e.scroll.current,a)),c=t.frame?Ey(t,Jt(t.frame.scroll.current,a)):t,d=n.displaced,p=Vu({afterDragging:cS(d.all,s),destination:t,displacedBy:n.displacedBy,viewport:l.frame,last:d,forceShouldAnimate:!1}),g=Vu({afterDragging:cS(d.all,s),destination:c,displacedBy:n.displacedBy,viewport:e.frame,last:d,forceShouldAnimate:!1}),_={},E={},v=[d,p,g];return d.all.forEach(O=>{const L=YL(O,v);if(L){E[O]=L;return}_[O]=!0}),{...n,displaced:{all:d.all,invisible:_,visible:E}}},QL=(n,e)=>Jt(n.scroll.diff.displacement,e),wy=({pageBorderBoxCenter:n,draggable:e,viewport:t})=>{const s=QL(t,n),a=Pn(s,e.page.borderBox.center);return Jt(e.client.borderBox.center,a)},Zw=({draggable:n,destination:e,newPageBorderBoxCenter:t,viewport:s,withDroppableDisplacement:a,onlyOnMainAxis:l=!1})=>{const c=Pn(t,n.page.borderBox.center),p={target:Xu(n.page.borderBox,c),destination:e,withDroppableDisplacement:a,viewport:s};return l?PL(p):Qw(p)},WL=({isMovingForward:n,draggable:e,destination:t,draggables:s,previousImpact:a,viewport:l,previousPageBorderBoxCenter:c,previousClientSelection:d,afterCritical:p})=>{if(!t.isEnabled)return null;const g=jo(t.descriptor.id,s),_=Go(e,t),E=IL({isMovingForward:n,draggable:e,destination:t,insideDestination:g,previousImpact:a})||zL({isMovingForward:n,isInHomeList:_,draggable:e,draggables:s,destination:t,insideDestination:g,previousImpact:a,viewport:l,afterCritical:p});if(!E)return null;const v=Jh({impact:E,draggable:e,droppable:t,draggables:s,afterCritical:p});if(Zw({draggable:e,destination:t,newPageBorderBoxCenter:v,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:wy({pageBorderBoxCenter:v,draggable:e,viewport:l}),impact:E,scrollJumpRequest:null};const O=Pn(v,c),L=KL({impact:E,viewport:l,destination:t,draggables:s,maxScrollChange:O});return{clientSelection:d,impact:L,scrollJumpRequest:O}};const pn=n=>{const e=n.subject.active;return e||le(),e};var XL=({isMovingForward:n,pageBorderBoxCenter:e,source:t,droppables:s,viewport:a})=>{const l=t.subject.active;if(!l)return null;const c=t.axis,d=ir(l[c.start],l[c.end]),p=Wh(s).filter(_=>_!==t).filter(_=>_.isEnabled).filter(_=>!!_.subject.active).filter(_=>Yw(a.frame)(pn(_))).filter(_=>{const E=pn(_);return n?l[c.crossAxisEnd]<E[c.crossAxisEnd]:E[c.crossAxisStart]<l[c.crossAxisStart]}).filter(_=>{const E=pn(_),v=ir(E[c.start],E[c.end]);return d(E[c.start])||d(E[c.end])||v(l[c.start])||v(l[c.end])}).sort((_,E)=>{const v=pn(_)[c.crossAxisStart],A=pn(E)[c.crossAxisStart];return n?v-A:A-v}).filter((_,E,v)=>pn(_)[c.crossAxisStart]===pn(v[0])[c.crossAxisStart]);if(!p.length)return null;if(p.length===1)return p[0];const g=p.filter(_=>ir(pn(_)[c.start],pn(_)[c.end])(e[c.line]));return g.length===1?g[0]:g.length>1?g.sort((_,E)=>pn(_)[c.start]-pn(E)[c.start])[0]:p.sort((_,E)=>{const v=sS(e,aS(pn(_))),A=sS(e,aS(pn(E)));return v!==A?v-A:pn(_)[c.start]-pn(E)[c.start]})[0]};const fS=(n,e)=>{const t=n.page.borderBox.center;return _s(n.descriptor.id,e)?Pn(t,e.displacedBy.point):t},ZL=(n,e)=>{const t=n.page.borderBox;return _s(n.descriptor.id,e)?Xu(t,Ho(e.displacedBy.point)):t};var JL=({pageBorderBoxCenter:n,viewport:e,destination:t,insideDestination:s,afterCritical:a})=>s.filter(c=>Qw({target:ZL(c,a),destination:t,viewport:e.frame,withDroppableDisplacement:!0})).sort((c,d)=>{const p=Mu(n,dg(t,fS(c,a))),g=Mu(n,dg(t,fS(d,a)));return p<g?-1:g<p?1:c.descriptor.index-d.descriptor.index})[0]||null,Zu=Ht(function(e,t){const s=t[e.line];return{value:s,point:ma(e.line,s)}});const e4=(n,e,t)=>{const s=n.axis;if(n.descriptor.mode==="virtual")return ma(s.line,e[s.line]);const a=n.subject.page.contentBox[s.size],p=jo(n.descriptor.id,t).reduce((g,_)=>g+_.client.marginBox[s.size],0)+e[s.line]-a;return p<=0?null:ma(s.line,p)},Jw=(n,e)=>({...n,scroll:{...n.scroll,max:e}}),eI=(n,e,t)=>{const s=n.frame;Go(e,n)&&le(),n.subject.withPlaceholder&&le();const a=Zu(n.axis,e.displaceBy).point,l=e4(n,a,t),c={placeholderSize:a,increasedBy:l,oldFrameMaxScroll:n.frame?n.frame.scroll.max:null};if(!s){const _=xo({page:n.subject.page,withPlaceholder:c,axis:n.axis,frame:n.frame});return{...n,subject:_}}const d=l?Jt(s.scroll.max,l):s.scroll.max,p=Jw(s,d),g=xo({page:n.subject.page,withPlaceholder:c,axis:n.axis,frame:p});return{...n,subject:g,frame:p}},t4=n=>{const e=n.subject.withPlaceholder;e||le();const t=n.frame;if(!t){const c=xo({page:n.subject.page,axis:n.axis,frame:null,withPlaceholder:null});return{...n,subject:c}}const s=e.oldFrameMaxScroll;s||le();const a=Jw(t,s),l=xo({page:n.subject.page,axis:n.axis,frame:a,withPlaceholder:null});return{...n,subject:l,frame:a}};var n4=({previousPageBorderBoxCenter:n,moveRelativeTo:e,insideDestination:t,draggable:s,draggables:a,destination:l,viewport:c,afterCritical:d})=>{if(!e){if(t.length)return null;const E={displaced:Pu,displacedBy:$w,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:0}}},v=Jh({impact:E,draggable:s,droppable:l,draggables:a,afterCritical:d}),A=Go(s,l)?l:eI(l,s,a);return Zw({draggable:s,destination:A,newPageBorderBoxCenter:v,viewport:c.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?E:null}const p=n[l.axis.line]<=e.page.borderBox.center[l.axis.line],g=(()=>{const E=e.descriptor.index;return e.descriptor.id===s.descriptor.id||p?E:E+1})(),_=Zu(l.axis,s.displaceBy);return _h({draggable:s,insideDestination:t,destination:l,viewport:c,displacedBy:_,last:Pu,index:g})},r4=({isMovingForward:n,previousPageBorderBoxCenter:e,draggable:t,isOver:s,draggables:a,droppables:l,viewport:c,afterCritical:d})=>{const p=XL({isMovingForward:n,pageBorderBoxCenter:e,source:s,droppables:l,viewport:c});if(!p)return null;const g=jo(p.descriptor.id,a),_=JL({pageBorderBoxCenter:e,viewport:c,destination:p,insideDestination:g,afterCritical:d}),E=n4({previousPageBorderBoxCenter:e,destination:p,draggable:t,draggables:a,moveRelativeTo:_,insideDestination:g,viewport:c,afterCritical:d});if(!E)return null;const v=Jh({impact:E,draggable:t,droppable:p,draggables:a,afterCritical:d});return{clientSelection:wy({pageBorderBoxCenter:v,draggable:t,viewport:c}),impact:E,scrollJumpRequest:null}},Ln=n=>{const e=n.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null};const i4=(n,e)=>{const t=Ln(n);return t?e[t]:null};var s4=({state:n,type:e})=>{const t=i4(n.impact,n.dimensions.droppables),s=!!t,a=n.dimensions.droppables[n.critical.droppable.id],l=t||a,c=l.axis.direction,d=c==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||c==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(d&&!s)return null;const p=e==="MOVE_DOWN"||e==="MOVE_RIGHT",g=n.dimensions.draggables[n.critical.draggable.id],_=n.current.page.borderBoxCenter,{draggables:E,droppables:v}=n.dimensions;return d?WL({isMovingForward:p,previousPageBorderBoxCenter:_,draggable:g,destination:l,draggables:E,viewport:n.viewport,previousClientSelection:n.current.client.selection,previousImpact:n.impact,afterCritical:n.afterCritical}):r4({isMovingForward:p,previousPageBorderBoxCenter:_,draggable:g,isOver:l,draggables:E,droppables:v,viewport:n.viewport,afterCritical:n.afterCritical})};function aa(n){return n.phase==="DRAGGING"||n.phase==="COLLECTING"}function tI(n){const e=ir(n.top,n.bottom),t=ir(n.left,n.right);return function(a){return e(a.y)&&t(a.x)}}function a4(n,e){return n.left<e.right&&n.right>e.left&&n.top<e.bottom&&n.bottom>e.top}function o4({pageBorderBox:n,draggable:e,candidates:t}){const s=e.page.borderBox.center,a=t.map(l=>{const c=l.axis,d=ma(l.axis.line,n.center[c.line],l.page.borderBox.center[c.crossAxisLine]);return{id:l.descriptor.id,distance:Mu(s,d)}}).sort((l,c)=>c.distance-l.distance);return a[0]?a[0].id:null}function l4({pageBorderBox:n,draggable:e,droppables:t}){const s=Wh(t).filter(a=>{if(!a.isEnabled)return!1;const l=a.subject.active;if(!l||!a4(n,l))return!1;if(tI(l)(n.center))return!0;const c=a.axis,d=l.center[c.crossAxisLine],p=n[c.crossAxisStart],g=n[c.crossAxisEnd],_=ir(l[c.crossAxisStart],l[c.crossAxisEnd]),E=_(p),v=_(g);return!E&&!v?!0:E?p<d:g>d});return s.length?s.length===1?s[0].descriptor.id:o4({pageBorderBox:n,draggable:e,candidates:s}):null}const nI=(n,e)=>hr(Xu(n,e));var u4=(n,e)=>{const t=n.frame;return t?nI(e,t.scroll.diff.value):e};function rI({displaced:n,id:e}){return!!(n.visible[e]||n.invisible[e])}function c4({draggable:n,closest:e,inHomeList:t}){return e?t&&e.descriptor.index>n.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var f4=({pageBorderBoxWithDroppableScroll:n,draggable:e,destination:t,insideDestination:s,last:a,viewport:l,afterCritical:c})=>{const d=t.axis,p=Zu(t.axis,e.displaceBy),g=p.value,_=n[d.start],E=n[d.end],A=Zh(e,s).find(L=>{const x=L.descriptor.id,$=L.page.borderBox.center[d.line],Y=_s(x,c),te=rI({displaced:a,id:x});return Y?te?E<=$:_<$-g:te?E<=$+g:_<$})||null,O=c4({draggable:e,closest:A,inHomeList:Go(e,t)});return _h({draggable:e,insideDestination:s,destination:t,viewport:l,last:a,displacedBy:p,index:O})};const h4=4;var d4=({draggable:n,pageBorderBoxWithDroppableScroll:e,previousImpact:t,destination:s,insideDestination:a,afterCritical:l})=>{if(!s.isCombineEnabled)return null;const c=s.axis,d=Zu(s.axis,n.displaceBy),p=d.value,g=e[c.start],_=e[c.end],v=Zh(n,a).find(O=>{const L=O.descriptor.id,x=O.page.borderBox,Y=x[c.size]/h4,te=_s(L,l),ae=rI({displaced:t.displaced,id:L});return te?ae?_>x[c.start]+Y&&_<x[c.end]-Y:g>x[c.start]-p+Y&&g<x[c.end]-p-Y:ae?_>x[c.start]+p+Y&&_<x[c.end]+p-Y:g>x[c.start]+Y&&g<x[c.end]-Y});return v?{displacedBy:d,displaced:t.displaced,at:{type:"COMBINE",combine:{draggableId:v.descriptor.id,droppableId:s.descriptor.id}}}:null},iI=({pageOffset:n,draggable:e,draggables:t,droppables:s,previousImpact:a,viewport:l,afterCritical:c})=>{const d=nI(e.page.borderBox,n),p=l4({pageBorderBox:d,draggable:e,droppables:s});if(!p)return RL;const g=s[p],_=jo(g.descriptor.id,t),E=u4(g,d);return d4({pageBorderBoxWithDroppableScroll:E,draggable:e,previousImpact:a,destination:g,insideDestination:_,afterCritical:c})||f4({pageBorderBoxWithDroppableScroll:E,draggable:e,destination:g,insideDestination:_,last:a.displaced,viewport:l,afterCritical:c})},Iy=(n,e)=>({...n,[e.descriptor.id]:e});const p4=({previousImpact:n,impact:e,droppables:t})=>{const s=Ln(n),a=Ln(e);if(!s||s===a)return t;const l=t[s];if(!l.subject.withPlaceholder)return t;const c=t4(l);return Iy(t,c)};var m4=({draggable:n,draggables:e,droppables:t,previousImpact:s,impact:a})=>{const l=p4({previousImpact:s,impact:a,droppables:t}),c=Ln(a);if(!c)return l;const d=t[c];if(Go(n,d)||d.subject.withPlaceholder)return l;const p=eI(d,n,e);return Iy(l,p)},_u=({state:n,clientSelection:e,dimensions:t,viewport:s,impact:a,scrollJumpRequest:l})=>{const c=s||n.viewport,d=t||n.dimensions,p=e||n.current.client.selection,g=Pn(p,n.initial.client.selection),_={offset:g,selection:p,borderBoxCenter:Jt(n.initial.client.borderBoxCenter,g)},E={selection:Jt(_.selection,c.scroll.current),borderBoxCenter:Jt(_.borderBoxCenter,c.scroll.current),offset:Jt(_.offset,c.scroll.diff.value)},v={client:_,page:E};if(n.phase==="COLLECTING")return{...n,dimensions:d,viewport:c,current:v};const A=d.draggables[n.critical.draggable.id],O=a||iI({pageOffset:E.offset,draggable:A,draggables:d.draggables,droppables:d.droppables,previousImpact:n.impact,viewport:c,afterCritical:n.afterCritical}),L=m4({draggable:A,impact:O,previousImpact:n.impact,draggables:d.draggables,droppables:d.droppables});return{...n,current:v,dimensions:{draggables:d.draggables,droppables:L},impact:O,viewport:c,scrollJumpRequest:l||null,forceShouldAnimate:l?!1:null}};function g4(n,e){return n.map(t=>e[t])}var sI=({impact:n,viewport:e,draggables:t,destination:s,forceShouldAnimate:a})=>{const l=n.displaced,c=g4(l.all,t),d=Vu({afterDragging:c,destination:s,displacedBy:n.displacedBy,viewport:e.frame,forceShouldAnimate:a,last:l});return{...n,displaced:d}},aI=({impact:n,draggable:e,droppable:t,draggables:s,viewport:a,afterCritical:l})=>{const c=Jh({impact:n,draggable:e,draggables:s,droppable:t,afterCritical:l});return wy({pageBorderBoxCenter:c,draggable:e,viewport:a})},oI=({state:n,dimensions:e,viewport:t})=>{n.movementMode!=="SNAP"&&le();const s=n.impact,a=t||n.viewport,l=e||n.dimensions,{draggables:c,droppables:d}=l,p=c[n.critical.draggable.id],g=Ln(s);g||le();const _=d[g],E=sI({impact:s,viewport:a,destination:_,draggables:c}),v=aI({impact:E,draggable:p,droppable:_,draggables:c,viewport:a,afterCritical:n.afterCritical});return _u({impact:E,clientSelection:v,state:n,dimensions:l,viewport:a})},y4=n=>({index:n.index,droppableId:n.droppableId}),lI=({draggable:n,home:e,draggables:t,viewport:s})=>{const a=Zu(e.axis,n.displaceBy),l=jo(e.descriptor.id,t),c=l.indexOf(n);c===-1&&le();const d=l.slice(c+1),p=d.reduce((v,A)=>(v[A.descriptor.id]=!0,v),{}),g={inVirtualList:e.descriptor.mode==="virtual",displacedBy:a,effected:p};return{impact:{displaced:Vu({afterDragging:d,destination:e,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:y4(n.descriptor)}},afterCritical:g}},_4=(n,e)=>({draggables:n.draggables,droppables:Iy(n.droppables,e)}),v4=({draggable:n,offset:e,initialWindowScroll:t})=>{const s=dh(n.client,e),a=ph(s,t);return{...n,placeholder:{...n.placeholder,client:s},client:s,page:a}},E4=n=>{const e=n.frame;return e||le(),e},b4=({additions:n,updatedDroppables:e,viewport:t})=>{const s=t.scroll.diff.value;return n.map(a=>{const l=a.descriptor.droppableId,c=e[l],p=E4(c).scroll.diff.value,g=Jt(s,p);return v4({draggable:a,offset:g,initialWindowScroll:t.scroll.initial})})},T4=({state:n,published:e})=>{const t=e.modified.map($=>{const Y=n.dimensions.droppables[$.droppableId];return Ey(Y,$.scroll)}),s={...n.dimensions.droppables,...jw(t)},a=Gw(b4({additions:e.additions,updatedDroppables:s,viewport:n.viewport})),l={...n.dimensions.draggables,...a};e.removals.forEach($=>{delete l[$]});const c={droppables:s,draggables:l},d=Ln(n.impact),p=d?c.droppables[d]:null,g=c.draggables[n.critical.draggable.id],_=c.droppables[n.critical.droppable.id],{impact:E,afterCritical:v}=lI({draggable:g,home:_,draggables:l,viewport:n.viewport}),A=p&&p.isCombineEnabled?n.impact:E,O=iI({pageOffset:n.current.page.offset,draggable:c.draggables[n.critical.draggable.id],draggables:c.draggables,droppables:c.droppables,previousImpact:A,viewport:n.viewport,afterCritical:v}),L={...n,phase:"DRAGGING",impact:O,onLiftImpact:E,dimensions:c,afterCritical:v,forceShouldAnimate:!1};return n.phase==="COLLECTING"?L:{...L,phase:"DROP_PENDING",reason:n.reason,isWaiting:!1}};const pg=n=>n.movementMode==="SNAP",Dm=(n,e,t)=>{const s=_4(n.dimensions,e);return!pg(n)||t?_u({state:n,dimensions:s}):oI({state:n,dimensions:s})};function Om(n){return n.isDragging&&n.movementMode==="SNAP"?{...n,scrollJumpRequest:null}:n}const hS={phase:"IDLE",completed:null,shouldFlush:!1};var S4=(n=hS,e)=>{if(e.type==="FLUSH")return{...hS,shouldFlush:!0};if(e.type==="INITIAL_PUBLISH"){n.phase!=="IDLE"&&le();const{critical:t,clientSelection:s,viewport:a,dimensions:l,movementMode:c}=e.payload,d=l.draggables[t.draggable.id],p=l.droppables[t.droppable.id],g={selection:s,borderBoxCenter:d.client.borderBox.center,offset:jt},_={client:g,page:{selection:Jt(g.selection,a.scroll.initial),borderBoxCenter:Jt(g.selection,a.scroll.initial),offset:Jt(g.selection,a.scroll.diff.value)}},E=Wh(l.droppables).every(L=>!L.isFixedOnPage),{impact:v,afterCritical:A}=lI({draggable:d,home:p,draggables:l.draggables,viewport:a});return{phase:"DRAGGING",isDragging:!0,critical:t,movementMode:c,dimensions:l,initial:_,current:_,isWindowScrollAllowed:E,impact:v,afterCritical:A,onLiftImpact:v,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if(e.type==="COLLECTION_STARTING")return n.phase==="COLLECTING"||n.phase==="DROP_PENDING"?n:(n.phase!=="DRAGGING"&&le(),{...n,phase:"COLLECTING"});if(e.type==="PUBLISH_WHILE_DRAGGING")return n.phase==="COLLECTING"||n.phase==="DROP_PENDING"||le(),T4({state:n,published:e.payload});if(e.type==="MOVE"){if(n.phase==="DROP_PENDING")return n;aa(n)||le();const{client:t}=e.payload;return us(t,n.current.client.selection)?n:_u({state:n,clientSelection:t,impact:pg(n)?n.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(n.phase==="DROP_PENDING"||n.phase==="COLLECTING")return Om(n);aa(n)||le();const{id:t,newScroll:s}=e.payload,a=n.dimensions.droppables[t];if(!a)return n;const l=Ey(a,s);return Dm(n,l,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(n.phase==="DROP_PENDING")return n;aa(n)||le();const{id:t,isEnabled:s}=e.payload,a=n.dimensions.droppables[t];a||le(),a.isEnabled===s&&le();const l={...a,isEnabled:s};return Dm(n,l,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(n.phase==="DROP_PENDING")return n;aa(n)||le();const{id:t,isCombineEnabled:s}=e.payload,a=n.dimensions.droppables[t];a||le(),a.isCombineEnabled===s&&le();const l={...a,isCombineEnabled:s};return Dm(n,l,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(n.phase==="DROP_PENDING"||n.phase==="DROP_ANIMATING")return n;aa(n)||le(),n.isWindowScrollAllowed||le();const t=e.payload.newScroll;if(us(n.viewport.scroll.current,t))return Om(n);const s=Xw(n.viewport,t);return pg(n)?oI({state:n,viewport:s}):_u({state:n,viewport:s})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!aa(n))return n;const t=e.payload.maxScroll;if(us(t,n.viewport.scroll.max))return n;const s={...n.viewport,scroll:{...n.viewport.scroll,max:t}};return{...n,viewport:s}}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(n.phase==="COLLECTING"||n.phase==="DROP_PENDING")return n;n.phase!=="DRAGGING"&&le();const t=s4({state:n,type:e.type});return t?_u({state:n,impact:t.impact,clientSelection:t.clientSelection,scrollJumpRequest:t.scrollJumpRequest}):n}if(e.type==="DROP_PENDING"){const t=e.payload.reason;return n.phase!=="COLLECTING"&&le(),{...n,phase:"DROP_PENDING",isWaiting:!0,reason:t}}if(e.type==="DROP_ANIMATE"){const{completed:t,dropDuration:s,newHomeClientOffset:a}=e.payload;return n.phase==="DRAGGING"||n.phase==="DROP_PENDING"||le(),{phase:"DROP_ANIMATING",completed:t,dropDuration:s,newHomeClientOffset:a,dimensions:n.dimensions}}if(e.type==="DROP_COMPLETE"){const{completed:t}=e.payload;return{phase:"IDLE",completed:t,shouldFlush:!1}}return n};function Ye(n,e){return n instanceof Object&&"type"in n&&n.type===e}const A4=n=>({type:"BEFORE_INITIAL_CAPTURE",payload:n}),w4=n=>({type:"LIFT",payload:n}),I4=n=>({type:"INITIAL_PUBLISH",payload:n}),R4=n=>({type:"PUBLISH_WHILE_DRAGGING",payload:n}),C4=()=>({type:"COLLECTION_STARTING",payload:null}),D4=n=>({type:"UPDATE_DROPPABLE_SCROLL",payload:n}),O4=n=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:n}),N4=n=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:n}),uI=n=>({type:"MOVE",payload:n}),x4=n=>({type:"MOVE_BY_WINDOW_SCROLL",payload:n}),M4=n=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:n}),P4=()=>({type:"MOVE_UP",payload:null}),V4=()=>({type:"MOVE_DOWN",payload:null}),L4=()=>({type:"MOVE_RIGHT",payload:null}),k4=()=>({type:"MOVE_LEFT",payload:null}),Ry=()=>({type:"FLUSH",payload:null}),U4=n=>({type:"DROP_ANIMATE",payload:n}),Cy=n=>({type:"DROP_COMPLETE",payload:n}),cI=n=>({type:"DROP",payload:n}),B4=n=>({type:"DROP_PENDING",payload:n}),fI=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var z4=n=>({getState:e,dispatch:t})=>s=>a=>{if(!Ye(a,"LIFT")){s(a);return}const{id:l,clientSelection:c,movementMode:d}=a.payload,p=e();p.phase==="DROP_ANIMATING"&&t(Cy({completed:p.completed})),e().phase!=="IDLE"&&le(),t(Ry()),t(A4({draggableId:l,movementMode:d}));const _={draggableId:l,scrollOptions:{shouldPublishImmediately:d==="SNAP"}},{critical:E,dimensions:v,viewport:A}=n.startPublishing(_);t(I4({critical:E,dimensions:v,clientSelection:c,movementMode:d,viewport:A}))},q4=n=>()=>e=>t=>{Ye(t,"INITIAL_PUBLISH")&&n.dragging(),Ye(t,"DROP_ANIMATE")&&n.dropping(t.payload.completed.result.reason),(Ye(t,"FLUSH")||Ye(t,"DROP_COMPLETE"))&&n.resting(),e(t)};const Dy={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Lu={opacity:{drop:0,combining:.7},scale:{drop:.75}},hI={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},ia=`${hI.outOfTheWay}s ${Dy.outOfTheWay}`,vu={fluid:`opacity ${ia}`,snap:`transform ${ia}, opacity ${ia}`,drop:n=>{const e=`${n}s ${Dy.drop}`;return`transform ${e}, opacity ${e}`},outOfTheWay:`transform ${ia}`,placeholder:`height ${ia}, width ${ia}, margin ${ia}`},dS=n=>us(n,jt)?void 0:`translate(${n.x}px, ${n.y}px)`,mg={moveTo:dS,drop:(n,e)=>{const t=dS(n);if(t)return e?`${t} scale(${Lu.scale.drop})`:t}},{minDropTime:gg,maxDropTime:dI}=hI,F4=dI-gg,pS=1500,H4=.6;var j4=({current:n,destination:e,reason:t})=>{const s=Mu(n,e);if(s<=0)return gg;if(s>=pS)return dI;const a=s/pS,l=gg+F4*a,c=t==="CANCEL"?l*H4:l;return Number(c.toFixed(2))},G4=({impact:n,draggable:e,dimensions:t,viewport:s,afterCritical:a})=>{const{draggables:l,droppables:c}=t,d=Ln(n),p=d?c[d]:null,g=c[e.descriptor.droppableId],_=aI({impact:n,draggable:e,draggables:l,afterCritical:a,droppable:p||g,viewport:s});return Pn(_,e.client.borderBox.center)},$4=({draggables:n,reason:e,lastImpact:t,home:s,viewport:a,onLiftImpact:l})=>!t.at||e!=="DROP"?{impact:sI({draggables:n,impact:l,destination:s,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:t.at.type==="REORDER"?{impact:t,didDropInsideDroppable:!0}:{impact:{...t,displaced:Pu},didDropInsideDroppable:!0};const Y4=({getState:n,dispatch:e})=>t=>s=>{if(!Ye(s,"DROP")){t(s);return}const a=n(),l=s.payload.reason;if(a.phase==="COLLECTING"){e(B4({reason:l}));return}if(a.phase==="IDLE")return;a.phase==="DROP_PENDING"&&a.isWaiting&&le(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||le();const d=a.critical,p=a.dimensions,g=p.draggables[a.critical.draggable.id],{impact:_,didDropInsideDroppable:E}=$4({reason:l,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),v=E?by(_):null,A=E?Xh(_):null,O={index:d.draggable.index,droppableId:d.droppable.id},L={draggableId:g.descriptor.id,type:g.descriptor.type,source:O,reason:l,mode:a.movementMode,destination:v,combine:A},x=G4({impact:_,draggable:g,dimensions:p,viewport:a.viewport,afterCritical:a.afterCritical}),$={critical:a.critical,afterCritical:a.afterCritical,result:L,impact:_};if(!(!us(a.current.client.offset,x)||!!L.combine)){e(Cy({completed:$}));return}const te=j4({current:a.current.client.offset,destination:x,reason:l});e(U4({newHomeClientOffset:x,dropDuration:te,completed:$}))};var pI=()=>({x:window.pageXOffset,y:window.pageYOffset});function K4(n){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||n()}}}function Q4({onWindowScroll:n}){function e(){n(pI())}const t=xu(e),s=K4(t);let a=ls;function l(){return a!==ls}function c(){l()&&le(),a=tr(window,[s])}function d(){l()||le(),t.cancel(),a(),a=ls}return{start:c,stop:d,isActive:l}}const W4=n=>Ye(n,"DROP_COMPLETE")||Ye(n,"DROP_ANIMATE")||Ye(n,"FLUSH"),X4=n=>{const e=Q4({onWindowScroll:t=>{n.dispatch(x4({newScroll:t}))}});return t=>s=>{!e.isActive()&&Ye(s,"INITIAL_PUBLISH")&&e.start(),e.isActive()&&W4(s)&&e.stop(),t(s)}};var Z4=n=>{let e=!1,t=!1;const s=setTimeout(()=>{t=!0}),a=l=>{e||t||(e=!0,n(l),clearTimeout(s))};return a.wasCalled=()=>e,a},J4=()=>{const n=[],e=a=>{const l=n.findIndex(d=>d.timerId===a);l===-1&&le();const[c]=n.splice(l,1);c.callback()};return{add:a=>{const l=setTimeout(()=>e(l)),c={timerId:l,callback:a};n.push(c)},flush:()=>{if(!n.length)return;const a=[...n];n.length=0,a.forEach(l=>{clearTimeout(l.timerId),l.callback()})}}};const ek=(n,e)=>n==null&&e==null?!0:n==null||e==null?!1:n.droppableId===e.droppableId&&n.index===e.index,tk=(n,e)=>n==null&&e==null?!0:n==null||e==null?!1:n.draggableId===e.draggableId&&n.droppableId===e.droppableId,nk=(n,e)=>{if(n===e)return!0;const t=n.draggable.id===e.draggable.id&&n.draggable.droppableId===e.draggable.droppableId&&n.draggable.type===e.draggable.type&&n.draggable.index===e.draggable.index,s=n.droppable.id===e.droppable.id&&n.droppable.type===e.droppable.type;return t&&s},nu=(n,e)=>{e()},Of=(n,e)=>({draggableId:n.draggable.id,type:n.droppable.type,source:{droppableId:n.droppable.id,index:n.draggable.index},mode:e});function Nm(n,e,t,s){if(!n){t(s(e));return}const a=Z4(t);n(e,{announce:a}),a.wasCalled()||t(s(e))}var rk=(n,e)=>{const t=J4();let s=null;const a=(E,v)=>{s&&le(),nu("onBeforeCapture",()=>{const A=n().onBeforeCapture;A&&A({draggableId:E,mode:v})})},l=(E,v)=>{s&&le(),nu("onBeforeDragStart",()=>{const A=n().onBeforeDragStart;A&&A(Of(E,v))})},c=(E,v)=>{s&&le();const A=Of(E,v);s={mode:v,lastCritical:E,lastLocation:A.source,lastCombine:null},t.add(()=>{nu("onDragStart",()=>Nm(n().onDragStart,A,e,Hf.onDragStart))})},d=(E,v)=>{const A=by(v),O=Xh(v);s||le();const L=!nk(E,s.lastCritical);L&&(s.lastCritical=E);const x=!ek(s.lastLocation,A);x&&(s.lastLocation=A);const $=!tk(s.lastCombine,O);if($&&(s.lastCombine=O),!L&&!x&&!$)return;const Y={...Of(E,s.mode),combine:O,destination:A};t.add(()=>{nu("onDragUpdate",()=>Nm(n().onDragUpdate,Y,e,Hf.onDragUpdate))})},p=()=>{s||le(),t.flush()},g=E=>{s||le(),s=null,nu("onDragEnd",()=>Nm(n().onDragEnd,E,e,Hf.onDragEnd))};return{beforeCapture:a,beforeStart:l,start:c,update:d,flush:p,drop:g,abort:()=>{if(!s)return;const E={...Of(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};g(E)}}},ik=(n,e)=>{const t=rk(n,e);return s=>a=>l=>{if(Ye(l,"BEFORE_INITIAL_CAPTURE")){t.beforeCapture(l.payload.draggableId,l.payload.movementMode);return}if(Ye(l,"INITIAL_PUBLISH")){const d=l.payload.critical;t.beforeStart(d,l.payload.movementMode),a(l),t.start(d,l.payload.movementMode);return}if(Ye(l,"DROP_COMPLETE")){const d=l.payload.completed.result;t.flush(),a(l),t.drop(d);return}if(a(l),Ye(l,"FLUSH")){t.abort();return}const c=s.getState();c.phase==="DRAGGING"&&t.update(c.critical,c.impact)}};const sk=n=>e=>t=>{if(!Ye(t,"DROP_ANIMATION_FINISHED")){e(t);return}const s=n.getState();s.phase!=="DROP_ANIMATING"&&le(),n.dispatch(Cy({completed:s.completed}))},ak=n=>{let e=null,t=null;function s(){t&&(cancelAnimationFrame(t),t=null),e&&(e(),e=null)}return a=>l=>{if((Ye(l,"FLUSH")||Ye(l,"DROP_COMPLETE")||Ye(l,"DROP_ANIMATION_FINISHED"))&&s(),a(l),!Ye(l,"DROP_ANIMATE"))return;const c={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){n.getState().phase==="DROP_ANIMATING"&&n.dispatch(fI())}};t=requestAnimationFrame(()=>{t=null,e=tr(window,[c])})}};var ok=n=>()=>e=>t=>{(Ye(t,"DROP_COMPLETE")||Ye(t,"FLUSH")||Ye(t,"DROP_ANIMATE"))&&n.stopPublishing(),e(t)},lk=n=>{let e=!1;return()=>t=>s=>{if(Ye(s,"INITIAL_PUBLISH")){e=!0,n.tryRecordFocus(s.payload.critical.draggable.id),t(s),n.tryRestoreFocusRecorded();return}if(t(s),!!e){if(Ye(s,"FLUSH")){e=!1,n.tryRestoreFocusRecorded();return}if(Ye(s,"DROP_COMPLETE")){e=!1;const a=s.payload.completed.result;a.combine&&n.tryShiftRecord(a.draggableId,a.combine.draggableId),n.tryRestoreFocusRecorded()}}}};const uk=n=>Ye(n,"DROP_COMPLETE")||Ye(n,"DROP_ANIMATE")||Ye(n,"FLUSH");var ck=n=>e=>t=>s=>{if(uk(s)){n.stop(),t(s);return}if(Ye(s,"INITIAL_PUBLISH")){t(s);const a=e.getState();a.phase!=="DRAGGING"&&le(),n.start(a);return}t(s),n.scroll(e.getState())};const fk=n=>e=>t=>{if(e(t),!Ye(t,"PUBLISH_WHILE_DRAGGING"))return;const s=n.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||n.dispatch(cI({reason:s.reason})))},hk=Ow;var dk=({dimensionMarshal:n,focusMarshal:e,styleMarshal:t,getResponders:s,announce:a,autoScroller:l})=>Dw(S4,hk(cV(q4(t),ok(n),z4(n),Y4,sk,ak,fk,ck(l),X4,lk(e),ik(s,a))));const xm=()=>({additions:{},removals:{},modified:{}});function pk({registry:n,callbacks:e}){let t=xm(),s=null;const a=()=>{s||(e.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:p,removals:g,modified:_}=t,E=Object.keys(p).map(O=>n.draggable.getById(O).getDimension(jt)).sort((O,L)=>O.descriptor.index-L.descriptor.index),v=Object.keys(_).map(O=>{const x=n.droppable.getById(O).callbacks.getScrollWhileDragging();return{droppableId:O,scroll:x}}),A={additions:E,removals:Object.keys(g),modified:v};t=xm(),e.publish(A)}))};return{add:p=>{const g=p.descriptor.id;t.additions[g]=p,t.modified[p.descriptor.droppableId]=!0,t.removals[g]&&delete t.removals[g],a()},remove:p=>{const g=p.descriptor;t.removals[g.id]=!0,t.modified[g.droppableId]=!0,t.additions[g.id]&&delete t.additions[g.id],a()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,t=xm())}}}var mI=({scrollHeight:n,scrollWidth:e,height:t,width:s})=>{const a=Pn({x:e,y:n},{x:s,y:t});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},gI=()=>{const n=document.documentElement;return n||le(),n},yI=()=>{const n=gI();return mI({scrollHeight:n.scrollHeight,scrollWidth:n.scrollWidth,width:n.clientWidth,height:n.clientHeight})},mk=()=>{const n=pI(),e=yI(),t=n.y,s=n.x,a=gI(),l=a.clientWidth,c=a.clientHeight,d=s+l,p=t+c;return{frame:hr({top:t,left:s,right:d,bottom:p}),scroll:{initial:n,current:n,max:e,diff:{value:jt,displacement:jt}}}},gk=({critical:n,scrollOptions:e,registry:t})=>{const s=mk(),a=s.scroll.current,l=n.droppable,c=t.droppable.getAllByType(l.type).map(_=>_.callbacks.getDimensionAndWatchScroll(a,e)),d=t.draggable.getAllByType(n.draggable.type).map(_=>_.getDimension(a));return{dimensions:{draggables:Gw(d),droppables:jw(c)},critical:n,viewport:s}};function mS(n,e,t){return!(t.descriptor.id===e.id||t.descriptor.type!==e.type||n.droppable.getById(t.descriptor.droppableId).descriptor.mode!=="virtual")}var yk=(n,e)=>{let t=null;const s=pk({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:n}),a=(v,A)=>{n.droppable.exists(v)||le(),t&&e.updateDroppableIsEnabled({id:v,isEnabled:A})},l=(v,A)=>{t&&(n.droppable.exists(v)||le(),e.updateDroppableIsCombineEnabled({id:v,isCombineEnabled:A}))},c=(v,A)=>{t&&(n.droppable.exists(v)||le(),e.updateDroppableScroll({id:v,newScroll:A}))},d=(v,A)=>{t&&n.droppable.getById(v).callbacks.scroll(A)},p=()=>{if(!t)return;s.stop();const v=t.critical.droppable;n.droppable.getAllByType(v.type).forEach(A=>A.callbacks.dragStopped()),t.unsubscribe(),t=null},g=v=>{t||le();const A=t.critical.draggable;v.type==="ADDITION"&&mS(n,A,v.value)&&s.add(v.value),v.type==="REMOVAL"&&mS(n,A,v.value)&&s.remove(v.value)};return{updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:l,scrollDroppable:d,updateDroppableScroll:c,startPublishing:v=>{t&&le();const A=n.draggable.getById(v.draggableId),O=n.droppable.getById(A.descriptor.droppableId),L={draggable:A.descriptor,droppable:O.descriptor},x=n.subscribe(g);return t={critical:L,unsubscribe:x},gk({critical:L,registry:n,scrollOptions:v.scrollOptions})},stopPublishing:p}},_I=(n,e)=>n.phase==="IDLE"?!0:n.phase!=="DROP_ANIMATING"||n.completed.result.draggableId===e?!1:n.completed.result.reason==="DROP",_k=n=>{window.scrollBy(n.x,n.y)};const vk=Ht(n=>Wh(n).filter(e=>!(!e.isEnabled||!e.frame))),Ek=(n,e)=>vk(e).find(s=>(s.frame||le(),tI(s.frame.pageMarginBox)(n)))||null;var bk=({center:n,destination:e,droppables:t})=>{if(e){const a=t[e];return a.frame?a:null}return Ek(n,t)};const ku={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:n=>n**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Tk=(n,e,t=()=>ku)=>{const s=t(),a=n[e.size]*s.startFromPercentage,l=n[e.size]*s.maxScrollAtPercentage;return{startScrollingFrom:a,maxScrollValueAt:l}},vI=({startOfRange:n,endOfRange:e,current:t})=>{const s=e-n;return s===0?0:(t-n)/s},Oy=1,Sk=(n,e,t=()=>ku)=>{const s=t();if(n>e.startScrollingFrom)return 0;if(n<=e.maxScrollValueAt)return s.maxPixelScroll;if(n===e.startScrollingFrom)return Oy;const l=1-vI({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:n}),c=s.maxPixelScroll*s.ease(l);return Math.ceil(c)},Ak=(n,e,t)=>{const s=t(),a=s.durationDampening.accelerateAt,l=s.durationDampening.stopDampeningAt,c=e,d=l,g=Date.now()-c;if(g>=l)return n;if(g<a)return Oy;const _=vI({startOfRange:a,endOfRange:d,current:g}),E=n*s.ease(_);return Math.ceil(E)},gS=({distanceToEdge:n,thresholds:e,dragStartTime:t,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const l=Sk(n,e,a);return l===0?0:s?Math.max(Ak(l,t,a),Oy):l},yS=({container:n,distanceToEdges:e,dragStartTime:t,axis:s,shouldUseTimeDampening:a,getAutoScrollerOptions:l})=>{const c=Tk(n,s,l);return e[s.end]<e[s.start]?gS({distanceToEdge:e[s.end],thresholds:c,dragStartTime:t,shouldUseTimeDampening:a,getAutoScrollerOptions:l}):-1*gS({distanceToEdge:e[s.start],thresholds:c,dragStartTime:t,shouldUseTimeDampening:a,getAutoScrollerOptions:l})},wk=({container:n,subject:e,proposedScroll:t})=>{const s=e.height>n.height,a=e.width>n.width;return!a&&!s?t:a&&s?null:{x:a?0:t.x,y:s?0:t.y}};const Ik=Hw(n=>n===0?0:n);var EI=({dragStartTime:n,container:e,subject:t,center:s,shouldUseTimeDampening:a,getAutoScrollerOptions:l})=>{const c={top:s.y-e.top,right:e.right-s.x,bottom:e.bottom-s.y,left:s.x-e.left},d=yS({container:e,distanceToEdges:c,dragStartTime:n,axis:Ty,shouldUseTimeDampening:a,getAutoScrollerOptions:l}),p=yS({container:e,distanceToEdges:c,dragStartTime:n,axis:Kw,shouldUseTimeDampening:a,getAutoScrollerOptions:l}),g=Ik({x:p,y:d});if(us(g,jt))return null;const _=wk({container:e,subject:t,proposedScroll:g});return _?us(_,jt)?null:_:null};const Rk=Hw(n=>n===0?0:n>0?1:-1),Ny=(()=>{const n=(e,t)=>e<0?e:e>t?e-t:0;return({current:e,max:t,change:s})=>{const a=Jt(e,s),l={x:n(a.x,t.x),y:n(a.y,t.y)};return us(l,jt)?null:l}})(),bI=({max:n,current:e,change:t})=>{const s={x:Math.max(e.x,n.x),y:Math.max(e.y,n.y)},a=Rk(t),l=Ny({max:s,current:e,change:a});return!l||a.x!==0&&l.x===0||a.y!==0&&l.y===0},xy=(n,e)=>bI({current:n.scroll.current,max:n.scroll.max,change:e}),Ck=(n,e)=>{if(!xy(n,e))return null;const t=n.scroll.max,s=n.scroll.current;return Ny({current:s,max:t,change:e})},My=(n,e)=>{const t=n.frame;return t?bI({current:t.scroll.current,max:t.scroll.max,change:e}):!1},Dk=(n,e)=>{const t=n.frame;return!t||!My(n,e)?null:Ny({current:t.scroll.current,max:t.scroll.max,change:e})};var Ok=({viewport:n,subject:e,center:t,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:l})=>{const c=EI({dragStartTime:s,container:n.frame,subject:e,center:t,shouldUseTimeDampening:a,getAutoScrollerOptions:l});return c&&xy(n,c)?c:null},Nk=({droppable:n,subject:e,center:t,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:l})=>{const c=n.frame;if(!c)return null;const d=EI({dragStartTime:s,container:c.pageMarginBox,subject:e,center:t,shouldUseTimeDampening:a,getAutoScrollerOptions:l});return d&&My(n,d)?d:null},_S=({state:n,dragStartTime:e,shouldUseTimeDampening:t,scrollWindow:s,scrollDroppable:a,getAutoScrollerOptions:l})=>{const c=n.current.page.borderBoxCenter,p=n.dimensions.draggables[n.critical.draggable.id].page.marginBox;if(n.isWindowScrollAllowed){const E=n.viewport,v=Ok({dragStartTime:e,viewport:E,subject:p,center:c,shouldUseTimeDampening:t,getAutoScrollerOptions:l});if(v){s(v);return}}const g=bk({center:c,destination:Ln(n.impact),droppables:n.dimensions.droppables});if(!g)return;const _=Nk({dragStartTime:e,droppable:g,subject:p,center:c,shouldUseTimeDampening:t,getAutoScrollerOptions:l});_&&a(g.descriptor.id,_)},xk=({scrollWindow:n,scrollDroppable:e,getAutoScrollerOptions:t=()=>ku})=>{const s=xu(n),a=xu(e);let l=null;const c=g=>{l||le();const{shouldUseTimeDampening:_,dragStartTime:E}=l;_S({state:g,scrollWindow:s,scrollDroppable:a,dragStartTime:E,shouldUseTimeDampening:_,getAutoScrollerOptions:t})};return{start:g=>{l&&le();const _=Date.now();let E=!1;const v=()=>{E=!0};_S({state:g,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:v,scrollDroppable:v,getAutoScrollerOptions:t}),l={dragStartTime:_,shouldUseTimeDampening:E},E&&c(g)},stop:()=>{l&&(s.cancel(),a.cancel(),l=null)},scroll:c}},Mk=({move:n,scrollDroppable:e,scrollWindow:t})=>{const s=(d,p)=>{const g=Jt(d.current.client.selection,p);n({client:g})},a=(d,p)=>{if(!My(d,p))return p;const g=Dk(d,p);if(!g)return e(d.descriptor.id,p),null;const _=Pn(p,g);return e(d.descriptor.id,_),Pn(p,_)},l=(d,p,g)=>{if(!d||!xy(p,g))return g;const _=Ck(p,g);if(!_)return t(g),null;const E=Pn(g,_);return t(E),Pn(g,E)};return d=>{const p=d.scrollJumpRequest;if(!p)return;const g=Ln(d.impact);g||le();const _=a(d.dimensions.droppables[g],p);if(!_)return;const E=d.viewport,v=l(d.isWindowScrollAllowed,E,_);v&&s(d,v)}},Pk=({scrollDroppable:n,scrollWindow:e,move:t,getAutoScrollerOptions:s})=>{const a=xk({scrollWindow:e,scrollDroppable:n,getAutoScrollerOptions:s}),l=Mk({move:t,scrollWindow:e,scrollDroppable:n});return{scroll:p=>{if(!(s().disabled||p.phase!=="DRAGGING")){if(p.movementMode==="FLUID"){a.scroll(p);return}p.scrollJumpRequest&&l(p)}},start:a.start,stop:a.stop}};const Mo="data-rfd",Po=(()=>{const n=`${Mo}-drag-handle`;return{base:n,draggableId:`${n}-draggable-id`,contextId:`${n}-context-id`}})(),yg=(()=>{const n=`${Mo}-draggable`;return{base:n,contextId:`${n}-context-id`,id:`${n}-id`}})(),Vk=(()=>{const n=`${Mo}-droppable`;return{base:n,contextId:`${n}-context-id`,id:`${n}-id`}})(),vS={contextId:`${Mo}-scroll-container-context-id`},Lk=n=>e=>`[${e}="${n}"]`,ru=(n,e)=>n.map(t=>{const s=t.styles[e];return s?`${t.selector} { ${s} }`:""}).join(" "),kk="pointer-events: none;";var Uk=n=>{const e=Lk(n),t=(()=>{const d=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(Po.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:d,dragging:kk,dropAnimating:d}}})(),s=(()=>{const d=`
      transition: ${vu.outOfTheWay};
    `;return{selector:e(yg.contextId),styles:{dragging:d,dropAnimating:d,userCancel:d}}})(),a={selector:e(Vk.contextId),styles:{always:"overflow-anchor: none;"}},c=[s,t,a,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:ru(c,"always"),resting:ru(c,"resting"),dragging:ru(c,"dragging"),dropAnimating:ru(c,"dropAnimating"),userCancel:ru(c,"userCancel")}};const kn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?ne.useLayoutEffect:ne.useEffect,Mm=()=>{const n=document.querySelector("head");return n||le(),n},ES=n=>{const e=document.createElement("style");return n&&e.setAttribute("nonce",n),e.type="text/css",e};function Bk(n,e){const t=Fe(()=>Uk(n),[n]),s=ne.useRef(null),a=ne.useRef(null),l=ye(Ht(E=>{const v=a.current;v||le(),v.textContent=E}),[]),c=ye(E=>{const v=s.current;v||le(),v.textContent=E},[]);kn(()=>{!s.current&&!a.current||le();const E=ES(e),v=ES(e);return s.current=E,a.current=v,E.setAttribute(`${Mo}-always`,n),v.setAttribute(`${Mo}-dynamic`,n),Mm().appendChild(E),Mm().appendChild(v),c(t.always),l(t.resting),()=>{const A=O=>{const L=O.current;L||le(),Mm().removeChild(L),O.current=null};A(s),A(a)}},[e,c,l,t.always,t.resting,n]);const d=ye(()=>l(t.dragging),[l,t.dragging]),p=ye(E=>{if(E==="DROP"){l(t.dropAnimating);return}l(t.userCancel)},[l,t.dropAnimating,t.userCancel]),g=ye(()=>{a.current&&l(t.resting)},[l,t.resting]);return Fe(()=>({dragging:d,dropping:p,resting:g}),[d,p,g])}function TI(n,e){return Array.from(n.querySelectorAll(e))}var SI=n=>n&&n.ownerDocument&&n.ownerDocument.defaultView?n.ownerDocument.defaultView:window;function ed(n){return n instanceof SI(n).HTMLElement}function zk(n,e){const t=`[${Po.contextId}="${n}"]`,s=TI(document,t);if(!s.length)return null;const a=s.find(l=>l.getAttribute(Po.draggableId)===e);return!a||!ed(a)?null:a}function qk(n){const e=ne.useRef({}),t=ne.useRef(null),s=ne.useRef(null),a=ne.useRef(!1),l=ye(function(v,A){const O={id:v,focus:A};return e.current[v]=O,function(){const x=e.current;x[v]!==O&&delete x[v]}},[]),c=ye(function(v){const A=zk(n,v);A&&A!==document.activeElement&&A.focus()},[n]),d=ye(function(v,A){t.current===v&&(t.current=A)},[]),p=ye(function(){s.current||a.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const v=t.current;v&&c(v)}))},[c]),g=ye(function(v){t.current=null;const A=document.activeElement;A&&A.getAttribute(Po.draggableId)===v&&(t.current=v)},[]);return kn(()=>(a.current=!0,function(){a.current=!1;const v=s.current;v&&cancelAnimationFrame(v)}),[]),Fe(()=>({register:l,tryRecordFocus:g,tryRestoreFocusRecorded:p,tryShiftRecord:d}),[l,g,p,d])}function Fk(){const n={draggables:{},droppables:{}},e=[];function t(E){return e.push(E),function(){const A=e.indexOf(E);A!==-1&&e.splice(A,1)}}function s(E){e.length&&e.forEach(v=>v(E))}function a(E){return n.draggables[E]||null}function l(E){const v=a(E);return v||le(),v}const c={register:E=>{n.draggables[E.descriptor.id]=E,s({type:"ADDITION",value:E})},update:(E,v)=>{const A=n.draggables[v.descriptor.id];A&&A.uniqueId===E.uniqueId&&(delete n.draggables[v.descriptor.id],n.draggables[E.descriptor.id]=E)},unregister:E=>{const v=E.descriptor.id,A=a(v);A&&E.uniqueId===A.uniqueId&&(delete n.draggables[v],n.droppables[E.descriptor.droppableId]&&s({type:"REMOVAL",value:E}))},getById:l,findById:a,exists:E=>!!a(E),getAllByType:E=>Object.values(n.draggables).filter(v=>v.descriptor.type===E)};function d(E){return n.droppables[E]||null}function p(E){const v=d(E);return v||le(),v}const g={register:E=>{n.droppables[E.descriptor.id]=E},unregister:E=>{const v=d(E.descriptor.id);v&&E.uniqueId===v.uniqueId&&delete n.droppables[E.descriptor.id]},getById:p,findById:d,exists:E=>!!d(E),getAllByType:E=>Object.values(n.droppables).filter(v=>v.descriptor.type===E)};function _(){n.draggables={},n.droppables={},e.length=0}return{draggable:c,droppable:g,subscribe:t,clean:_}}function Hk(){const n=Fe(Fk,[]);return ne.useEffect(()=>function(){n.clean()},[n]),n}var Py=bt.createContext(null),vh=()=>{const n=document.body;return n||le(),n};const jk={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Gk=n=>`rfd-announcement-${n}`;function $k(n){const e=Fe(()=>Gk(n),[n]),t=ne.useRef(null);return ne.useEffect(function(){const l=document.createElement("div");return t.current=l,l.id=e,l.setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true"),mh(l.style,jk),vh().appendChild(l),function(){setTimeout(function(){const p=vh();p.contains(l)&&p.removeChild(l),l===t.current&&(t.current=null)})}},[e]),ye(a=>{const l=t.current;if(l){l.textContent=a;return}},[])}const Yk={separator:"::"};function Vy(n,e=Yk){const t=bt.useId();return Fe(()=>`${n}${e.separator}${t}`,[e.separator,n,t])}function Kk({contextId:n,uniqueId:e}){return`rfd-hidden-text-${n}-${e}`}function Qk({contextId:n,text:e}){const t=Vy("hidden-text",{separator:"-"}),s=Fe(()=>Kk({contextId:n,uniqueId:t}),[t,n]);return ne.useEffect(function(){const l=document.createElement("div");return l.id=s,l.textContent=e,l.style.display="none",vh().appendChild(l),function(){const d=vh();d.contains(l)&&d.removeChild(l)}},[s,e]),s}var td=bt.createContext(null);function AI(n){const e=ne.useRef(n);return ne.useEffect(()=>{e.current=n}),e}function Wk(){let n=null;function e(){return!!n}function t(c){return c===n}function s(c){n&&le();const d={abandon:c};return n=d,d}function a(){n||le(),n=null}function l(){n&&(n.abandon(),a())}return{isClaimed:e,isActive:t,claim:s,release:a,tryAbandon:l}}function Uu(n){return n.phase==="IDLE"||n.phase==="DROP_ANIMATING"?!1:n.isDragging}const Xk=9,Zk=13,Ly=27,wI=32,Jk=33,eU=34,tU=35,nU=36,rU=37,iU=38,sU=39,aU=40,oU={[Zk]:!0,[Xk]:!0};var II=n=>{oU[n.keyCode]&&n.preventDefault()};const nd=(()=>{const n="visibilitychange";return typeof document>"u"?n:[n,`ms${n}`,`webkit${n}`,`moz${n}`,`o${n}`].find(s=>`on${s}`in document)||n})(),RI=0,bS=5;function lU(n,e){return Math.abs(e.x-n.x)>=bS||Math.abs(e.y-n.y)>=bS}const TS={type:"IDLE"};function uU({cancel:n,completed:e,getPhase:t,setPhase:s}){return[{eventName:"mousemove",fn:a=>{const{button:l,clientX:c,clientY:d}=a;if(l!==RI)return;const p={x:c,y:d},g=t();if(g.type==="DRAGGING"){a.preventDefault(),g.actions.move(p);return}g.type!=="PENDING"&&le();const _=g.point;if(!lU(_,p))return;a.preventDefault();const E=g.actions.fluidLift(p);s({type:"DRAGGING",actions:E})}},{eventName:"mouseup",fn:a=>{const l=t();if(l.type!=="DRAGGING"){n();return}a.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:a=>{t().type==="DRAGGING"&&a.preventDefault(),n()}},{eventName:"keydown",fn:a=>{if(t().type==="PENDING"){n();return}if(a.keyCode===Ly){a.preventDefault(),n();return}II(a)}},{eventName:"resize",fn:n},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{t().type==="PENDING"&&n()}},{eventName:"webkitmouseforcedown",fn:a=>{const l=t();if(l.type==="IDLE"&&le(),l.actions.shouldRespectForcePress()){n();return}a.preventDefault()}},{eventName:nd,fn:n}]}function cU(n){const e=ne.useRef(TS),t=ne.useRef(ls),s=Fe(()=>({eventName:"mousedown",fn:function(E){if(E.defaultPrevented||E.button!==RI||E.ctrlKey||E.metaKey||E.shiftKey||E.altKey)return;const v=n.findClosestDraggableId(E);if(!v)return;const A=n.tryGetLock(v,c,{sourceEvent:E});if(!A)return;E.preventDefault();const O={x:E.clientX,y:E.clientY};t.current(),g(A,O)}}),[n]),a=Fe(()=>({eventName:"webkitmouseforcewillbegin",fn:_=>{if(_.defaultPrevented)return;const E=n.findClosestDraggableId(_);if(!E)return;const v=n.findOptionsForDraggable(E);v&&(v.shouldRespectForcePress||n.canGetLock(E)&&_.preventDefault())}}),[n]),l=ye(function(){const E={passive:!1,capture:!0};t.current=tr(window,[a,s],E)},[a,s]),c=ye(()=>{e.current.type!=="IDLE"&&(e.current=TS,t.current(),l())},[l]),d=ye(()=>{const _=e.current;c(),_.type==="DRAGGING"&&_.actions.cancel({shouldBlockNextClick:!0}),_.type==="PENDING"&&_.actions.abort()},[c]),p=ye(function(){const E={capture:!0,passive:!1},v=uU({cancel:d,completed:c,getPhase:()=>e.current,setPhase:A=>{e.current=A}});t.current=tr(window,v,E)},[d,c]),g=ye(function(E,v){e.current.type!=="IDLE"&&le(),e.current={type:"PENDING",point:v,actions:E},p()},[p]);kn(function(){return l(),function(){t.current()}},[l])}function fU(){}const hU={[eU]:!0,[Jk]:!0,[nU]:!0,[tU]:!0};function dU(n,e){function t(){e(),n.cancel()}function s(){e(),n.drop()}return[{eventName:"keydown",fn:a=>{if(a.keyCode===Ly){a.preventDefault(),t();return}if(a.keyCode===wI){a.preventDefault(),s();return}if(a.keyCode===aU){a.preventDefault(),n.moveDown();return}if(a.keyCode===iU){a.preventDefault(),n.moveUp();return}if(a.keyCode===sU){a.preventDefault(),n.moveRight();return}if(a.keyCode===rU){a.preventDefault(),n.moveLeft();return}if(hU[a.keyCode]){a.preventDefault();return}II(a)}},{eventName:"mousedown",fn:t},{eventName:"mouseup",fn:t},{eventName:"click",fn:t},{eventName:"touchstart",fn:t},{eventName:"resize",fn:t},{eventName:"wheel",fn:t,options:{passive:!0}},{eventName:nd,fn:t}]}function pU(n){const e=ne.useRef(fU),t=Fe(()=>({eventName:"keydown",fn:function(l){if(l.defaultPrevented||l.keyCode!==wI)return;const c=n.findClosestDraggableId(l);if(!c)return;const d=n.tryGetLock(c,_,{sourceEvent:l});if(!d)return;l.preventDefault();let p=!0;const g=d.snapLift();e.current();function _(){p||le(),p=!1,e.current(),s()}e.current=tr(window,dU(g,_),{capture:!0,passive:!1})}}),[n]),s=ye(function(){const l={passive:!1,capture:!0};e.current=tr(window,[t],l)},[t]);kn(function(){return s(),function(){e.current()}},[s])}const Pm={type:"IDLE"},mU=120,gU=.15;function yU({cancel:n,getPhase:e}){return[{eventName:"orientationchange",fn:n},{eventName:"resize",fn:n},{eventName:"contextmenu",fn:t=>{t.preventDefault()}},{eventName:"keydown",fn:t=>{if(e().type!=="DRAGGING"){n();return}t.keyCode===Ly&&t.preventDefault(),n()}},{eventName:nd,fn:n}]}function _U({cancel:n,completed:e,getPhase:t}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const a=t();if(a.type!=="DRAGGING"){n();return}a.hasMoved=!0;const{clientX:l,clientY:c}=s.touches[0],d={x:l,y:c};s.preventDefault(),a.actions.move(d)}},{eventName:"touchend",fn:s=>{const a=t();if(a.type!=="DRAGGING"){n();return}s.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:s=>{if(t().type!=="DRAGGING"){n();return}s.preventDefault(),n()}},{eventName:"touchforcechange",fn:s=>{const a=t();a.type==="IDLE"&&le();const l=s.touches[0];if(!l||!(l.force>=gU))return;const d=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){d&&n();return}if(d){if(a.hasMoved){s.preventDefault();return}n();return}s.preventDefault()}},{eventName:nd,fn:n}]}function vU(n){const e=ne.useRef(Pm),t=ne.useRef(ls),s=ye(function(){return e.current},[]),a=ye(function(A){e.current=A},[]),l=Fe(()=>({eventName:"touchstart",fn:function(A){if(A.defaultPrevented)return;const O=n.findClosestDraggableId(A);if(!O)return;const L=n.tryGetLock(O,d,{sourceEvent:A});if(!L)return;const x=A.touches[0],{clientX:$,clientY:Y}=x,te={x:$,y:Y};t.current(),E(L,te)}}),[n]),c=ye(function(){const A={capture:!0,passive:!1};t.current=tr(window,[l],A)},[l]),d=ye(()=>{const v=e.current;v.type!=="IDLE"&&(v.type==="PENDING"&&clearTimeout(v.longPressTimerId),a(Pm),t.current(),c())},[c,a]),p=ye(()=>{const v=e.current;d(),v.type==="DRAGGING"&&v.actions.cancel({shouldBlockNextClick:!0}),v.type==="PENDING"&&v.actions.abort()},[d]),g=ye(function(){const A={capture:!0,passive:!1},O={cancel:p,completed:d,getPhase:s},L=tr(window,_U(O),A),x=tr(window,yU(O),A);t.current=function(){L(),x()}},[p,s,d]),_=ye(function(){const A=s();A.type!=="PENDING"&&le();const O=A.actions.fluidLift(A.point);a({type:"DRAGGING",actions:O,hasMoved:!1})},[s,a]),E=ye(function(A,O){s().type!=="IDLE"&&le();const L=setTimeout(_,mU);a({type:"PENDING",point:O,actions:A,longPressTimerId:L}),g()},[g,s,a,_]);kn(function(){return c(),function(){t.current();const O=s();O.type==="PENDING"&&(clearTimeout(O.longPressTimerId),a(Pm))}},[s,c,a]),kn(function(){return tr(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const EU=["input","button","textarea","select","option","optgroup","video","audio"];function CI(n,e){if(e==null)return!1;if(EU.includes(e.tagName.toLowerCase()))return!0;const s=e.getAttribute("contenteditable");return s==="true"||s===""?!0:e===n?!1:CI(n,e.parentElement)}function bU(n,e){const t=e.target;return ed(t)?CI(n,t):!1}var TU=n=>hr(n.getBoundingClientRect()).center;function SU(n){return n instanceof SI(n).Element}const AU=(()=>{const n="matches";return typeof document>"u"?n:[n,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||n})();function DI(n,e){return n==null?null:n[AU](e)?n:DI(n.parentElement,e)}function wU(n,e){return n.closest?n.closest(e):DI(n,e)}function IU(n){return`[${Po.contextId}="${n}"]`}function RU(n,e){const t=e.target;if(!SU(t))return null;const s=IU(n),a=wU(t,s);return!a||!ed(a)?null:a}function CU(n,e){const t=RU(n,e);return t?t.getAttribute(Po.draggableId):null}function DU(n,e){const t=`[${yg.contextId}="${n}"]`,a=TI(document,t).find(l=>l.getAttribute(yg.id)===e);return!a||!ed(a)?null:a}function OU(n){n.preventDefault()}function Nf({expected:n,phase:e,isLockActive:t,shouldWarn:s}){return!(!t()||n!==e)}function OI({lockAPI:n,store:e,registry:t,draggableId:s}){if(n.isClaimed())return!1;const a=t.draggable.findById(s);return!(!a||!a.options.isEnabled||!_I(e.getState(),s))}function NU({lockAPI:n,contextId:e,store:t,registry:s,draggableId:a,forceSensorStop:l,sourceEvent:c}){if(!OI({lockAPI:n,store:t,registry:s,draggableId:a}))return null;const p=s.draggable.getById(a),g=DU(e,p.descriptor.id);if(!g||c&&!p.options.canDragInteractiveElements&&bU(g,c))return null;const _=n.claim(l||ls);let E="PRE_DRAG";function v(){return p.options.shouldRespectForcePress}function A(){return n.isActive(_)}function O(re,ie){Nf({expected:re,phase:E,isLockActive:A,shouldWarn:!0})&&t.dispatch(ie())}const L=O.bind(null,"DRAGGING");function x(re){function ie(){n.release(),E="COMPLETED"}E!=="PRE_DRAG"&&(ie(),le()),t.dispatch(w4(re.liftActionArgs)),E="DRAGGING";function C(I,R={shouldBlockNextClick:!1}){if(re.cleanup(),R.shouldBlockNextClick){const M=tr(window,[{eventName:"click",fn:OU,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(M)}ie(),t.dispatch(cI({reason:I}))}return{isActive:()=>Nf({expected:"DRAGGING",phase:E,isLockActive:A,shouldWarn:!1}),shouldRespectForcePress:v,drop:I=>C("DROP",I),cancel:I=>C("CANCEL",I),...re.actions}}function $(re){const ie=xu(I=>{L(()=>uI({client:I}))});return{...x({liftActionArgs:{id:a,clientSelection:re,movementMode:"FLUID"},cleanup:()=>ie.cancel(),actions:{move:ie}}),move:ie}}function Y(){const re={moveUp:()=>L(P4),moveRight:()=>L(L4),moveDown:()=>L(V4),moveLeft:()=>L(k4)};return x({liftActionArgs:{id:a,clientSelection:TU(g),movementMode:"SNAP"},cleanup:ls,actions:re})}function te(){Nf({expected:"PRE_DRAG",phase:E,isLockActive:A,shouldWarn:!0})&&n.release()}return{isActive:()=>Nf({expected:"PRE_DRAG",phase:E,isLockActive:A,shouldWarn:!1}),shouldRespectForcePress:v,fluidLift:$,snapLift:Y,abort:te}}const xU=[cU,pU,vU];function MU({contextId:n,store:e,registry:t,customSensors:s,enableDefaultSensors:a}){const l=[...a?xU:[],...s||[]],c=ne.useState(()=>Wk())[0],d=ye(function(x,$){Uu(x)&&!Uu($)&&c.tryAbandon()},[c]);kn(function(){let x=e.getState();return e.subscribe(()=>{const Y=e.getState();d(x,Y),x=Y})},[c,e,d]),kn(()=>c.tryAbandon,[c.tryAbandon]);const p=ye(L=>OI({lockAPI:c,registry:t,store:e,draggableId:L}),[c,t,e]),g=ye((L,x,$)=>NU({lockAPI:c,registry:t,contextId:n,store:e,draggableId:L,forceSensorStop:x||null,sourceEvent:$&&$.sourceEvent?$.sourceEvent:null}),[n,c,t,e]),_=ye(L=>CU(n,L),[n]),E=ye(L=>{const x=t.draggable.findById(L);return x?x.options:null},[t.draggable]),v=ye(function(){c.isClaimed()&&(c.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(Ry()))},[c,e]),A=ye(()=>c.isClaimed(),[c]),O=Fe(()=>({canGetLock:p,tryGetLock:g,findClosestDraggableId:_,findOptionsForDraggable:E,tryReleaseLock:v,isLockClaimed:A}),[p,g,_,E,v,A]);for(let L=0;L<l.length;L++)l[L](O)}const PU=n=>({onBeforeCapture:e=>{const t=()=>{n.onBeforeCapture&&n.onBeforeCapture(e)};my.flushSync(t)},onBeforeDragStart:n.onBeforeDragStart,onDragStart:n.onDragStart,onDragEnd:n.onDragEnd,onDragUpdate:n.onDragUpdate}),VU=n=>({...ku,...n.autoScrollerOptions,durationDampening:{...ku.durationDampening,...n.autoScrollerOptions}});function iu(n){return n.current||le(),n.current}function LU(n){const{contextId:e,setCallbacks:t,sensors:s,nonce:a,dragHandleUsageInstructions:l}=n,c=ne.useRef(null),d=AI(n),p=ye(()=>PU(d.current),[d]),g=ye(()=>VU(d.current),[d]),_=$k(e),E=Qk({contextId:e,text:l}),v=Bk(e,a),A=ye(M=>{iu(c).dispatch(M)},[]),O=Fe(()=>KT({publishWhileDragging:R4,updateDroppableScroll:D4,updateDroppableIsEnabled:O4,updateDroppableIsCombineEnabled:N4,collectionStarting:C4},A),[A]),L=Hk(),x=Fe(()=>yk(L,O),[L,O]),$=Fe(()=>Pk({scrollWindow:_k,scrollDroppable:x.scrollDroppable,getAutoScrollerOptions:g,...KT({move:uI},A)}),[x.scrollDroppable,A,g]),Y=qk(e),te=Fe(()=>dk({announce:_,autoScroller:$,dimensionMarshal:x,focusMarshal:Y,getResponders:p,styleMarshal:v}),[_,$,x,Y,p,v]);c.current=te;const ae=ye(()=>{const M=iu(c);M.getState().phase!=="IDLE"&&M.dispatch(Ry())},[]),re=ye(()=>{const M=iu(c).getState();return M.phase==="DROP_ANIMATING"?!0:M.phase==="IDLE"?!1:M.isDragging},[]),ie=Fe(()=>({isDragging:re,tryAbort:ae}),[re,ae]);t(ie);const C=ye(M=>_I(iu(c).getState(),M),[]),I=ye(()=>aa(iu(c).getState()),[]),R=Fe(()=>({marshal:x,focus:Y,contextId:e,canLift:C,isMovementAllowed:I,dragHandleUsageInstructionsId:E,registry:L}),[e,x,E,Y,C,I,L]);return MU({contextId:e,store:te,registry:L,customSensors:s||null,enableDefaultSensors:n.enableDefaultSensors!==!1}),ne.useEffect(()=>ae,[ae]),bt.createElement(td.Provider,{value:R},bt.createElement(oL,{context:Py,store:te},n.children))}function kU(){return bt.useId()}function UU(n){const e=kU(),t=n.dragHandleUsageInstructions||Hf.dragHandleUsageInstructions;return bt.createElement(pL,null,s=>bt.createElement(LU,{nonce:n.nonce,contextId:e,setCallbacks:s,dragHandleUsageInstructions:t,enableDefaultSensors:n.enableDefaultSensors,sensors:n.sensors,onBeforeCapture:n.onBeforeCapture,onBeforeDragStart:n.onBeforeDragStart,onDragStart:n.onDragStart,onDragUpdate:n.onDragUpdate,onDragEnd:n.onDragEnd,autoScrollerOptions:n.autoScrollerOptions},n.children))}const SS={dragging:5e3,dropAnimating:4500},BU=(n,e)=>e?vu.drop(e.duration):n?vu.snap:vu.fluid,zU=(n,e)=>{if(n)return e?Lu.opacity.drop:Lu.opacity.combining},qU=n=>n.forceShouldAnimate!=null?n.forceShouldAnimate:n.mode==="SNAP";function FU(n){const t=n.dimension.client,{offset:s,combineWith:a,dropping:l}=n,c=!!a,d=qU(n),p=!!l,g=p?mg.drop(s,c):mg.moveTo(s);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:BU(d,l),transform:g,opacity:zU(c,p),zIndex:p?SS.dropAnimating:SS.dragging,pointerEvents:"none"}}function HU(n){return{transform:mg.moveTo(n.offset),transition:n.shouldAnimateDisplacement?void 0:"none"}}function jU(n){return n.type==="DRAGGING"?FU(n):HU(n)}function GU(n,e,t=jt){const s=window.getComputedStyle(e),a=e.getBoundingClientRect(),l=kw(a,s),c=ph(l,t),d={client:l,tagName:e.tagName.toLowerCase(),display:s.display},p={x:l.marginBox.width,y:l.marginBox.height};return{descriptor:n,placeholder:d,displaceBy:p,client:l,page:c}}function $U(n){const e=Vy("draggable"),{descriptor:t,registry:s,getDraggableRef:a,canDragInteractiveElements:l,shouldRespectForcePress:c,isEnabled:d}=n,p=Fe(()=>({canDragInteractiveElements:l,shouldRespectForcePress:c,isEnabled:d}),[l,d,c]),g=ye(A=>{const O=a();return O||le(),GU(t,O,A)},[t,a]),_=Fe(()=>({uniqueId:e,descriptor:t,options:p,getDimension:g}),[t,g,p,e]),E=ne.useRef(_),v=ne.useRef(!0);kn(()=>(s.draggable.register(E.current),()=>s.draggable.unregister(E.current)),[s.draggable]),kn(()=>{if(v.current){v.current=!1;return}const A=E.current;E.current=_,s.draggable.update(_,A)},[_,s.draggable])}var ky=bt.createContext(null);function Eh(n){const e=ne.useContext(n);return e||le(),e}function YU(n){n.preventDefault()}const KU=n=>{const e=ne.useRef(null),t=ye((ie=null)=>{e.current=ie},[]),s=ye(()=>e.current,[]),{contextId:a,dragHandleUsageInstructionsId:l,registry:c}=Eh(td),{type:d,droppableId:p}=Eh(ky),g=Fe(()=>({id:n.draggableId,index:n.index,type:d,droppableId:p}),[n.draggableId,n.index,d,p]),{children:_,draggableId:E,isEnabled:v,shouldRespectForcePress:A,canDragInteractiveElements:O,isClone:L,mapped:x,dropAnimationFinished:$}=n;if(!L){const ie=Fe(()=>({descriptor:g,registry:c,getDraggableRef:s,canDragInteractiveElements:O,shouldRespectForcePress:A,isEnabled:v}),[g,c,s,O,A,v]);$U(ie)}const Y=Fe(()=>v?{tabIndex:0,role:"button","aria-describedby":l,"data-rfd-drag-handle-draggable-id":E,"data-rfd-drag-handle-context-id":a,draggable:!1,onDragStart:YU}:null,[a,l,E,v]),te=ye(ie=>{x.type==="DRAGGING"&&x.dropping&&ie.propertyName==="transform"&&my.flushSync($)},[$,x]),ae=Fe(()=>{const ie=jU(x),C=x.type==="DRAGGING"&&x.dropping?te:void 0;return{innerRef:t,draggableProps:{"data-rfd-draggable-context-id":a,"data-rfd-draggable-id":E,style:ie,onTransitionEnd:C},dragHandleProps:Y}},[a,Y,E,x,te,t]),re=Fe(()=>({draggableId:g.id,type:g.type,source:{index:g.index,droppableId:g.droppableId}}),[g.droppableId,g.id,g.index,g.type]);return bt.createElement(bt.Fragment,null,_(ae,x.snapshot,re))};var NI=(n,e)=>n===e,xI=n=>{const{combine:e,destination:t}=n;return t?t.droppableId:e?e.droppableId:null};const QU=n=>n.combine?n.combine.draggableId:null,WU=n=>n.at&&n.at.type==="COMBINE"?n.at.combine.draggableId:null;function XU(){const n=Ht((a,l)=>({x:a,y:l})),e=Ht((a,l,c=null,d=null,p=null)=>({isDragging:!0,isClone:l,isDropAnimating:!!p,dropAnimation:p,mode:a,draggingOver:c,combineWith:d,combineTargetFor:null})),t=Ht((a,l,c,d,p=null,g=null,_=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:p,combineWith:g,mode:l,offset:a,dimension:c,forceShouldAnimate:_,snapshot:e(l,d,p,g,null)}}));return(a,l)=>{if(Uu(a)){if(a.critical.draggable.id!==l.draggableId)return null;const c=a.current.client.offset,d=a.dimensions.draggables[l.draggableId],p=Ln(a.impact),g=WU(a.impact),_=a.forceShouldAnimate;return t(n(c.x,c.y),a.movementMode,d,l.isClone,p,g,_)}if(a.phase==="DROP_ANIMATING"){const c=a.completed;if(c.result.draggableId!==l.draggableId)return null;const d=l.isClone,p=a.dimensions.draggables[l.draggableId],g=c.result,_=g.mode,E=xI(g),v=QU(g),O={duration:a.dropDuration,curve:Dy.drop,moveTo:a.newHomeClientOffset,opacity:v?Lu.opacity.drop:null,scale:v?Lu.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:p,dropping:O,draggingOver:E,combineWith:v,mode:_,forceShouldAnimate:null,snapshot:e(_,d,E,v,O)}}}return null}}function MI(n=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:n,combineWith:null}}const ZU={mapped:{type:"SECONDARY",offset:jt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:MI(null)}};function JU(){const n=Ht((c,d)=>({x:c,y:d})),e=Ht(MI),t=Ht((c,d=null,p)=>({mapped:{type:"SECONDARY",offset:c,combineTargetFor:d,shouldAnimateDisplacement:p,snapshot:e(d)}})),s=c=>c?t(jt,c,!0):null,a=(c,d,p,g)=>{const _=p.displaced.visible[c],E=!!(g.inVirtualList&&g.effected[c]),v=Xh(p),A=v&&v.draggableId===c?d:null;if(!_){if(!E)return s(A);if(p.displaced.invisible[c])return null;const x=Ho(g.displacedBy.point),$=n(x.x,x.y);return t($,A,!0)}if(E)return s(A);const O=p.displacedBy.point,L=n(O.x,O.y);return t(L,A,_.shouldAnimate)};return(c,d)=>{if(Uu(c))return c.critical.draggable.id===d.draggableId?null:a(d.draggableId,c.critical.draggable.id,c.impact,c.afterCritical);if(c.phase==="DROP_ANIMATING"){const p=c.completed;return p.result.draggableId===d.draggableId?null:a(d.draggableId,p.result.draggableId,p.impact,p.afterCritical)}return null}}const e6=()=>{const n=XU(),e=JU();return(s,a)=>n(s,a)||e(s,a)||ZU},t6={dropAnimationFinished:fI},n6=Lw(e6,t6,null,{context:Py,areStatePropsEqual:NI})(KU);function PI(n){return Eh(ky).isUsingCloneFor===n.draggableId&&!n.isClone?null:bt.createElement(n6,n)}function AS(n){const e=typeof n.isDragDisabled=="boolean"?!n.isDragDisabled:!0,t=!!n.disableInteractiveElementBlocking,s=!!n.shouldRespectForcePress;return bt.createElement(PI,mh({},n,{isClone:!1,isEnabled:e,canDragInteractiveElements:t,shouldRespectForcePress:s}))}const VI=n=>e=>n===e,r6=VI("scroll"),i6=VI("auto"),wS=(n,e)=>e(n.overflowX)||e(n.overflowY),s6=n=>{const e=window.getComputedStyle(n),t={overflowX:e.overflowX,overflowY:e.overflowY};return wS(t,r6)||wS(t,i6)},a6=()=>!1,LI=n=>n==null?null:n===document.body?a6()?n:null:n===document.documentElement?null:s6(n)?n:LI(n.parentElement);var _g=n=>({x:n.scrollLeft,y:n.scrollTop});const kI=n=>n?window.getComputedStyle(n).position==="fixed"?!0:kI(n.parentElement):!1;var o6=n=>{const e=LI(n),t=kI(n);return{closestScrollable:e,isFixedOnPage:t}},l6=({descriptor:n,isEnabled:e,isCombineEnabled:t,isFixedOnPage:s,direction:a,client:l,page:c,closest:d})=>{const p=(()=>{if(!d)return null;const{scrollSize:v,client:A}=d,O=mI({scrollHeight:v.scrollHeight,scrollWidth:v.scrollWidth,height:A.paddingBox.height,width:A.paddingBox.width});return{pageMarginBox:d.page.marginBox,frameClient:A,scrollSize:v,shouldClipSubject:d.shouldClipSubject,scroll:{initial:d.scroll,current:d.scroll,max:O,diff:{value:jt,displacement:jt}}}})(),g=a==="vertical"?Ty:Kw,_=xo({page:c,withPlaceholder:null,axis:g,frame:p});return{descriptor:n,isCombineEnabled:t,isFixedOnPage:s,axis:g,isEnabled:e,client:l,page:c,frame:p,subject:_}};const u6=(n,e)=>{const t=Uw(n);if(!e||n!==e)return t;const s=t.paddingBox.top-e.scrollTop,a=t.paddingBox.left-e.scrollLeft,l=s+e.scrollHeight,c=a+e.scrollWidth,p=_y({top:s,right:c,bottom:l,left:a},t.border);return vy({borderBox:p,margin:t.margin,border:t.border,padding:t.padding})};var c6=({ref:n,descriptor:e,env:t,windowScroll:s,direction:a,isDropDisabled:l,isCombineEnabled:c,shouldClipSubject:d})=>{const p=t.closestScrollable,g=u6(n,p),_=ph(g,s),E=(()=>{if(!p)return null;const A=Uw(p),O={scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth};return{client:A,page:ph(A,s),scroll:_g(p),scrollSize:O,shouldClipSubject:d}})();return l6({descriptor:e,isEnabled:!l,isCombineEnabled:c,isFixedOnPage:t.isFixedOnPage,direction:a,client:g,page:_,closest:E})};const f6={passive:!1},h6={passive:!0};var IS=n=>n.shouldPublishImmediately?f6:h6;const xf=n=>n&&n.env.closestScrollable||null;function d6(n){const e=ne.useRef(null),t=Eh(td),s=Vy("droppable"),{registry:a,marshal:l}=t,c=AI(n),d=Fe(()=>({id:n.droppableId,type:n.type,mode:n.mode}),[n.droppableId,n.mode,n.type]),p=ne.useRef(d),g=Fe(()=>Ht((ae,re)=>{e.current||le();const ie={x:ae,y:re};l.updateDroppableScroll(d.id,ie)}),[d.id,l]),_=ye(()=>{const ae=e.current;return!ae||!ae.env.closestScrollable?jt:_g(ae.env.closestScrollable)},[]),E=ye(()=>{const ae=_();g(ae.x,ae.y)},[_,g]),v=Fe(()=>xu(E),[E]),A=ye(()=>{const ae=e.current,re=xf(ae);if(ae&&re||le(),ae.scrollOptions.shouldPublishImmediately){E();return}v()},[v,E]),O=ye((ae,re)=>{e.current&&le();const ie=c.current,C=ie.getDroppableRef();C||le();const I=o6(C),R={ref:C,descriptor:d,env:I,scrollOptions:re};e.current=R;const M=c6({ref:C,descriptor:d,env:I,windowScroll:ae,direction:ie.direction,isDropDisabled:ie.isDropDisabled,isCombineEnabled:ie.isCombineEnabled,shouldClipSubject:!ie.ignoreContainerClipping}),P=I.closestScrollable;return P&&(P.setAttribute(vS.contextId,t.contextId),P.addEventListener("scroll",A,IS(R.scrollOptions))),M},[t.contextId,d,A,c]),L=ye(()=>{const ae=e.current,re=xf(ae);return ae&&re||le(),_g(re)},[]),x=ye(()=>{const ae=e.current;ae||le();const re=xf(ae);e.current=null,re&&(v.cancel(),re.removeAttribute(vS.contextId),re.removeEventListener("scroll",A,IS(ae.scrollOptions)))},[A,v]),$=ye(ae=>{const re=e.current;re||le();const ie=xf(re);ie||le(),ie.scrollTop+=ae.y,ie.scrollLeft+=ae.x},[]),Y=Fe(()=>({getDimensionAndWatchScroll:O,getScrollWhileDragging:L,dragStopped:x,scroll:$}),[x,O,L,$]),te=Fe(()=>({uniqueId:s,descriptor:d,callbacks:Y}),[Y,d,s]);kn(()=>(p.current=te.descriptor,a.droppable.register(te),()=>{e.current&&x(),a.droppable.unregister(te)}),[Y,d,x,te,l,a.droppable]),kn(()=>{e.current&&l.updateDroppableIsEnabled(p.current.id,!n.isDropDisabled)},[n.isDropDisabled,l]),kn(()=>{e.current&&l.updateDroppableIsCombineEnabled(p.current.id,n.isCombineEnabled)},[n.isCombineEnabled,l])}function Vm(){}const RS={width:0,height:0,margin:bL},p6=({isAnimatingOpenOnMount:n,placeholder:e,animate:t})=>n||t==="close"?RS:{height:e.client.borderBox.height,width:e.client.borderBox.width,margin:e.client.margin},m6=({isAnimatingOpenOnMount:n,placeholder:e,animate:t})=>{const s=p6({isAnimatingOpenOnMount:n,placeholder:e,animate:t});return{display:e.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:t!=="none"?vu.placeholder:null}},g6=n=>{const e=ne.useRef(null),t=ye(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{animate:s,onTransitionEnd:a,onClose:l,contextId:c}=n,[d,p]=ne.useState(n.animate==="open");ne.useEffect(()=>d?s!=="open"?(t(),p(!1),Vm):e.current?Vm:(e.current=setTimeout(()=>{e.current=null,p(!1)}),t):Vm,[s,d,t]);const g=ye(E=>{E.propertyName==="height"&&(a(),s==="close"&&l())},[s,l,a]),_=m6({isAnimatingOpenOnMount:d,animate:n.animate,placeholder:n.placeholder});return bt.createElement(n.placeholder.tagName,{style:_,"data-rfd-placeholder-context-id":c,onTransitionEnd:g,ref:n.innerRef})};var y6=bt.memo(g6);class _6 extends bt.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!e.on,data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const v6=n=>{const e=ne.useContext(td);e||le();const{contextId:t,isMovementAllowed:s}=e,a=ne.useRef(null),l=ne.useRef(null),{children:c,droppableId:d,type:p,mode:g,direction:_,ignoreContainerClipping:E,isDropDisabled:v,isCombineEnabled:A,snapshot:O,useClone:L,updateViewportMaxScroll:x,getContainerForClone:$}=n,Y=ye(()=>a.current,[]),te=ye((P=null)=>{a.current=P},[]);ye(()=>l.current,[]);const ae=ye((P=null)=>{l.current=P},[]),re=ye(()=>{s()&&x({maxScroll:yI()})},[s,x]);d6({droppableId:d,type:p,mode:g,direction:_,isDropDisabled:v,isCombineEnabled:A,ignoreContainerClipping:E,getDroppableRef:Y});const ie=Fe(()=>bt.createElement(_6,{on:n.placeholder,shouldAnimate:n.shouldAnimatePlaceholder},({onClose:P,data:U,animate:D})=>bt.createElement(y6,{placeholder:U,onClose:P,innerRef:ae,animate:D,contextId:t,onTransitionEnd:re})),[t,re,n.placeholder,n.shouldAnimatePlaceholder,ae]),C=Fe(()=>({innerRef:te,placeholder:ie,droppableProps:{"data-rfd-droppable-id":d,"data-rfd-droppable-context-id":t}}),[t,d,ie,te]),I=L?L.dragging.draggableId:null,R=Fe(()=>({droppableId:d,type:p,isUsingCloneFor:I}),[d,I,p]);function M(){if(!L)return null;const{dragging:P,render:U}=L,D=bt.createElement(PI,{draggableId:P.draggableId,index:P.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(ut,He)=>U(ut,He,P));return aV.createPortal(D,$())}return bt.createElement(ky.Provider,{value:R},c(C,O),M())};function E6(){return document.body||le(),document.body}const CS={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:E6},UI=n=>{let e={...n},t;for(t in CS)n[t]===void 0&&(e={...e,[t]:CS[t]});return e},Lm=(n,e)=>n===e.droppable.type,DS=(n,e)=>e.draggables[n.draggable.id],b6=()=>{const n={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e={...n,shouldAnimatePlaceholder:!1},t=Ht(l=>({draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}})),s=Ht((l,c,d,p,g,_)=>{const E=g.descriptor.id;if(g.descriptor.droppableId===l){const O=_?{render:_,dragging:t(g.descriptor)}:null,L={isDraggingOver:d,draggingOverWith:d?E:null,draggingFromThisWith:E,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!1,snapshot:L,useClone:O}}if(!c)return e;if(!p)return n;const A={isDraggingOver:d,draggingOverWith:E,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!0,snapshot:A,useClone:null}});return(l,c)=>{const d=UI(c),p=d.droppableId,g=d.type,_=!d.isDropDisabled,E=d.renderClone;if(Uu(l)){const v=l.critical;if(!Lm(g,v))return e;const A=DS(v,l.dimensions),O=Ln(l.impact)===p;return s(p,_,O,O,A,E)}if(l.phase==="DROP_ANIMATING"){const v=l.completed;if(!Lm(g,v.critical))return e;const A=DS(v.critical,l.dimensions);return s(p,_,xI(v.result)===p,Ln(v.impact)===p,A,E)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){const v=l.completed;if(!Lm(g,v.critical))return e;const A=Ln(v.impact)===p,O=!!(v.impact.at&&v.impact.at.type==="COMBINE"),L=v.critical.droppable.id===p;return A?O?n:e:L?n:e}return e}},T6={updateViewportMaxScroll:M4},OS=Lw(b6,T6,(n,e,t)=>({...UI(t),...n,...e}),{context:Py,areStatePropsEqual:NI})(v6);function S6({days:n,centerID:e,workerKey:t,onSave:s}){const[a,l]=ne.useState([]),[c,d]=ne.useState([]),[p,g]=ne.useState("");ne.useEffect(()=>{async function v(){try{if(!t)return;const A=Ou(Zt,`users/${t}/availability`),O=await uh(A),L={};O.forEach(Y=>{L[Y.id]=Y.data()});const x=Object.entries(L).sort((Y,te)=>Y[1].priority-te[1].priority).map(([Y])=>Y),$=n.filter(Y=>!x.includes(Y));d(x),l($)}catch(A){console.error("Error loading availability:",A),l(n),d([])}}v()},[t,n]);const _=v=>{const{source:A,destination:O}=v;if(!O)return;if(A.droppableId===O.droppableId){const x=A.droppableId==="available"?[...a]:[...c],[$]=x.splice(A.index,1);x.splice(O.index,0,$),A.droppableId==="available"?l(x):d(x)}else{const x=A.droppableId==="available"?[...a]:[...c],$=O.droppableId==="available"?[...a]:[...c],[Y]=x.splice(A.index,1);$.splice(O.index,0,Y),A.droppableId==="available"?(l(x),d($)):(d(x),l($))}},E=async()=>{try{const v=kM(Zt),A=Ou(Zt,`users/${t}/availability`);(await uh(A)).forEach(x=>{c.includes(x.id)||v.delete(x.ref)}),c.forEach((x,$)=>{const Y=rr(Zt,`users/${t}/availability/${x}`);v.set(Y,{priority:$+1})});const L=rr(Zt,`users/${t}`);v.update(L,{lastSubmission:Nu()}),await v.commit(),g("Preferences saved!"),s&&e&&t&&s(e,t,c),setTimeout(()=>g(""),2e3)}catch(v){console.error("Error saving preferences:",v),g("Failed to save preferences."),setTimeout(()=>g(""),3e3)}};return fe.jsxs("div",{className:"worker-preferences",children:[fe.jsx("h2",{children:"Drag Days to Set Your Availability (Top = Highest Priority)"}),fe.jsx("div",{className:"dnd-container",children:fe.jsxs(UU,{onDragEnd:_,children:[fe.jsx(OS,{droppableId:"available",children:v=>fe.jsxs("div",{className:"day-list available",ref:v.innerRef,...v.droppableProps,children:[fe.jsx("h3",{children:"Available Days"}),a.map((A,O)=>fe.jsx(AS,{draggableId:A,index:O,children:L=>fe.jsx("div",{className:"day-item",ref:L.innerRef,...L.draggableProps,...L.dragHandleProps,children:A})},A)),v.placeholder]})}),fe.jsx(OS,{droppableId:"selected",children:v=>fe.jsxs("div",{className:"day-list selected",ref:v.innerRef,...v.droppableProps,children:[fe.jsx("h3",{children:"Your Chosen Days"}),c.map((A,O)=>fe.jsx(AS,{draggableId:A,index:O,children:L=>fe.jsx("div",{className:"day-item",ref:L.innerRef,...L.draggableProps,...L.dragHandleProps,children:A})},A)),v.placeholder]})})]})}),fe.jsx("button",{onClick:E,children:"Save Preferences"}),p&&fe.jsx("p",{className:"success-message",children:p})]})}function A6({keyData:n,onLoginSuccess:e,onCancel:t}){const[s,a]=ne.useState(""),[l,c]=ne.useState(""),[d,p]=ne.useState(null),[g,_]=ne.useState(!1),E=async v=>{v.preventDefault(),p(null),_(!0);try{console.log("Attempting email/pass login");const L=(await rO(Vr,s,l)).user.uid;if(console.log("Comparing email account with manager account"),L===n.authID){const x=rr(Zt,"auth",L);await ug(x,{lastLogin:Nu()},{merge:!0}),e({authUID:L,uid:n.uid,centerID:n.centerID||null,role:"manager",name:n.name||""})}else throw await PM(Ou(Zt,"failedLogins"),{attemptedManager:n.uid,authID:L,email:s,time:Nu()}),new Error("Unauthorized access attempt logged.")}catch(A){p(A.message)}finally{_(!1)}};return fe.jsx("div",{children:fe.jsxs("form",{onSubmit:E,children:[fe.jsxs("label",{children:["Manager Email:",fe.jsx("input",{type:"email",value:s,onChange:v=>a(v.target.value),required:!0,disabled:g})]}),fe.jsx("br",{}),fe.jsxs("label",{children:["Password:",fe.jsx("input",{type:"password",value:l,onChange:v=>c(v.target.value),required:!0,disabled:g})]}),fe.jsx("br",{}),d&&fe.jsx("p",{style:{color:"red"},children:d}),fe.jsx("button",{type:"submit",disabled:g,children:g?"Logging in...":"Login"}),fe.jsx("button",{type:"button",onClick:t,disabled:g,children:"Cancel"})]})})}function w6(){return fe.jsxs("div",{children:[fe.jsx("h2",{children:"Controls"}),fe.jsx("p",{children:"This is a placeholder for manager functionality (create/delete users)."})]})}function I6(){const[n,e]=ne.useState(null),[t,s]=ne.useState(null),[a,l]=ne.useState(["Monday","Tuesday","Wednesday","Thursday","Friday"]),[c,d]=ne.useState(!1),[p,g]=ne.useState(0),[_,E]=ne.useState(!1),[v,A]=ne.useState(!1),[O,L]=ne.useState(null);ne.useEffect(()=>{const C=aO(Vr,async I=>{if(I){console.log("Authenticated as:",I.uid);try{const R=rr(Zt,"auth",I.uid),M=await No(R);if(M.exists()){const P=M.data();s({authUID:I.uid,uid:P.uid,centerID:P.centerID,role:P.role,name:P.name||""}),e(P.centerID)}else s(null)}catch(R){console.error("Error fetching auth doc:",R)}d(!0)}else try{await ZD(Vr),console.log("Signed in anonymously")}catch(R){console.error("Anonymous sign-in error:",R)}});return()=>C()},[]),ne.useEffect(()=>{(async()=>{if(n)try{const I=rr(Zt,"centers",n),R=await No(I);if(R.exists()){const M=R.data();M.daysOptions&&l(M.daysOptions)}}catch(I){console.error("Error fetching center config:",I)}})()},[n]);const x=C=>{L(C),E(!0),s(null),A(!1)},$=C=>{s(C),E(!1),A(!0),e(C.centerID)},Y=C=>{e(C)},te=C=>{s(C)},ae=async()=>{try{const C=Vr.currentUser;if(C){const I=C.uid;if(C.isAnonymous)try{await MM(rr(Zt,"auth",I)),await oO(C),console.log("Anonymous user deleted.")}catch(R){console.warn("Failed to delete anonymous user:",R.message)}else await vA(Vr),console.log("User signed out.")}}catch(C){console.error("Logout error:",C)}finally{s(null),e(null),E(!1),A(!1),L(null)}},re=async(C,I,R)=>{if(!C||!I||!R){console.error("Missing pref");return}try{g(M=>M+1)}catch(M){console.error("Error saving preferences:",M)}};if(!c)return fe.jsx("p",{children:"Initializing authentication..."});if(_&&O)return fe.jsxs("div",{className:"App",children:[fe.jsx("h1",{children:"Manager Login"}),fe.jsx(A6,{keyData:O,onLoginSuccess:$,onCancel:()=>{E(!1),L(null)}})]});if(v)return fe.jsxs("div",{className:"App",children:[fe.jsx(HT,{centerID:n,refreshKey:p}),fe.jsx("h1",{children:"Manager Dashboard"}),fe.jsx("button",{onClick:ae,children:"Logout"}),fe.jsx(w6,{centerID:n,manager:t})]});let ie;return n?t?ie=fe.jsxs("div",{children:[fe.jsxs("h2",{children:["Welcome ",t.name||"User"]}),fe.jsx("button",{onClick:ae,children:"Logout"}),fe.jsx(HT,{centerID:n,refreshKey:p}),t.role==="worker"&&fe.jsx(S6,{days:a,centerID:n,workerKey:t.uid,onSave:re})]}):ie=fe.jsx(sV,{centerID:n,onLogin:te,onManagerKeyDetected:x}):ie=fe.jsx(iV,{onSubmit:Y}),fe.jsxs("div",{className:"App",children:[fe.jsx("h1",{children:"Worker Scheduling System"}),ie]})}y1.createRoot(document.getElementById("root")).render(fe.jsx(ne.StrictMode,{children:fe.jsx(I6,{})}));
